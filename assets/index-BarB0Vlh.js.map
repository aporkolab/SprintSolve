{"version":3,"file":"index-BarB0Vlh.js","sources":["../../src/character.ts","../../src/utils.ts","../../src/obstacles.ts","../../src/questions.ts","../../node_modules/zustand/esm/middleware.mjs","../../src/stores/gameStore.ts","../../src/audio.ts","../../src/particles.ts","../../src/assets.ts","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../src/services/analyticsService.ts","../../node_modules/i18next/dist/esm/i18next.js","../../node_modules/i18next-http-backend/esm/utils.js","../../node_modules/cross-fetch/dist/browser-ponyfill.js","../../node_modules/i18next-http-backend/esm/getFetch.cjs","../../node_modules/i18next-http-backend/esm/request.js","../../node_modules/i18next-http-backend/esm/index.js","../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/@babel/runtime/helpers/esm/typeof.js","../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../node_modules/@babel/runtime/helpers/esm/createClass.js","../../node_modules/i18next-browser-languagedetector/dist/esm/i18nextBrowserLanguageDetector.js","../../src/services/i18nService.ts","../../src/components/ConsentManager.ts","../../src/components/LanguageSelector.ts","../../src/main.ts"],"sourcesContent":["import type { Character as ICharacter } from '@/types';\n\nclass CharacterImpl implements ICharacter {\n  public readonly size = 60;\n  public readonly gravity = 0.5;\n  public readonly jump_strength = -10;\n\n  public x = 150; // Fixed horizontal position\n  public y = 0; // Will be initialized later\n  public velocity_y = 0;\n\n  public jump(): void {\n    this.velocity_y = this.jump_strength;\n  }\n\n  public draw(\n    ctx: CanvasRenderingContext2D,\n    characterImage: HTMLImageElement,\n  ): void {\n    if (!characterImage) return;\n\n    ctx.save();\n    ctx.translate(this.x, this.y);\n\n    // Rotate based on vertical velocity for a more dynamic feel\n    const angle = Math.atan2(this.velocity_y, 20) * 0.3;\n    ctx.rotate(angle);\n\n    // Draw the entire GIF. The browser handles the animation.\n    ctx.drawImage(\n      characterImage,\n      -this.size / 2,\n      -this.size / 2,\n      this.size,\n      this.size,\n    );\n\n    ctx.restore();\n  }\n\n  public update(): void {\n    this.velocity_y += this.gravity;\n    this.y += this.velocity_y;\n  }\n\n  public reset(canvasHeight: number): void {\n    this.y = canvasHeight / 2;\n    this.velocity_y = 0;\n  }\n\n  public getBounds(): {\n    top: number;\n    bottom: number;\n    left: number;\n    right: number;\n  } {\n    const halfSize = this.size / 2;\n    return {\n      top: this.y - halfSize,\n      bottom: this.y + halfSize,\n      left: this.x - halfSize,\n      right: this.x + halfSize,\n    };\n  }\n}\n\nexport const character = new CharacterImpl();\n","/**\n * Wraps text within a specified width and renders it with proper line breaks\n */\nexport function wrapText(\n  context: CanvasRenderingContext2D,\n  text: string,\n  x: number,\n  y: number,\n  maxWidth: number,\n  lineHeight: number,\n): void {\n  const words = text.split(' ');\n  let line = '';\n  let currentY = y;\n\n  // A simple approach to center the block of text vertically\n  const lines: string[] = [];\n\n  for (const word of words) {\n    const testLine = line + word + ' ';\n    const metrics = context.measureText(testLine);\n\n    if (metrics.width > maxWidth && line.length > 0) {\n      lines.push(line);\n      line = word + ' ';\n    } else {\n      line = testLine;\n    }\n  }\n  lines.push(line);\n\n  // Adjust starting Y to center the text block\n  currentY -= ((lines.length - 1) * lineHeight) / 2;\n\n  for (let i = 0; i < lines.length; i++) {\n    context.fillText(lines[i]!.trim(), x, currentY + i * lineHeight);\n  }\n}\n\n/**\n * Clamps a value between min and max\n */\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Linear interpolation between two values\n */\nexport function lerp(start: number, end: number, factor: number): number {\n  return start + (end - start) * factor;\n}\n\n/**\n * Maps a value from one range to another\n */\nexport function mapRange(\n  value: number,\n  fromMin: number,\n  fromMax: number,\n  toMin: number,\n  toMax: number,\n): number {\n  return ((value - fromMin) * (toMax - toMin)) / (fromMax - fromMin) + toMin;\n}\n\n/**\n * Generates a random number between min and max (inclusive)\n */\nexport function randomBetween(min: number, max: number): number {\n  return Math.random() * (max - min) + min;\n}\n\n/**\n * Generates a random integer between min and max (inclusive)\n */\nexport function randomIntBetween(min: number, max: number): number {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n/**\n * Checks if two rectangles intersect\n */\nexport function rectIntersect(\n  rect1: { x: number; y: number; width: number; height: number },\n  rect2: { x: number; y: number; width: number; height: number },\n): boolean {\n  return (\n    rect1.x < rect2.x + rect2.width &&\n    rect1.x + rect1.width > rect2.x &&\n    rect1.y < rect2.y + rect2.height &&\n    rect1.y + rect1.height > rect2.y\n  );\n}\n\n/**\n * Calculates distance between two points\n */\nexport function distance(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n): number {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\n/**\n * Degrees to radians conversion\n */\nexport function degreesToRadians(degrees: number): number {\n  return (degrees * Math.PI) / 180;\n}\n\n/**\n * Radians to degrees conversion\n */\nexport function radiansToDegrees(radians: number): number {\n  return (radians * 180) / Math.PI;\n}\n\n/**\n * Formats time in MM:SS format\n */\nexport function formatTime(seconds: number): string {\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = Math.floor(seconds % 60);\n  return `${minutes.toString().padStart(2, '0')}:${remainingSeconds\n    .toString()\n    .padStart(2, '0')}`;\n}\n\n/**\n * Debounce function\n */\nexport function debounce<T extends (..._args: any[]) => void>(\n  func: T,\n  delay: number,\n): (..._args: Parameters<T>) => void {\n  let timeoutId: ReturnType<typeof setTimeout>;\n\n  return (..._args: Parameters<T>) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func(..._args), delay);\n  };\n}\n\n/**\n * Throttle function\n */\nexport function throttle<T extends (..._args: any[]) => void>(\n  func: T,\n  delay: number,\n): (..._args: Parameters<T>) => void {\n  let lastCall = 0;\n\n  return (..._args: Parameters<T>) => {\n    const now = Date.now();\n    if (now - lastCall >= delay) {\n      lastCall = now;\n      func(..._args);\n    }\n  };\n}\n\n/**\n * Deep clone an object\n */\nexport function deepClone<T>(obj: T): T {\n  if (obj === null || typeof obj !== 'object') {\n    return obj;\n  }\n\n  if (obj instanceof Date) {\n    return new Date(obj.getTime()) as T;\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map(item => deepClone(item)) as T;\n  }\n\n  const cloned = {} as T;\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      cloned[key] = deepClone(obj[key]);\n    }\n  }\n\n  return cloned;\n}\n\n/**\n * Creates a promise that resolves after a specified delay\n */\nexport function delay(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * Safely parses JSON with error handling\n */\nexport function safeJsonParse<T>(json: string, fallback: T): T {\n  try {\n    return JSON.parse(json) as T;\n  } catch {\n    return fallback;\n  }\n}\n","/* eslint-disable no-console */\nimport type {\n  Obstacle,\n  Tunnel,\n  Character,\n  CollisionResult,\n  Question,\n} from '@/types';\nimport { wrapText } from '@/utils';\n\n/**\n * Wall obstacle implementation\n */\nclass ObstacleImpl implements Obstacle {\n  public x: number;\n  public y: number;\n  public readonly width: number;\n  public readonly height: number;\n  public readonly isWall = true as const;\n\n  constructor(x: number, y: number, width: number, height: number) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, image?: HTMLImageElement): void {\n    const wallColor = '#FF4500';\n\n    ctx.fillStyle = wallColor;\n    ctx.fillRect(this.x, this.y, this.width, this.height);\n\n    // Add texture/border effect\n    ctx.strokeStyle = '#CC3300';\n    ctx.lineWidth = 2;\n    ctx.strokeRect(this.x, this.y, this.width, this.height);\n\n    // Optional: use image if provided\n    if (image) {\n      ctx.drawImage(image, this.x, this.y, this.width, this.height);\n    }\n  }\n\n  public update(gameSpeed: number): void {\n    this.x -= gameSpeed;\n  }\n\n  public getBounds(): { x: number; y: number; width: number; height: number } {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    };\n  }\n\n  public reset(x: number, y: number, width: number, height: number): void {\n    this.x = x;\n    this.y = y;\n    Object.assign(this, { width, height }); // Readonly workaround for reset\n  }\n}\n\n/**\n * Tunnel implementation (passage between walls)\n */\nclass TunnelImpl implements Tunnel {\n  public x: number;\n  public y: number;\n  public readonly width: number;\n  public readonly height: number;\n  public readonly isCorrect: boolean;\n  public readonly answerText: string;\n  public readonly type = 'tunnel';\n\n  constructor(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    isCorrect: boolean,\n    answerText: string,\n  ) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.isCorrect = isCorrect;\n    this.answerText = answerText;\n  }\n\n  public draw(ctx: CanvasRenderingContext2D): void {\n    // Tunnels are empty space, but we draw the answer text in them\n    const textColor = this.isCorrect ? '#00FF00' : '#FFFFFF';\n\n    ctx.fillStyle = textColor;\n    ctx.font = '14px \"Press Start 2P\"';\n    ctx.textAlign = 'center';\n\n    const maxWidth = this.width - 10; // Padding\n    const lineHeight = 18;\n    const x = this.x + this.width / 2;\n    const y = this.y + this.height / 2;\n\n    wrapText(ctx, this.answerText, x, y, maxWidth, lineHeight);\n    ctx.textAlign = 'left'; // Reset alignment\n  }\n\n  public update(gameSpeed: number): void {\n    this.x -= gameSpeed;\n  }\n\n  public getBounds(): { x: number; y: number; width: number; height: number } {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    };\n  }\n\n  public reset(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    isCorrect: boolean,\n    answerText: string,\n  ): void {\n    this.x = x;\n    this.y = y;\n    Object.assign(this, { width, height, isCorrect, answerText }); // Readonly workaround\n  }\n}\n\n/**\n * Object pool for obstacles and tunnels\n */\nclass ObstaclePool {\n  private readonly obstaclePool: ObstacleImpl[] = [];\n  private readonly tunnelPool: TunnelImpl[] = [];\n  private readonly activeObstacles: ObstacleImpl[] = [];\n  private readonly activeTunnels: TunnelImpl[] = [];\n  private readonly maxPoolSize = 50;\n\n  public createObstacle(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n  ): ObstacleImpl {\n    let obstacle: ObstacleImpl;\n\n    if (this.obstaclePool.length > 0) {\n      obstacle = this.obstaclePool.pop()!;\n      obstacle.reset(x, y, width, height);\n    } else {\n      obstacle = new ObstacleImpl(x, y, width, height);\n    }\n\n    this.activeObstacles.push(obstacle);\n    return obstacle;\n  }\n\n  public createTunnel(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    isCorrect: boolean,\n    answerText: string,\n  ): TunnelImpl {\n    let tunnel: TunnelImpl;\n\n    if (this.tunnelPool.length > 0) {\n      tunnel = this.tunnelPool.pop()!;\n      tunnel.reset(x, y, width, height, isCorrect, answerText);\n    } else {\n      tunnel = new TunnelImpl(x, y, width, height, isCorrect, answerText);\n    }\n\n    this.activeTunnels.push(tunnel);\n    return tunnel;\n  }\n\n  public update(gameSpeed: number): void {\n    // Update obstacles\n    for (let i = this.activeObstacles.length - 1; i >= 0; i--) {\n      const obstacle = this.activeObstacles[i]!;\n      obstacle.update(gameSpeed);\n\n      // Remove off-screen obstacles and return to pool\n      if (obstacle.x + obstacle.width < 0) {\n        this.activeObstacles.splice(i, 1);\n        if (this.obstaclePool.length < this.maxPoolSize) {\n          this.obstaclePool.push(obstacle);\n        }\n      }\n    }\n\n    // Update tunnels\n    for (let i = this.activeTunnels.length - 1; i >= 0; i--) {\n      const tunnel = this.activeTunnels[i]!;\n      tunnel.update(gameSpeed);\n\n      // Remove off-screen tunnels and return to pool\n      if (tunnel.x + tunnel.width < 0) {\n        this.activeTunnels.splice(i, 1);\n        if (this.tunnelPool.length < this.maxPoolSize) {\n          this.tunnelPool.push(tunnel);\n        }\n      }\n    }\n  }\n\n  public draw(\n    ctx: CanvasRenderingContext2D,\n    wallImage?: HTMLImageElement,\n  ): void {\n    // Draw obstacles\n    for (const obstacle of this.activeObstacles) {\n      obstacle.draw(ctx, wallImage);\n    }\n\n    // Draw tunnels\n    for (const tunnel of this.activeTunnels) {\n      tunnel.draw(ctx);\n    }\n  }\n\n  public clear(): void {\n    // Return all active objects to pools\n    for (const obstacle of this.activeObstacles) {\n      if (this.obstaclePool.length < this.maxPoolSize) {\n        this.obstaclePool.push(obstacle);\n      }\n    }\n\n    for (const tunnel of this.activeTunnels) {\n      if (this.tunnelPool.length < this.maxPoolSize) {\n        this.tunnelPool.push(tunnel);\n      }\n    }\n\n    this.activeObstacles.length = 0;\n    this.activeTunnels.length = 0;\n  }\n\n  public getActiveObstacles(): readonly ObstacleImpl[] {\n    return this.activeObstacles;\n  }\n\n  public getActiveTunnels(): readonly TunnelImpl[] {\n    return this.activeTunnels;\n  }\n\n  public getStats(): {\n    activeObstacles: number;\n    activeTunnels: number;\n    pooledObstacles: number;\n    pooledTunnels: number;\n  } {\n    return {\n      activeObstacles: this.activeObstacles.length,\n      activeTunnels: this.activeTunnels.length,\n      pooledObstacles: this.obstaclePool.length,\n      pooledTunnels: this.tunnelPool.length,\n    };\n  }\n}\n\n// Global obstacle pool\nconst obstaclePool = new ObstaclePool();\n\n/**\n * Wall generation system\n */\nexport class WallGenerator {\n  private readonly defaultWallWidth = 100;\n  private readonly defaultTunnelCount = 4;\n  private readonly minTunnelHeight = 120;\n\n  public generateWallWithTunnels(\n    canvas: HTMLCanvasElement,\n    question: Question,\n    characterSize: number = 60,\n  ): void {\n    const wallWidth = this.defaultWallWidth;\n    const numberOfTunnels = Math.min(\n      this.defaultTunnelCount,\n      question.answers.length,\n    );\n    const tunnelHeight = Math.max(this.minTunnelHeight, characterSize * 2);\n\n    // Calculate layout\n    const totalTunnelHeight = numberOfTunnels * tunnelHeight;\n    const totalWallHeight = canvas.height - totalTunnelHeight;\n\n    if (totalWallHeight < 0) {\n      console.error(\n        'Not enough space for tunnels. Reduce tunnel height or number of tunnels.',\n      );\n      return;\n    }\n\n    // The height of each wall segment\n    const wallSegmentHeight = totalWallHeight / (numberOfTunnels + 1);\n    let currentY = 0;\n\n    // Generate walls and tunnels\n    for (let i = 0; i < numberOfTunnels + 1; i++) {\n      // Add wall segment\n      obstaclePool.createObstacle(\n        canvas.width,\n        currentY,\n        wallWidth,\n        wallSegmentHeight,\n      );\n\n      // Add tunnel after the segment (except for the last one)\n      if (i < numberOfTunnels && i < question.answers.length) {\n        const tunnelY = currentY + wallSegmentHeight;\n        const isCorrect = i === question.correctAnswer;\n        const answerText = question.answers[i] || '';\n\n        obstaclePool.createTunnel(\n          canvas.width,\n          tunnelY,\n          wallWidth,\n          tunnelHeight,\n          isCorrect,\n          answerText,\n        );\n\n        currentY += wallSegmentHeight + tunnelHeight;\n      }\n    }\n  }\n\n  public generateMovingWall(\n    canvas: HTMLCanvasElement,\n    question: Question,\n    characterSize: number = 60,\n  ): void {\n    // Implementation for moving/animated walls\n    this.generateWallWithTunnels(canvas, question, characterSize);\n\n    // Add vertical movement to tunnels\n    const tunnels = obstaclePool.getActiveTunnels();\n    const amplitude = 30;\n    const frequency = 0.02;\n\n    tunnels.forEach((tunnel, index) => {\n      const offset = Math.sin(Date.now() * frequency + index) * amplitude;\n      tunnel.y += offset;\n    });\n  }\n}\n\n/**\n * Collision detection system\n */\nexport class CollisionDetector {\n  public checkCollisions(\n    character: Character,\n    canvas: HTMLCanvasElement,\n  ): CollisionResult {\n    // Check floor and ceiling collisions\n    const characterHalfSize = character.size / 2;\n\n    if (character.y - characterHalfSize <= 0) {\n      return 'ceiling';\n    }\n    if (character.y + characterHalfSize >= canvas.height) {\n      return 'floor';\n    }\n\n    // Get active obstacles and tunnels\n    const obstacles = obstaclePool.getActiveObstacles();\n    const tunnels = obstaclePool.getActiveTunnels();\n\n    if (obstacles.length === 0) {\n      return null;\n    }\n\n    // Check horizontal overlap with wall structure\n    const wallX = obstacles[0]!.x;\n    const wallWidth = obstacles[0]!.width;\n    const charRight = character.x + characterHalfSize;\n    const charLeft = character.x - characterHalfSize;\n\n    // Only check collision when character is horizontally aligned with wall\n    if (charRight < wallX || charLeft > wallX + wallWidth) {\n      return null;\n    }\n\n    // Check wall collisions (solid parts)\n    for (const obstacle of obstacles) {\n      if (this.isRectColliding(character, obstacle)) {\n        return 'wall';\n      }\n    }\n\n    // Check tunnel collisions (answer selection)\n    for (const tunnel of tunnels) {\n      if (this.isCharacterInTunnel(character, tunnel)) {\n        return tunnel.isCorrect ? 'correct' : 'incorrect';\n      }\n    }\n\n    // Fallback for edge cases\n    return 'wall';\n  }\n\n  private isRectColliding(character: Character, obstacle: Obstacle): boolean {\n    const charHalfSize = character.size / 2;\n\n    return (\n      character.x + charHalfSize > obstacle.x &&\n      character.x - charHalfSize < obstacle.x + obstacle.width &&\n      character.y + charHalfSize > obstacle.y &&\n      character.y - charHalfSize < obstacle.y + obstacle.height\n    );\n  }\n\n  private isCharacterInTunnel(character: Character, tunnel: Tunnel): boolean {\n    return character.y >= tunnel.y && character.y <= tunnel.y + tunnel.height;\n  }\n}\n\n// Global instances\nexport const wallGenerator = new WallGenerator();\nexport const collisionDetector = new CollisionDetector();\n\n// Legacy API compatibility\nexport const obstacles: ObstacleImpl[] = [];\nexport const tunnels: TunnelImpl[] = [];\n\nexport function generateWallWithTunnels(\n  canvas: HTMLCanvasElement,\n  questionState: Question,\n): void {\n  obstaclePool.clear();\n  wallGenerator.generateWallWithTunnels(canvas, questionState);\n}\n\nexport function checkCollisions(\n  character: Character,\n  canvas: HTMLCanvasElement,\n): CollisionResult {\n  return collisionDetector.checkCollisions(character, canvas);\n}\n\n/**\n * Update all obstacles and tunnels\n */\nexport function updateObstacles(gameSpeed: number): void {\n  obstaclePool.update(gameSpeed);\n\n  // Update legacy arrays for backward compatibility\n  obstacles.length = 0;\n  tunnels.length = 0;\n\n  obstacles.push(...obstaclePool.getActiveObstacles());\n  tunnels.push(...obstaclePool.getActiveTunnels());\n}\n\n/**\n * Draw all obstacles and tunnels\n */\nexport function drawObstacles(\n  ctx: CanvasRenderingContext2D,\n  wallImage?: HTMLImageElement,\n): void {\n  obstaclePool.draw(ctx, wallImage);\n}\n\n/**\n * Clear all obstacles and tunnels\n */\nexport function clearObstacles(): void {\n  obstaclePool.clear();\n}\n\n/**\n * Get obstacle system statistics\n */\nexport function getObstacleStats(): {\n  activeObstacles: number;\n  activeTunnels: number;\n  pooledObstacles: number;\n  pooledTunnels: number;\n} {\n  return obstaclePool.getStats();\n}\n","import type {\n  Question,\n  TriviaCategory,\n  TriviaApiQuestion,\n  TriviaApiResponse,\n} from '@/types';\n\n/**\n * Question state singleton\n */\nclass QuestionState implements Question {\n  public text = '';\n  public correctAnswer: number | null = null;\n  public answers: readonly string[] = [];\n  public display = false;\n\n  public update(question: Partial<Question>): void {\n    if (question.text !== undefined) this.text = question.text;\n    if (question.correctAnswer !== undefined)\n      this.correctAnswer = question.correctAnswer;\n    if (question.answers !== undefined) this.answers = [...question.answers];\n    if (question.display !== undefined) this.display = question.display;\n  }\n\n  public reset(): void {\n    this.text = '';\n    this.correctAnswer = null;\n    this.answers = [];\n    this.display = false;\n  }\n}\n\nexport const questionState = new QuestionState();\n\n/**\n * Trivia API service for fetching questions and categories\n */\nexport class TriviaService {\n  private readonly baseUrl = 'https://opentdb.com';\n  private readonly cache = new Map<string, { data: any; timestamp: number }>();\n  private readonly cacheTimeout = 5 * 60 * 1000; // 5 minutes\n\n  /**\n   * Utility to decode HTML entities\n   */\n  private decodeHtml(html: string): string {\n    const txt = document.createElement('textarea');\n    txt.innerHTML = html;\n    return txt.value;\n  }\n\n  /**\n   * Shuffles array in place and returns it\n   */\n  private shuffleArray<T>(array: T[]): T[] {\n    const shuffled = [...array];\n    for (let i = shuffled.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[j]] = [shuffled[j]!, shuffled[i]!];\n    }\n    return shuffled;\n  }\n\n  /**\n   * Transforms API question to internal format\n   */\n  private transformQuestion(apiQuestion: TriviaApiQuestion): {\n    question: string;\n    answers: string[];\n    correct_answer: number;\n  } {\n    const incorrectAnswers = apiQuestion.incorrect_answers.map(answer =>\n      this.decodeHtml(answer),\n    );\n    const correctAnswer = this.decodeHtml(apiQuestion.correct_answer);\n\n    const allAnswers = this.shuffleArray([...incorrectAnswers, correctAnswer]);\n    const correctIndex = allAnswers.indexOf(correctAnswer);\n\n    return {\n      question: this.decodeHtml(apiQuestion.question),\n      answers: allAnswers,\n      correct_answer: correctIndex,\n    };\n  }\n\n  /**\n   * Generic fetch with caching and error handling\n   */\n  private async fetchWithCache<T>(url: string, cacheKey: string): Promise<T> {\n    // Check cache first\n    const cached = this.cache.get(cacheKey);\n    if (cached && Date.now() - cached.timestamp < this.cacheTimeout) {\n      return cached.data as T;\n    }\n\n    try {\n      const response = await fetch(url);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = (await response.json()) as T;\n\n      // Cache the response\n      this.cache.set(cacheKey, { data, timestamp: Date.now() });\n\n      return data;\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(`Failed to fetch from ${url}:`, error);\n      throw new Error(\n        `Failed to fetch data: ${error instanceof Error ? error.message : 'Unknown error'}`,\n      );\n    }\n  }\n\n  /**\n   * Loads trivia categories\n   */\n  public async loadCategories(): Promise<TriviaCategory[]> {\n    try {\n      const response = await this.fetchWithCache<{\n        trivia_categories: TriviaCategory[];\n      }>(`${this.baseUrl}/api_category.php`, 'categories');\n\n      return response.trivia_categories;\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error('Error loading categories:', error);\n      // Return default categories as fallback\n      return [\n        { id: 9, name: 'General Knowledge' },\n        { id: 17, name: 'Science & Nature' },\n        { id: 21, name: 'Sports' },\n      ];\n    }\n  }\n\n  /**\n   * Fetches a single question by category\n   */\n  public async fetchQuestion(\n    categoryId: number,\n    difficulty?: 'easy' | 'medium' | 'hard',\n  ): Promise<Question> {\n    try {\n      const difficultyParam = difficulty ? `&difficulty=${difficulty}` : '';\n      const url = `${this.baseUrl}/api.php?amount=1&category=${categoryId}&type=multiple${difficultyParam}`;\n\n      const response = await this.fetchWithCache<TriviaApiResponse>(\n        url,\n        `question_${categoryId}_${difficulty || 'any'}`,\n      );\n\n      if (response.response_code !== 0) {\n        throw new Error(\n          `API returned response code: ${response.response_code}`,\n        );\n      }\n\n      if (response.results.length === 0) {\n        throw new Error('No questions returned from API');\n      }\n\n      const transformed = this.transformQuestion(response.results[0]!);\n\n      const question: Question = {\n        text: transformed.question,\n        correctAnswer: transformed.correct_answer,\n        answers: transformed.answers,\n        display: true,\n      };\n\n      // Update global state\n      questionState.update(question);\n\n      return question;\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error('Error fetching question:', error);\n\n      // Return fallback question\n      const fallbackQuestion: Question = {\n        text: 'Error loading question. Please try again.',\n        correctAnswer: null,\n        answers: ['Try Again', 'Refresh Page', 'Check Connection', 'Continue'],\n        display: true,\n      };\n\n      questionState.update(fallbackQuestion);\n      return fallbackQuestion;\n    }\n  }\n\n  /**\n   * Fetches multiple questions at once\n   */\n  public async fetchMultipleQuestions(\n    categoryId: number,\n    amount: number = 5,\n    difficulty?: 'easy' | 'medium' | 'hard',\n  ): Promise<Question[]> {\n    try {\n      const difficultyParam = difficulty ? `&difficulty=${difficulty}` : '';\n      const url = `${this.baseUrl}/api.php?amount=${amount}&category=${categoryId}&type=multiple${difficultyParam}`;\n\n      const response = await this.fetchWithCache<TriviaApiResponse>(\n        url,\n        `questions_${categoryId}_${amount}_${difficulty || 'any'}`,\n      );\n\n      if (response.response_code !== 0) {\n        throw new Error(\n          `API returned response code: ${response.response_code}`,\n        );\n      }\n\n      return response.results.map(apiQuestion => {\n        const transformed = this.transformQuestion(apiQuestion);\n        return {\n          text: transformed.question,\n          correctAnswer: transformed.correct_answer,\n          answers: transformed.answers,\n          display: false, // Will be set to true when needed\n        };\n      });\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error('Error fetching multiple questions:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Validates a question response\n   */\n  public validateAnswer(selectedIndex: number, question: Question): boolean {\n    if (question.correctAnswer === null) return false;\n    return selectedIndex === question.correctAnswer;\n  }\n\n  /**\n   * Gets question statistics\n   */\n  public getStats(): {\n    cacheSize: number;\n    categories: number;\n    questions: number;\n  } {\n    let categories = 0;\n    let questions = 0;\n\n    for (const [key] of this.cache.entries()) {\n      if (key === 'categories') categories++;\n      if (key.startsWith('question_')) questions++;\n    }\n\n    return {\n      cacheSize: this.cache.size,\n      categories,\n      questions,\n    };\n  }\n\n  /**\n   * Clears the cache\n   */\n  public clearCache(): void {\n    this.cache.clear();\n  }\n\n  /**\n   * Preloads questions for better UX\n   */\n  public async preloadQuestions(\n    categoryId: number,\n    amount: number = 10,\n  ): Promise<void> {\n    try {\n      await this.fetchMultipleQuestions(categoryId, amount);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.warn('Failed to preload questions:', error);\n    }\n  }\n}\n\n// Global trivia service instance\nexport const triviaService = new TriviaService();\n\n// Legacy API compatibility\nexport async function loadCategories(): Promise<TriviaCategory[]> {\n  return triviaService.loadCategories();\n}\n\nexport async function fetchQuestion(categoryId: number): Promise<void> {\n  await triviaService.fetchQuestion(categoryId);\n}\n\n/**\n * Question queue for smooth gameplay\n */\nexport class QuestionQueue {\n  private readonly queue: Question[] = [];\n  private readonly maxSize = 5;\n\n  constructor(\n    private readonly _categoryId: number,\n    private readonly _difficulty?: 'easy' | 'medium' | 'hard',\n  ) {\n    // Parameters are stored as class properties for use in methods\n  }\n\n  /**\n   * Ensures the queue has questions\n   */\n  public async ensureQuestions(): Promise<void> {\n    if (this.queue.length < 2) {\n      const questions = await triviaService.fetchMultipleQuestions(\n        this._categoryId,\n        this.maxSize - this.queue.length,\n        this._difficulty,\n      );\n      this.queue.push(...questions);\n    }\n  }\n\n  /**\n   * Gets the next question from the queue\n   */\n  public async next(): Promise<Question | null> {\n    await this.ensureQuestions();\n\n    const question = this.queue.shift();\n    if (!question) return null;\n\n    // Update global state\n    questionState.update({ ...question, display: true });\n\n    // Preload more questions in background\n    this.ensureQuestions().catch(error => {\n      // eslint-disable-next-line no-console\n      console.warn('Failed to preload questions:', error);\n    });\n\n    return question;\n  }\n\n  /**\n   * Gets queue statistics\n   */\n  public getStats(): { queued: number; maxSize: number } {\n    return {\n      queued: this.queue.length,\n      maxSize: this.maxSize,\n    };\n  }\n\n  /**\n   * Clears the queue\n   */\n  public clear(): void {\n    this.queue.length = 0;\n  }\n}\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","/* eslint-disable no-console */\nimport { create } from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport type { GameState, GameStateStore } from '@/types';\n\ninterface GameStoreState extends GameStateStore {\n  // Additional state not in the interface\n  lives: number;\n  level: number;\n  experience: number;\n  achievements: string[];\n  settings: {\n    volume: number;\n    sfxVolume: number;\n    musicVolume: number;\n    difficulty: 'easy' | 'medium' | 'hard' | 'dynamic';\n    theme: 'light' | 'dark' | 'auto';\n    highContrast: boolean;\n    reducedMotion: boolean;\n    autoSave: boolean;\n  };\n  statistics: {\n    totalGamesPlayed: number;\n    totalScore: number;\n    bestScore: number;\n    totalQuestionsAnswered: number;\n    correctAnswers: number;\n    averageScore: number;\n    playTime: number; // in seconds\n    categoriesPlayed: number[];\n    lastPlayed: number;\n  };\n\n  // Extended actions\n  setLives: (_lives: number) => void;\n  decrementLives: () => void;\n  setLevel: (_level: number) => void;\n  incrementLevel: () => void;\n  addExperience: (_xp: number) => void;\n  unlockAchievement: (_achievement: string) => void;\n  updateSettings: (_settings: Partial<GameStoreState['settings']>) => void;\n  updateStatistics: (_stats: Partial<GameStoreState['statistics']>) => void;\n  resetStatistics: () => void;\n}\n\nconst defaultSettings: GameStoreState['settings'] = {\n  volume: 0.7,\n  sfxVolume: 0.8,\n  musicVolume: 0.6,\n  difficulty: 'medium',\n  theme: 'auto',\n  highContrast: false,\n  reducedMotion: false,\n  autoSave: true,\n};\n\nconst defaultStatistics: GameStoreState['statistics'] = {\n  totalGamesPlayed: 0,\n  totalScore: 0,\n  bestScore: 0,\n  totalQuestionsAnswered: 0,\n  correctAnswers: 0,\n  averageScore: 0,\n  playTime: 0,\n  categoriesPlayed: [],\n  lastPlayed: 0,\n};\n\nexport const useGameStore = create<GameStoreState>()(\n  subscribeWithSelector(\n    persist(\n      (set, get) => ({\n        // Core game state\n        gameState: 'menu',\n        score: { value: 0 },\n        hasShield: false,\n        gameSpeed: 4,\n        selectedCategoryId: null,\n        lives: 3,\n        level: 1,\n        experience: 0,\n        achievements: [],\n        settings: defaultSettings,\n        statistics: defaultStatistics,\n\n        // Core actions\n        setGameState: (state: GameState) => {\n          set({ gameState: state });\n\n          // Track game state changes\n          if (state === 'playing') {\n            const stats = get().statistics;\n            set({\n              statistics: {\n                ...stats,\n                totalGamesPlayed: stats.totalGamesPlayed + 1,\n                lastPlayed: Date.now(),\n              },\n            });\n          }\n        },\n\n        incrementScore: () => {\n          const currentScore = get().score.value;\n          const newScore = currentScore + 1;\n\n          set({\n            score: { value: newScore },\n            experience: get().experience + 10,\n          });\n\n          // Update statistics\n          const stats = get().statistics;\n          set({\n            statistics: {\n              ...stats,\n              totalScore: stats.totalScore + 1,\n              bestScore: Math.max(stats.bestScore, newScore),\n              correctAnswers: stats.correctAnswers + 1,\n              averageScore:\n                (stats.totalScore + 1) /\n                Math.max(stats.totalQuestionsAnswered, 1),\n            },\n          });\n\n          // Check for level up (every 100 XP)\n          const newXP = get().experience;\n          const newLevel = Math.floor(newXP / 100) + 1;\n          if (newLevel > get().level) {\n            set({ level: newLevel });\n            get().unlockAchievement(`level_${newLevel}`);\n          }\n        },\n\n        resetScore: () => {\n          set({ score: { value: 0 } });\n        },\n\n        setShield: (hasShield: boolean) => {\n          set({ hasShield });\n        },\n\n        setGameSpeed: (speed: number) => {\n          set({ gameSpeed: speed });\n        },\n\n        setSelectedCategory: (categoryId: number) => {\n          set({ selectedCategoryId: categoryId });\n\n          // Track category usage\n          const stats = get().statistics;\n          const categoriesPlayed = stats.categoriesPlayed.includes(categoryId)\n            ? stats.categoriesPlayed\n            : [...stats.categoriesPlayed, categoryId];\n\n          set({\n            statistics: {\n              ...stats,\n              categoriesPlayed,\n            },\n          });\n        },\n\n        resetGame: () => {\n          set({\n            gameState: 'menu',\n            score: { value: 0 },\n            hasShield: false,\n            gameSpeed: 4,\n            lives: 3,\n          });\n        },\n\n        // Extended actions\n        setLives: (lives: number) => {\n          set({ lives: Math.max(0, lives) });\n        },\n\n        decrementLives: () => {\n          const newLives = Math.max(0, get().lives - 1);\n          set({ lives: newLives });\n\n          if (newLives === 0) {\n            get().setGameState('gameOver');\n          }\n        },\n\n        setLevel: (level: number) => {\n          set({ level: Math.max(1, level) });\n        },\n\n        incrementLevel: () => {\n          const newLevel = get().level + 1;\n          set({ level: newLevel });\n          get().unlockAchievement(`level_${newLevel}`);\n        },\n\n        addExperience: (xp: number) => {\n          const newXP = get().experience + xp;\n          set({ experience: newXP });\n\n          // Check for level up\n          const newLevel = Math.floor(newXP / 100) + 1;\n          if (newLevel > get().level) {\n            get().setLevel(newLevel);\n          }\n        },\n\n        unlockAchievement: (achievement: string) => {\n          const achievements = get().achievements;\n          if (!achievements.includes(achievement)) {\n            set({ achievements: [...achievements, achievement] });\n          }\n        },\n\n        updateSettings: (settings: Partial<GameStoreState['settings']>) => {\n          set({\n            settings: {\n              ...get().settings,\n              ...settings,\n            },\n          });\n        },\n\n        updateStatistics: (stats: Partial<GameStoreState['statistics']>) => {\n          set({\n            statistics: {\n              ...get().statistics,\n              ...stats,\n            },\n          });\n        },\n\n        resetStatistics: () => {\n          set({ statistics: defaultStatistics });\n        },\n      }),\n      {\n        name: 'sprintsolve-game-storage',\n        storage: createJSONStorage(() => localStorage),\n        partialize: state => ({\n          // Only persist these properties\n          settings: state.settings,\n          statistics: state.statistics,\n          achievements: state.achievements,\n          level: state.level,\n          experience: state.experience,\n        }),\n      },\n    ),\n  ),\n);\n\n// Selectors for better performance\nexport const useGameState = () => useGameStore(state => state.gameState);\nexport const useScore = () => useGameStore(state => state.score);\nexport const useShield = () => useGameStore(state => state.hasShield);\nexport const useGameSpeed = () => useGameStore(state => state.gameSpeed);\nexport const useSelectedCategory = () =>\n  useGameStore(state => state.selectedCategoryId);\nexport const useLives = () => useGameStore(state => state.lives);\nexport const useLevel = () => useGameStore(state => state.level);\nexport const useExperience = () => useGameStore(state => state.experience);\nexport const useAchievements = () => useGameStore(state => state.achievements);\nexport const useSettings = () => useGameStore(state => state.settings);\nexport const useStatistics = () => useGameStore(state => state.statistics);\n\n// Action selectors\nexport const useGameActions = () =>\n  useGameStore(state => ({\n    setGameState: state.setGameState,\n    incrementScore: state.incrementScore,\n    resetScore: state.resetScore,\n    setShield: state.setShield,\n    setGameSpeed: state.setGameSpeed,\n    setSelectedCategory: state.setSelectedCategory,\n    resetGame: state.resetGame,\n    setLives: state.setLives,\n    decrementLives: state.decrementLives,\n    addExperience: state.addExperience,\n    unlockAchievement: state.unlockAchievement,\n    updateSettings: state.updateSettings,\n    updateStatistics: state.updateStatistics,\n  }));\n\n// Subscribe to store changes for analytics\nuseGameStore.subscribe(\n  state => state.statistics,\n  (statistics, previousStatistics) => {\n    // Analytics tracking\n    if (statistics.totalGamesPlayed > previousStatistics.totalGamesPlayed) {\n      // Track game started\n      console.debug('Game started:', statistics.totalGamesPlayed);\n    }\n\n    if (statistics.bestScore > previousStatistics.bestScore) {\n      // Track new high score\n      console.debug('New high score:', statistics.bestScore);\n    }\n  },\n);\n\n// Subscribe to achievements for notifications\nuseGameStore.subscribe(\n  state => state.achievements,\n  (achievements, previousAchievements) => {\n    const newAchievements = achievements.filter(\n      achievement => !previousAchievements.includes(achievement),\n    );\n\n    for (const achievement of newAchievements) {\n      // Show achievement notification\n      console.debug('Achievement unlocked:', achievement);\n    }\n  },\n);\n","import { Howl, Howler } from 'howler';\nimport type { AudioManager } from '@/types';\n\n/**\n * Audio asset definitions\n */\nconst AUDIO_ASSETS = {\n  jump: {\n    src: ['https://freesound.org/data/previews/135/135936_2434988-lq.mp3'],\n    volume: 0.7,\n    preload: true,\n  },\n  score: {\n    src: ['https://freesound.org/data/previews/270/270319_5123851-lq.mp3'],\n    volume: 0.8,\n    preload: true,\n  },\n  gameOver: {\n    src: ['https://freesound.org/data/previews/219/219244_4082829-lq.mp3'],\n    volume: 0.9,\n    preload: true,\n  },\n  background: {\n    src: ['https://freesound.org/data/previews/396/396740_5218259-lq.mp3'],\n    volume: 0.4,\n    loop: true,\n    preload: true,\n  },\n  powerup: {\n    src: ['https://freesound.org/data/previews/341/341695_5123451-lq.mp3'],\n    volume: 0.6,\n    preload: false,\n  },\n  shield: {\n    src: ['https://freesound.org/data/previews/233/233704_4086654-lq.mp3'],\n    volume: 0.7,\n    preload: false,\n  },\n  explosion: {\n    src: ['https://freesound.org/data/previews/245/245372_4486188-lq.mp3'],\n    volume: 0.8,\n    preload: false,\n  },\n} as const;\n\ntype AudioAssetKey = keyof typeof AUDIO_ASSETS;\n\n/**\n * Enhanced audio manager with modern features\n */\nexport class AudioManagerImpl implements AudioManager {\n  private readonly sounds = new Map<AudioAssetKey, Howl>();\n  private readonly loadingPromises = new Map<AudioAssetKey, Promise<void>>();\n  private masterVolume = 1.0;\n  private sfxVolume = 1.0;\n  private musicVolume = 1.0;\n  private muted = false;\n  private initialized = false;\n\n  constructor() {\n    this.init();\n  }\n\n  /**\n   * Initialize the audio system\n   */\n  private async init(): Promise<void> {\n    try {\n      // Set global Howler settings\n      Howler.volume(this.masterVolume);\n      (Howler as any).html5PoolSize(10);\n\n      // Preload essential sounds\n      await this.preloadEssentialSounds();\n\n      this.initialized = true;\n      // eslint-disable-next-line no-console\n      console.debug('Audio system initialized');\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.warn('Failed to initialize audio system:', error);\n    }\n  }\n\n  /**\n   * Preload essential sounds for better UX\n   */\n  private async preloadEssentialSounds(): Promise<void> {\n    const preloadPromises = Object.entries(AUDIO_ASSETS)\n      .filter(([, config]) => config.preload)\n      .map(([key]) => this.loadSound(key as AudioAssetKey));\n\n    await Promise.allSettled(preloadPromises);\n  }\n\n  /**\n   * Load a sound with error handling and caching\n   */\n  private async loadSound(key: AudioAssetKey): Promise<void> {\n    // Return existing loading promise if already loading\n    if (this.loadingPromises.has(key)) {\n      return this.loadingPromises.get(key)!;\n    }\n\n    // Return immediately if already loaded\n    if (this.sounds.has(key)) {\n      return Promise.resolve();\n    }\n\n    const config = AUDIO_ASSETS[key];\n\n    const loadingPromise = new Promise<void>(resolve => {\n      const sound = new Howl({\n        ...(config as any),\n        onload: () => {\n          this.sounds.set(key, sound);\n          this.loadingPromises.delete(key);\n          resolve();\n        },\n        onloaderror: () => {\n          // eslint-disable-next-line no-console\n          console.warn(`Failed to load audio: ${key}`);\n          this.loadingPromises.delete(key);\n          // Don't reject, just resolve to prevent breaking the game\n          resolve();\n        },\n        onplayerror: () => {\n          // eslint-disable-next-line no-console\n          console.warn(`Failed to play audio: ${key}`);\n        },\n      });\n    });\n\n    this.loadingPromises.set(key, loadingPromise);\n    return loadingPromise;\n  }\n\n  /**\n   * Play a sound with volume control\n   */\n  private async playSound(\n    key: AudioAssetKey,\n    volume?: number,\n    options?: { rate?: number; loop?: boolean },\n  ): Promise<void> {\n    if (this.muted) return;\n\n    try {\n      await this.loadSound(key);\n      const sound = this.sounds.get(key);\n      if (!sound) return;\n\n      const config = AUDIO_ASSETS[key];\n      const isMusicTrack = key === 'background';\n      const volumeMultiplier = isMusicTrack ? this.musicVolume : this.sfxVolume;\n      const finalVolume =\n        (volume ?? config.volume) * volumeMultiplier * this.masterVolume;\n\n      sound.volume(Math.max(0, Math.min(1, finalVolume)));\n\n      if (options?.rate) sound.rate(options.rate);\n      if (options?.loop !== undefined) sound.loop(options.loop);\n\n      sound.play();\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.warn(`Failed to play sound: ${key}`, error);\n    }\n  }\n\n  /**\n   * Stop a specific sound\n   */\n  private stopSound(key: AudioAssetKey): void {\n    const sound = this.sounds.get(key);\n    if (sound) {\n      sound.stop();\n    }\n  }\n\n  // Public AudioManager interface implementation\n  public async playJump(): Promise<void> {\n    await this.playSound('jump');\n  }\n\n  public async playScore(): Promise<void> {\n    await this.playSound('score');\n  }\n\n  public async playGameOver(): Promise<void> {\n    await this.playSound('gameOver');\n  }\n\n  public async playBackgroundMusic(): Promise<void> {\n    await this.playSound('background');\n  }\n\n  public stopBackgroundMusic(): void {\n    this.stopSound('background');\n  }\n\n  // Extended functionality\n  public async playPowerup(): Promise<void> {\n    await this.playSound('powerup');\n  }\n\n  public async playShield(): Promise<void> {\n    await this.playSound('shield');\n  }\n\n  public async playExplosion(): Promise<void> {\n    await this.playSound('explosion');\n  }\n\n  /**\n   * Set master volume (0.0 - 1.0)\n   */\n  public setVolume(volume: number): void {\n    this.masterVolume = Math.max(0, Math.min(1, volume));\n    Howler.volume(this.masterVolume);\n  }\n\n  /**\n   * Set SFX volume (0.0 - 1.0)\n   */\n  public setSfxVolume(volume: number): void {\n    this.sfxVolume = Math.max(0, Math.min(1, volume));\n  }\n\n  /**\n   * Set music volume (0.0 - 1.0)\n   */\n  public setMusicVolume(volume: number): void {\n    this.musicVolume = Math.max(0, Math.min(1, volume));\n\n    // Update background music volume if playing\n    const bgMusic = this.sounds.get('background');\n    if (bgMusic) {\n      const config = AUDIO_ASSETS.background;\n      bgMusic.volume(config.volume * this.musicVolume * this.masterVolume);\n    }\n  }\n\n  /**\n   * Mute all audio\n   */\n  public mute(): void {\n    this.muted = true;\n    Howler.mute(true);\n  }\n\n  /**\n   * Unmute all audio\n   */\n  public unmute(): void {\n    this.muted = false;\n    Howler.mute(false);\n  }\n\n  /**\n   * Toggle mute state\n   */\n  public toggleMute(): boolean {\n    if (this.muted) {\n      this.unmute();\n    } else {\n      this.mute();\n    }\n    return this.muted;\n  }\n\n  /**\n   * Pause all sounds\n   */\n  public pauseAll(): void {\n    for (const sound of this.sounds.values()) {\n      sound.pause();\n    }\n  }\n\n  /**\n   * Resume all sounds\n   */\n  public resumeAll(): void {\n    for (const sound of this.sounds.values()) {\n      if (sound.playing()) {\n        sound.play();\n      }\n    }\n  }\n\n  /**\n   * Stop all sounds\n   */\n  public stopAll(): void {\n    for (const sound of this.sounds.values()) {\n      sound.stop();\n    }\n  }\n\n  /**\n   * Get audio system statistics\n   */\n  public getStats(): {\n    initialized: boolean;\n    soundsLoaded: number;\n    soundsLoading: number;\n    masterVolume: number;\n    sfxVolume: number;\n    musicVolume: number;\n    muted: boolean;\n  } {\n    return {\n      initialized: this.initialized,\n      soundsLoaded: this.sounds.size,\n      soundsLoading: this.loadingPromises.size,\n      masterVolume: this.masterVolume,\n      sfxVolume: this.sfxVolume,\n      musicVolume: this.musicVolume,\n      muted: this.muted,\n    };\n  }\n\n  /**\n   * Preload all sounds for offline play\n   */\n  public async preloadAll(): Promise<void> {\n    const allKeys = Object.keys(AUDIO_ASSETS) as AudioAssetKey[];\n    await Promise.allSettled(allKeys.map(key => this.loadSound(key)));\n  }\n\n  /**\n   * Clear audio cache\n   */\n  public clearCache(): void {\n    this.stopAll();\n    for (const sound of this.sounds.values()) {\n      sound.unload();\n    }\n    this.sounds.clear();\n    this.loadingPromises.clear();\n  }\n}\n\n// Global audio manager instance\nexport const audioManager = new AudioManagerImpl();\n\n// Legacy API compatibility\nexport function playJumpSound(): void {\n  // eslint-disable-next-line no-console\n  audioManager.playJump().catch(console.warn);\n}\n\nexport function playScoreSound(): void {\n  // eslint-disable-next-line no-console\n  audioManager.playScore().catch(console.warn);\n}\n\nexport function playGameOverSound(): void {\n  // eslint-disable-next-line no-console\n  audioManager.playGameOver().catch(console.warn);\n}\n\nexport function playBackgroundMusic(): void {\n  // eslint-disable-next-line no-console\n  audioManager.playBackgroundMusic().catch(console.warn);\n}\n\nexport function stopBackgroundMusic(): void {\n  audioManager.stopBackgroundMusic();\n}\n\n/**\n * Audio context for spatial audio and advanced effects\n */\nexport class SpatialAudioManager {\n  private audioContext: AudioContext | null = null;\n  private gainNode: GainNode | null = null;\n  private compressor: DynamicsCompressorNode | null = null;\n\n  constructor() {\n    this.initializeAudioContext();\n  }\n\n  private async initializeAudioContext(): Promise<void> {\n    try {\n      this.audioContext = new (window.AudioContext ||\n        (window as any).webkitAudioContext)();\n      this.gainNode = this.audioContext.createGain();\n      this.compressor = this.audioContext.createDynamicsCompressor();\n\n      // Create audio processing chain\n      this.gainNode.connect(this.compressor);\n      this.compressor.connect(this.audioContext.destination);\n\n      // Configure compressor for game audio\n      this.compressor.threshold.value = -50;\n      this.compressor.knee.value = 30;\n      this.compressor.ratio.value = 12;\n      this.compressor.attack.value = 0.003;\n      this.compressor.release.value = 0.25;\n\n      // eslint-disable-next-line no-console\n      console.debug('Spatial audio initialized');\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.warn('Failed to initialize spatial audio:', error);\n    }\n  }\n\n  /**\n   * Play sound with 3D positioning\n   */\n  public async playSpatialSound(\n    audioBuffer: AudioBuffer,\n    x: number,\n    y: number,\n    z: number = 0,\n  ): Promise<void> {\n    if (!this.audioContext || !this.gainNode) return;\n\n    const source = this.audioContext.createBufferSource();\n    const panner = this.audioContext.createPanner();\n\n    source.buffer = audioBuffer;\n    panner.panningModel = 'HRTF';\n    panner.distanceModel = 'inverse';\n    panner.setPosition(x, y, z);\n\n    source.connect(panner);\n    panner.connect(this.gainNode);\n\n    source.start(0);\n  }\n\n  public getAudioContext(): AudioContext | null {\n    return this.audioContext;\n  }\n}\n","import type { Particle as IParticle } from '@/types';\nimport { randomBetween, randomIntBetween } from '@/utils';\n\nclass ParticleImpl implements IParticle {\n  public x: number;\n  public y: number;\n  public readonly size: number;\n  public readonly speedX: number;\n  public readonly speedY: number;\n  public readonly color: string;\n  public ttl: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n    this.size = randomBetween(2, 7);\n    this.speedX = randomBetween(-6, 6);\n    this.speedY = randomBetween(-6, 6);\n    this.color = `hsl(${randomIntBetween(0, 60)}, 100%, 50%)`; // Red-orange-yellow palette\n    this.ttl = randomIntBetween(50, 150); // Time to live\n  }\n\n  public update(): void {\n    this.x += this.speedX;\n    this.y += this.speedY;\n    this.ttl--;\n  }\n\n  public draw(ctx: CanvasRenderingContext2D): void {\n    // Fade out effect based on remaining ttl\n    const alpha = Math.max(0, this.ttl / 150);\n\n    ctx.save();\n    ctx.globalAlpha = alpha;\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.restore();\n  }\n\n  public reset(x: number, y: number): void {\n    this.x = x;\n    this.y = y;\n    this.ttl = randomIntBetween(50, 150);\n  }\n\n  public get isAlive(): boolean {\n    return this.ttl > 0;\n  }\n}\n\n/**\n * Particle pool for better performance\n */\nclass ParticlePool {\n  private readonly pool: ParticleImpl[] = [];\n  private readonly activeParticles: ParticleImpl[] = [];\n  private readonly maxPoolSize = 200;\n\n  public create(x: number, y: number): void {\n    let particle: ParticleImpl;\n\n    // Reuse particle from pool if available\n    if (this.pool.length > 0) {\n      particle = this.pool.pop()!;\n      particle.reset(x, y);\n    } else {\n      particle = new ParticleImpl(x, y);\n    }\n\n    this.activeParticles.push(particle);\n  }\n\n  public update(): void {\n    for (let i = this.activeParticles.length - 1; i >= 0; i--) {\n      const particle = this.activeParticles[i]!;\n      particle.update();\n\n      if (!particle.isAlive) {\n        // Return particle to pool\n        this.activeParticles.splice(i, 1);\n\n        if (this.pool.length < this.maxPoolSize) {\n          this.pool.push(particle);\n        }\n      }\n    }\n  }\n\n  public draw(ctx: CanvasRenderingContext2D): void {\n    for (const particle of this.activeParticles) {\n      particle.draw(ctx);\n    }\n  }\n\n  public clear(): void {\n    // Return all active particles to pool\n    for (const particle of this.activeParticles) {\n      if (this.pool.length < this.maxPoolSize) {\n        this.pool.push(particle);\n      }\n    }\n    this.activeParticles.length = 0;\n  }\n\n  public get count(): number {\n    return this.activeParticles.length;\n  }\n\n  public getStats(): { active: number; pooled: number } {\n    return {\n      active: this.activeParticles.length,\n      pooled: this.pool.length,\n    };\n  }\n}\n\n// Global particle system\nconst particlePool = new ParticlePool();\n\n/**\n * Creates an explosion effect at the specified location\n */\nexport function createExplosion(\n  x: number,\n  y: number,\n  particleCount: number = 50,\n): void {\n  for (let i = 0; i < particleCount; i++) {\n    // Add some randomness to the position for better visual effect\n    const offsetX = randomBetween(-10, 10);\n    const offsetY = randomBetween(-10, 10);\n    particlePool.create(x + offsetX, y + offsetY);\n  }\n}\n\n/**\n * Creates a burst effect (smaller explosion)\n */\nexport function createBurst(\n  x: number,\n  y: number,\n  particleCount: number = 15,\n): void {\n  createExplosion(x, y, particleCount);\n}\n\n/**\n * Creates a trail effect\n */\nexport function createTrail(\n  x: number,\n  y: number,\n  particleCount: number = 3,\n): void {\n  createExplosion(x, y, particleCount);\n}\n\n/**\n * Updates all active particles\n */\nexport function updateParticles(): void {\n  particlePool.update();\n}\n\n/**\n * Draws all active particles\n */\nexport function drawParticles(ctx: CanvasRenderingContext2D): void {\n  particlePool.draw(ctx);\n}\n\n/**\n * Clears all particles\n */\nexport function clearParticles(): void {\n  particlePool.clear();\n}\n\n/**\n * Gets particle system statistics\n */\nexport function getParticleStats(): { active: number; pooled: number } {\n  return particlePool.getStats();\n}\n\n/**\n * Enhanced particle system class for advanced effects\n */\nexport class ParticleSystem {\n  private readonly pools = new Map<string, ParticlePool>();\n\n  public createPool(name: string): void {\n    this.pools.set(name, new ParticlePool());\n  }\n\n  public emit(poolName: string, x: number, y: number, count: number = 1): void {\n    const pool = this.pools.get(poolName);\n    if (!pool) {\n      // eslint-disable-next-line no-console\n      console.warn(`Particle pool '${poolName}' not found`);\n      return;\n    }\n\n    for (let i = 0; i < count; i++) {\n      pool.create(x, y);\n    }\n  }\n\n  public update(): void {\n    for (const pool of this.pools.values()) {\n      pool.update();\n    }\n  }\n\n  public draw(ctx: CanvasRenderingContext2D): void {\n    for (const pool of this.pools.values()) {\n      pool.draw(ctx);\n    }\n  }\n\n  public clear(poolName?: string): void {\n    if (poolName) {\n      const pool = this.pools.get(poolName);\n      if (pool) {\n        pool.clear();\n      }\n    } else {\n      for (const pool of this.pools.values()) {\n        pool.clear();\n      }\n    }\n  }\n\n  public getStats(): Record<string, { active: number; pooled: number }> {\n    const stats: Record<string, { active: number; pooled: number }> = {};\n\n    for (const [name, pool] of this.pools.entries()) {\n      stats[name] = pool.getStats();\n    }\n\n    return stats;\n  }\n}\n\n// Legacy exports for backward compatibility\nexport const particles: ParticleImpl[] = [];\n\n// Maintain compatibility with old API while using new pool system\nconst legacyUpdateParticles = (): void => {\n  updateParticles();\n  // Update legacy array for any code that might still reference it\n  particles.length = 0;\n};\n\nconst legacyDrawParticles = (ctx: CanvasRenderingContext2D): void => {\n  drawParticles(ctx);\n};\n\n// Export legacy functions\n// Export legacy functions with different names to avoid conflicts\nexport { legacyUpdateParticles, legacyDrawParticles };\n","import type { GameAssets } from '@/types';\n\n/**\n * Loads an image and returns a promise that resolves with the loaded image\n */\nfunction loadImage(src: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n\n    img.onload = () => resolve(img);\n    img.onerror = error => {\n      // eslint-disable-next-line no-console\n      console.error(`Failed to load image: ${src}`, error);\n      reject(new Error(`Failed to load image: ${src}`));\n    };\n\n    img.src = src;\n  });\n}\n\n/**\n * Asset paths configuration\n */\nconst ASSET_PATHS = {\n  background: './background.png',\n  character: './character.gif',\n  obstacle: './obstacle.png',\n} as const;\n\n/**\n * Loads all game assets in parallel\n */\nexport async function loadGameAssets(): Promise<GameAssets> {\n  try {\n    const [background, character, obstacle] = await Promise.all([\n      loadImage(ASSET_PATHS.background),\n      loadImage(ASSET_PATHS.character),\n      loadImage(ASSET_PATHS.obstacle),\n    ]);\n\n    return { background, character, obstacle };\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error('Failed to load game assets:', error);\n    throw new Error(\n      'Failed to load game assets. Please refresh and try again.',\n    );\n  }\n}\n\n/**\n * Preloads a single asset with progress tracking\n */\nexport function preloadAsset(\n  src: string,\n  onProgress?: (_progress?: number) => void,\n): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n\n    if (onProgress) {\n      img.addEventListener('progress', event => {\n        if (event.lengthComputable && onProgress) {\n          const progressValue = (event.loaded / event.total) * 100;\n          onProgress(progressValue);\n        }\n      });\n    }\n\n    img.onload = () => resolve(img);\n    img.onerror = error => {\n      // eslint-disable-next-line no-console\n      console.error(`Failed to preload asset: ${src}`, error);\n      reject(new Error(`Failed to preload asset: ${src}`));\n    };\n\n    img.src = src;\n  });\n}\n\n/**\n * Creates a fallback/placeholder image if assets fail to load\n */\nexport function createFallbackImage(\n  width: number = 100,\n  height: number = 100,\n  color: string = '#FF6A00',\n): HTMLImageElement {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d')!;\n\n  canvas.width = width;\n  canvas.height = height;\n\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, width, height);\n\n  ctx.fillStyle = '#FFFFFF';\n  ctx.font = '12px Arial';\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.fillText('?', width / 2, height / 2);\n\n  const img = new Image();\n  img.src = canvas.toDataURL();\n\n  return img;\n}\n\n/**\n * Asset manager class for caching and managing loaded assets\n */\nexport class AssetManager {\n  private readonly cache = new Map<string, HTMLImageElement>();\n  private readonly loadingPromises = new Map<\n    string,\n    Promise<HTMLImageElement>\n  >();\n\n  /**\n   * Loads an asset with caching\n   */\n  public async load(src: string): Promise<HTMLImageElement> {\n    // Return cached asset if available\n    if (this.cache.has(src)) {\n      return this.cache.get(src)!;\n    }\n\n    // Return existing loading promise if already loading\n    if (this.loadingPromises.has(src)) {\n      return this.loadingPromises.get(src)!;\n    }\n\n    // Start loading the asset\n    const loadingPromise = loadImage(src);\n    this.loadingPromises.set(src, loadingPromise);\n\n    try {\n      const asset = await loadingPromise;\n      this.cache.set(src, asset);\n      this.loadingPromises.delete(src);\n      return asset;\n    } catch (error) {\n      this.loadingPromises.delete(src);\n      throw error;\n    }\n  }\n\n  /**\n   * Preloads multiple assets\n   */\n  public async preloadAll(\n    sources: readonly string[],\n  ): Promise<HTMLImageElement[]> {\n    return Promise.all(sources.map(src => this.load(src)));\n  }\n\n  /**\n   * Gets a cached asset\n   */\n  public get(src: string): HTMLImageElement | undefined {\n    return this.cache.get(src);\n  }\n\n  /**\n   * Checks if an asset is cached\n   */\n  public has(src: string): boolean {\n    return this.cache.has(src);\n  }\n\n  /**\n   * Clears the asset cache\n   */\n  public clear(): void {\n    this.cache.clear();\n    this.loadingPromises.clear();\n  }\n\n  /**\n   * Gets cache statistics\n   */\n  public getStats(): { cached: number; loading: number } {\n    return {\n      cached: this.cache.size,\n      loading: this.loadingPromises.size,\n    };\n  }\n}\n\n// Global asset manager instance\nexport const assetManager = new AssetManager();\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","/* eslint-disable no-console, no-undef */\nimport { v4 as uuidv4 } from 'uuid';\n\n// Define analytics configuration\nexport interface AnalyticsConfig {\n  gtag?: string;\n  debugMode?: boolean;\n  userConsent?: boolean;\n  sessionTimeout?: number;\n}\n\n// User behavior tracking types\nexport interface GameplayEvent {\n  event:\n    | 'game_start'\n    | 'game_end'\n    | 'question_answered'\n    | 'level_completed'\n    | 'achievement_unlocked';\n  category?: string;\n  difficulty?: string;\n  score?: number;\n  duration?: number;\n  correct?: boolean;\n  questionType?: string;\n}\n\nexport interface UserInteractionEvent {\n  event: 'menu_click' | 'settings_change' | 'theme_change' | 'audio_toggle';\n  element?: string;\n  value?: string | number;\n}\n\nexport interface PerformanceEvent {\n  event: 'performance_metric';\n  metric: 'fps' | 'load_time' | 'render_time' | 'memory_usage';\n  value: number;\n  context?: string;\n}\n\nexport interface UserSessionData {\n  sessionId: string;\n  userId: string;\n  startTime: number;\n  lastActivity: number;\n  totalPlayTime: number;\n  gamesPlayed: number;\n  totalScore: number;\n  averageScore: number;\n  difficultiesPlayed: string[];\n  categoriesPlayed: string[];\n  achievementsUnlocked: string[];\n}\n\nclass AnalyticsService {\n  private config: AnalyticsConfig;\n  private sessionData: UserSessionData;\n  private eventQueue: Array<any> = [];\n  private isInitialized = false;\n  private performanceObserver?: PerformanceObserver;\n\n  constructor() {\n    this.config = this.loadConfig();\n    this.sessionData = this.initializeSession();\n    this.setupPerformanceMonitoring();\n  }\n\n  /**\n   * Initialize analytics with Google Analytics 4\n   */\n  public async initialize(\n    config: Partial<AnalyticsConfig> = {},\n  ): Promise<void> {\n    this.config = { ...this.config, ...config };\n\n    if (!this.config.userConsent) {\n      console.log('Analytics: User consent not granted');\n      return;\n    }\n\n    try {\n      // Load Google Analytics 4\n      if (this.config.gtag && typeof window !== 'undefined') {\n        await this.loadGoogleAnalytics();\n      }\n\n      // Initialize session tracking\n      this.startSession();\n\n      // Process queued events\n      this.processEventQueue();\n\n      this.isInitialized = true;\n      console.log('Analytics: Initialized successfully');\n    } catch (error) {\n      console.error('Analytics: Initialization failed', error);\n    }\n  }\n\n  /**\n   * Track gameplay events\n   */\n  public trackGameplayEvent(event: GameplayEvent): void {\n    const eventData = {\n      ...event,\n      timestamp: Date.now(),\n      sessionId: this.sessionData.sessionId,\n      userId: this.sessionData.userId,\n    };\n\n    // Update session data based on event\n    this.updateSessionData(event);\n\n    // Send to analytics\n    this.sendEvent('gameplay_event', eventData);\n\n    // Log for debugging\n    if (this.config.debugMode) {\n      console.log('Analytics: Gameplay event tracked', eventData);\n    }\n  }\n\n  /**\n   * Track user interaction events\n   */\n  public trackUserInteraction(event: UserInteractionEvent): void {\n    const eventData = {\n      ...event,\n      timestamp: Date.now(),\n      sessionId: this.sessionData.sessionId,\n    };\n\n    this.sendEvent('user_interaction', eventData);\n\n    if (this.config.debugMode) {\n      console.log('Analytics: User interaction tracked', eventData);\n    }\n  }\n\n  /**\n   * Track performance metrics\n   */\n  public trackPerformance(event: PerformanceEvent): void {\n    const eventData = {\n      ...event,\n      timestamp: Date.now(),\n      sessionId: this.sessionData.sessionId,\n    };\n\n    this.sendEvent('performance_metric', eventData);\n\n    if (this.config.debugMode) {\n      console.log('Analytics: Performance metric tracked', eventData);\n    }\n  }\n\n  /**\n   * Track custom events\n   */\n  public trackCustomEvent(\n    eventName: string,\n    properties: Record<string, any> = {},\n  ): void {\n    const eventData = {\n      event: eventName,\n      ...properties,\n      timestamp: Date.now(),\n      sessionId: this.sessionData.sessionId,\n    };\n\n    this.sendEvent('custom_event', eventData);\n  }\n\n  /**\n   * Set user properties\n   */\n  public setUserProperties(properties: Record<string, any>): void {\n    if (typeof gtag !== 'undefined') {\n      gtag('config', this.config.gtag!, {\n        user_properties: properties,\n      });\n    }\n  }\n\n  /**\n   * Track page views\n   */\n  public trackPageView(page: string, title?: string): void {\n    if (typeof gtag !== 'undefined') {\n      gtag('config', this.config.gtag!, {\n        page_title: title || page,\n        page_location: window.location.href,\n      });\n    }\n  }\n\n  /**\n   * Get current session data\n   */\n  public getSessionData(): UserSessionData {\n    return { ...this.sessionData };\n  }\n\n  /**\n   * Get user engagement metrics\n   */\n  public getEngagementMetrics(): {\n    sessionDuration: number;\n    averageSessionDuration: number;\n    totalSessions: number;\n    bounceRate: number;\n  } {\n    const sessionDuration = Date.now() - this.sessionData.startTime;\n    const totalSessions = parseInt(\n      localStorage.getItem('analytics_total_sessions') || '1',\n    );\n    const totalSessionTime =\n      parseInt(localStorage.getItem('analytics_total_session_time') || '0') +\n      sessionDuration;\n    const averageSessionDuration = totalSessionTime / totalSessions;\n\n    // Calculate bounce rate (sessions with < 30 seconds engagement)\n    const shortSessions = parseInt(\n      localStorage.getItem('analytics_short_sessions') || '0',\n    );\n    const bounceRate = (shortSessions / totalSessions) * 100;\n\n    return {\n      sessionDuration,\n      averageSessionDuration,\n      totalSessions,\n      bounceRate,\n    };\n  }\n\n  /**\n   * Export analytics data for analysis\n   */\n  public exportAnalyticsData(): string {\n    const data = {\n      sessionData: this.sessionData,\n      config: this.config,\n      engagementMetrics: this.getEngagementMetrics(),\n      timestamp: Date.now(),\n    };\n\n    return JSON.stringify(data, null, 2);\n  }\n\n  /**\n   * Clear analytics data (GDPR compliance)\n   */\n  public clearAnalyticsData(): void {\n    // Clear localStorage\n    const analyticsKeys = Object.keys(localStorage).filter(key =>\n      key.startsWith('analytics_'),\n    );\n    analyticsKeys.forEach(key => localStorage.removeItem(key));\n\n    // Reset session\n    this.sessionData = this.initializeSession();\n\n    // Clear event queue\n    this.eventQueue = [];\n\n    console.log('Analytics: All data cleared');\n  }\n\n  /**\n   * Update user consent\n   */\n  public updateConsent(consent: boolean): void {\n    this.config.userConsent = consent;\n    localStorage.setItem('analytics_consent', consent.toString());\n\n    if (consent && !this.isInitialized) {\n      this.initialize();\n    } else if (!consent) {\n      this.clearAnalyticsData();\n    }\n  }\n\n  // Private methods\n\n  private loadConfig(): AnalyticsConfig {\n    return {\n      gtag: process.env.VITE_GTAG_ID,\n      debugMode: process.env.NODE_ENV === 'development',\n      userConsent: localStorage.getItem('analytics_consent') === 'true',\n      sessionTimeout: 30 * 60 * 1000, // 30 minutes\n    };\n  }\n\n  private initializeSession(): UserSessionData {\n    const existingSession = localStorage.getItem('analytics_session');\n\n    if (existingSession) {\n      const session = JSON.parse(existingSession);\n      // Check if session is still valid\n      if (\n        Date.now() - session.lastActivity <\n        (this.config.sessionTimeout || 30 * 60 * 1000)\n      ) {\n        session.lastActivity = Date.now();\n        return session;\n      }\n    }\n\n    // Create new session\n    const newSession: UserSessionData = {\n      sessionId: uuidv4(),\n      userId: localStorage.getItem('analytics_user_id') || uuidv4(),\n      startTime: Date.now(),\n      lastActivity: Date.now(),\n      totalPlayTime: 0,\n      gamesPlayed: 0,\n      totalScore: 0,\n      averageScore: 0,\n      difficultiesPlayed: [],\n      categoriesPlayed: [],\n      achievementsUnlocked: [],\n    };\n\n    // Store user ID permanently\n    localStorage.setItem('analytics_user_id', newSession.userId);\n\n    return newSession;\n  }\n\n  private startSession(): void {\n    // Track session start\n    this.trackCustomEvent('session_start', {\n      user_id: this.sessionData.userId,\n      session_id: this.sessionData.sessionId,\n    });\n\n    // Set up periodic session updates\n    setInterval(() => {\n      this.updateSession();\n    }, 30000); // Update every 30 seconds\n\n    // Handle page unload\n    window.addEventListener('beforeunload', () => {\n      this.endSession();\n    });\n  }\n\n  private updateSession(): void {\n    this.sessionData.lastActivity = Date.now();\n    this.saveSession();\n  }\n\n  private endSession(): void {\n    const sessionDuration = Date.now() - this.sessionData.startTime;\n\n    // Update total statistics\n    const totalSessions =\n      parseInt(localStorage.getItem('analytics_total_sessions') || '0') + 1;\n    const totalSessionTime =\n      parseInt(localStorage.getItem('analytics_total_session_time') || '0') +\n      sessionDuration;\n\n    localStorage.setItem('analytics_total_sessions', totalSessions.toString());\n    localStorage.setItem(\n      'analytics_total_session_time',\n      totalSessionTime.toString(),\n    );\n\n    // Check if it was a short session (bounce)\n    if (sessionDuration < 30000) {\n      const shortSessions =\n        parseInt(localStorage.getItem('analytics_short_sessions') || '0') + 1;\n      localStorage.setItem(\n        'analytics_short_sessions',\n        shortSessions.toString(),\n      );\n    }\n\n    // Track session end\n    this.trackCustomEvent('session_end', {\n      session_duration: sessionDuration,\n      games_played: this.sessionData.gamesPlayed,\n      total_score: this.sessionData.totalScore,\n    });\n  }\n\n  private saveSession(): void {\n    localStorage.setItem('analytics_session', JSON.stringify(this.sessionData));\n  }\n\n  private updateSessionData(event: GameplayEvent): void {\n    switch (event.event) {\n      case 'game_start':\n        this.sessionData.gamesPlayed++;\n        if (\n          event.category &&\n          !this.sessionData.categoriesPlayed.includes(event.category)\n        ) {\n          this.sessionData.categoriesPlayed.push(event.category);\n        }\n        if (\n          event.difficulty &&\n          !this.sessionData.difficultiesPlayed.includes(event.difficulty)\n        ) {\n          this.sessionData.difficultiesPlayed.push(event.difficulty);\n        }\n        break;\n\n      case 'game_end':\n        if (event.score) {\n          this.sessionData.totalScore += event.score;\n          this.sessionData.averageScore =\n            this.sessionData.totalScore / this.sessionData.gamesPlayed;\n        }\n        if (event.duration) {\n          this.sessionData.totalPlayTime += event.duration;\n        }\n        break;\n\n      case 'achievement_unlocked':\n        if (\n          event.category &&\n          !this.sessionData.achievementsUnlocked.includes(event.category)\n        ) {\n          this.sessionData.achievementsUnlocked.push(event.category);\n        }\n        break;\n    }\n\n    this.saveSession();\n  }\n\n  private async loadGoogleAnalytics(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (typeof gtag !== 'undefined') {\n        resolve();\n        return;\n      }\n\n      try {\n        // Load gtag script\n        const script = document.createElement('script');\n        script.async = true;\n        script.src = `https://www.googletagmanager.com/gtag/js?id=${this.config.gtag}`;\n        document.head.appendChild(script);\n\n        // Initialize gtag\n        script.onload = () => {\n          (window as any).dataLayer = (window as any).dataLayer || [];\n          (window as any).gtag = function () {\n            (window as any).dataLayer.push(arguments);\n          };\n\n          gtag('js', new Date());\n          gtag('config', this.config.gtag!, {\n            cookie_flags: 'SameSite=None;Secure',\n            anonymize_ip: true,\n          });\n\n          resolve();\n        };\n\n        script.onerror = reject;\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  private sendEvent(eventType: string, eventData: any): void {\n    if (!this.isInitialized) {\n      // Queue events if not initialized\n      this.eventQueue.push({ eventType, eventData });\n      return;\n    }\n\n    if (typeof gtag !== 'undefined') {\n      gtag('event', eventType, eventData);\n    }\n\n    // Also send to local storage for offline analysis\n    this.storeEventLocally(eventType, eventData);\n  }\n\n  private processEventQueue(): void {\n    while (this.eventQueue.length > 0) {\n      const { eventType, eventData } = this.eventQueue.shift()!;\n      this.sendEvent(eventType, eventData);\n    }\n  }\n\n  private storeEventLocally(eventType: string, eventData: any): void {\n    const events = JSON.parse(localStorage.getItem('analytics_events') || '[]');\n    events.push({ eventType, eventData, timestamp: Date.now() });\n\n    // Keep only last 1000 events to prevent storage bloat\n    if (events.length > 1000) {\n      events.splice(0, events.length - 1000);\n    }\n\n    localStorage.setItem('analytics_events', JSON.stringify(events));\n  }\n\n  private setupPerformanceMonitoring(): void {\n    if ('PerformanceObserver' in window) {\n      // Monitor navigation timing\n      this.performanceObserver = new PerformanceObserver(list => {\n        const entries = list.getEntries();\n        entries.forEach(entry => {\n          if (entry.entryType === 'navigation') {\n            const navEntry = entry as PerformanceNavigationTiming;\n            this.trackPerformance({\n              event: 'performance_metric',\n              metric: 'load_time',\n              value: navEntry.loadEventEnd - navEntry.loadEventStart,\n              context: 'navigation',\n            });\n          }\n        });\n      });\n\n      this.performanceObserver.observe({\n        entryTypes: ['navigation', 'resource'],\n      });\n    }\n\n    // Monitor FPS\n    let lastTime = performance.now();\n    let frames = 0;\n\n    const measureFPS = () => {\n      frames++;\n      const currentTime = performance.now();\n\n      if (currentTime >= lastTime + 1000) {\n        const fps = Math.round((frames * 1000) / (currentTime - lastTime));\n        this.trackPerformance({\n          event: 'performance_metric',\n          metric: 'fps',\n          value: fps,\n          context: 'gameplay',\n        });\n\n        frames = 0;\n        lastTime = currentTime;\n      }\n\n      requestAnimationFrame(measureFPS);\n    };\n\n    requestAnimationFrame(measureFPS);\n  }\n}\n\n// Export singleton instance\nexport const analyticsService = new AnalyticsService();\n\n// Global declarations\ndeclare global {\n  // eslint-disable-next-line no-unused-vars\n  function gtag(_command: string, ..._args: any[]): void;\n}\n","const isString = obj => typeof obj === 'string';\nconst defer = () => {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n};\nconst makeString = object => {\n  if (object == null) return '';\n  return '' + object;\n};\nconst copy = (a, s, t) => {\n  a.forEach(m => {\n    if (s[m]) t[m] = s[m];\n  });\n};\nconst lastOfPathSeparatorRegExp = /###/g;\nconst cleanKey = key => key && key.indexOf('###') > -1 ? key.replace(lastOfPathSeparatorRegExp, '.') : key;\nconst canNotTraverseDeeper = object => !object || isString(object);\nconst getLastOfPath = (object, path, Empty) => {\n  const stack = !isString(path) ? path : path.split('.');\n  let stackIndex = 0;\n  while (stackIndex < stack.length - 1) {\n    if (canNotTraverseDeeper(object)) return {};\n    const key = cleanKey(stack[stackIndex]);\n    if (!object[key] && Empty) object[key] = new Empty();\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n    ++stackIndex;\n  }\n  if (canNotTraverseDeeper(object)) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack[stackIndex])\n  };\n};\nconst setPath = (object, path, newValue) => {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  if (obj !== undefined || path.length === 1) {\n    obj[k] = newValue;\n    return;\n  }\n  let e = path[path.length - 1];\n  let p = path.slice(0, path.length - 1);\n  let last = getLastOfPath(object, p, Object);\n  while (last.obj === undefined && p.length) {\n    e = `${p[p.length - 1]}.${e}`;\n    p = p.slice(0, p.length - 1);\n    last = getLastOfPath(object, p, Object);\n    if (last && last.obj && typeof last.obj[`${last.k}.${e}`] !== 'undefined') {\n      last.obj = undefined;\n    }\n  }\n  last.obj[`${last.k}.${e}`] = newValue;\n};\nconst pushPath = (object, path, newValue, concat) => {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  obj[k] = obj[k] || [];\n  obj[k].push(newValue);\n};\nconst getPath = (object, path) => {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path);\n  if (!obj) return undefined;\n  return obj[k];\n};\nconst getPathWithDefaults = (data, defaultData, key) => {\n  const value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  return getPath(defaultData, key);\n};\nconst deepExtend = (target, source, overwrite) => {\n  for (const prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (isString(target[prop]) || target[prop] instanceof String || isString(source[prop]) || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n};\nconst regexEscape = str => str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nconst escape = data => {\n  if (isString(data)) {\n    return data.replace(/[&<>\"'\\/]/g, s => _entityMap[s]);\n  }\n  return data;\n};\nclass RegExpCache {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.regExpMap = new Map();\n    this.regExpQueue = [];\n  }\n  getRegExp(pattern) {\n    const regExpFromCache = this.regExpMap.get(pattern);\n    if (regExpFromCache !== undefined) {\n      return regExpFromCache;\n    }\n    const regExpNew = new RegExp(pattern);\n    if (this.regExpQueue.length === this.capacity) {\n      this.regExpMap.delete(this.regExpQueue.shift());\n    }\n    this.regExpMap.set(pattern, regExpNew);\n    this.regExpQueue.push(pattern);\n    return regExpNew;\n  }\n}\nconst chars = [' ', ',', '?', '!', ';'];\nconst looksLikeObjectPathRegExpCache = new RegExpCache(20);\nconst looksLikeObjectPath = (key, nsSeparator, keySeparator) => {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  const possibleChars = chars.filter(c => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);\n  if (possibleChars.length === 0) return true;\n  const r = looksLikeObjectPathRegExpCache.getRegExp(`(${possibleChars.map(c => c === '?' ? '\\\\?' : c).join('|')})`);\n  let matched = !r.test(key);\n  if (!matched) {\n    const ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n};\nconst deepFind = function (obj, path) {\n  let keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  const tokens = path.split(keySeparator);\n  let current = obj;\n  for (let i = 0; i < tokens.length;) {\n    if (!current || typeof current !== 'object') {\n      return undefined;\n    }\n    let next;\n    let nextPath = '';\n    for (let j = i; j < tokens.length; ++j) {\n      if (j !== i) {\n        nextPath += keySeparator;\n      }\n      nextPath += tokens[j];\n      next = current[nextPath];\n      if (next !== undefined) {\n        if (['string', 'number', 'boolean'].indexOf(typeof next) > -1 && j < tokens.length - 1) {\n          continue;\n        }\n        i += j - i + 1;\n        break;\n      }\n    }\n    current = next;\n  }\n  return current;\n};\nconst getCleanedCode = code => code && code.replace('_', '-');\n\nconst consoleLogger = {\n  type: 'logger',\n  log(args) {\n    this.output('log', args);\n  },\n  warn(args) {\n    this.output('warn', args);\n  },\n  error(args) {\n    this.output('error', args);\n  },\n  output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\nclass Logger {\n  constructor(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.init(concreteLogger, options);\n  }\n  init(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.prefix = options.prefix || 'i18next:';\n    this.logger = concreteLogger || consoleLogger;\n    this.options = options;\n    this.debug = options.debug;\n  }\n  log() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return this.forward(args, 'log', '', true);\n  }\n  warn() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return this.forward(args, 'warn', '', true);\n  }\n  error() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n    return this.forward(args, 'error', '');\n  }\n  deprecate() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n  }\n  forward(args, lvl, prefix, debugOnly) {\n    if (debugOnly && !this.debug) return null;\n    if (isString(args[0])) args[0] = `${prefix}${this.prefix} ${args[0]}`;\n    return this.logger[lvl](args);\n  }\n  create(moduleName) {\n    return new Logger(this.logger, {\n      ...{\n        prefix: `${this.prefix}:${moduleName}:`\n      },\n      ...this.options\n    });\n  }\n  clone(options) {\n    options = options || this.options;\n    options.prefix = options.prefix || this.prefix;\n    return new Logger(this.logger, options);\n  }\n}\nvar baseLogger = new Logger();\n\nclass EventEmitter {\n  constructor() {\n    this.observers = {};\n  }\n  on(events, listener) {\n    events.split(' ').forEach(event => {\n      if (!this.observers[event]) this.observers[event] = new Map();\n      const numListeners = this.observers[event].get(listener) || 0;\n      this.observers[event].set(listener, numListeners + 1);\n    });\n    return this;\n  }\n  off(event, listener) {\n    if (!this.observers[event]) return;\n    if (!listener) {\n      delete this.observers[event];\n      return;\n    }\n    this.observers[event].delete(listener);\n  }\n  emit(event) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (this.observers[event]) {\n      const cloned = Array.from(this.observers[event].entries());\n      cloned.forEach(_ref => {\n        let [observer, numTimesAdded] = _ref;\n        for (let i = 0; i < numTimesAdded; i++) {\n          observer(...args);\n        }\n      });\n    }\n    if (this.observers['*']) {\n      const cloned = Array.from(this.observers['*'].entries());\n      cloned.forEach(_ref2 => {\n        let [observer, numTimesAdded] = _ref2;\n        for (let i = 0; i < numTimesAdded; i++) {\n          observer.apply(observer, [event, ...args]);\n        }\n      });\n    }\n  }\n}\n\nclass ResourceStore extends EventEmitter {\n  constructor(data) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n    super();\n    this.data = data || {};\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    if (this.options.ignoreJSONStructure === undefined) {\n      this.options.ignoreJSONStructure = true;\n    }\n  }\n  addNamespaces(ns) {\n    if (this.options.ns.indexOf(ns) < 0) {\n      this.options.ns.push(ns);\n    }\n  }\n  removeNamespaces(ns) {\n    const index = this.options.ns.indexOf(ns);\n    if (index > -1) {\n      this.options.ns.splice(index, 1);\n    }\n  }\n  getResource(lng, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n    let path;\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n    } else {\n      path = [lng, ns];\n      if (key) {\n        if (Array.isArray(key)) {\n          path.push(...key);\n        } else if (isString(key) && keySeparator) {\n          path.push(...key.split(keySeparator));\n        } else {\n          path.push(key);\n        }\n      }\n    }\n    const result = getPath(this.data, path);\n    if (!result && !ns && !key && lng.indexOf('.') > -1) {\n      lng = path[0];\n      ns = path[1];\n      key = path.slice(2).join('.');\n    }\n    if (result || !ignoreJSONStructure || !isString(key)) return result;\n    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n  }\n  addResource(lng, ns, key, value) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      silent: false\n    };\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let path = [lng, ns];\n    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      value = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    setPath(this.data, path, value);\n    if (!options.silent) this.emit('added', lng, ns, key, value);\n  }\n  addResources(lng, ns, resources) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n      silent: false\n    };\n    for (const m in resources) {\n      if (isString(resources[m]) || Array.isArray(resources[m])) this.addResource(lng, ns, m, resources[m], {\n        silent: true\n      });\n    }\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  addResourceBundle(lng, ns, resources, deep, overwrite) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n      silent: false,\n      skipCopy: false\n    };\n    let path = [lng, ns];\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      deep = resources;\n      resources = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    let pack = getPath(this.data, path) || {};\n    if (!options.skipCopy) resources = JSON.parse(JSON.stringify(resources));\n    if (deep) {\n      deepExtend(pack, resources, overwrite);\n    } else {\n      pack = {\n        ...pack,\n        ...resources\n      };\n    }\n    setPath(this.data, path, pack);\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  removeResourceBundle(lng, ns) {\n    if (this.hasResourceBundle(lng, ns)) {\n      delete this.data[lng][ns];\n    }\n    this.removeNamespaces(ns);\n    this.emit('removed', lng, ns);\n  }\n  hasResourceBundle(lng, ns) {\n    return this.getResource(lng, ns) !== undefined;\n  }\n  getResourceBundle(lng, ns) {\n    if (!ns) ns = this.options.defaultNS;\n    if (this.options.compatibilityAPI === 'v1') return {\n      ...{},\n      ...this.getResource(lng, ns)\n    };\n    return this.getResource(lng, ns);\n  }\n  getDataByLanguage(lng) {\n    return this.data[lng];\n  }\n  hasLanguageSomeTranslations(lng) {\n    const data = this.getDataByLanguage(lng);\n    const n = data && Object.keys(data) || [];\n    return !!n.find(v => data[v] && Object.keys(data[v]).length > 0);\n  }\n  toJSON() {\n    return this.data;\n  }\n}\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle(processors, value, key, options, translator) {\n    processors.forEach(processor => {\n      if (this.processors[processor]) value = this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nconst checkedLoadedFor = {};\nclass Translator extends EventEmitter {\n  constructor(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, this);\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    this.logger = baseLogger.create('translator');\n  }\n  changeLanguage(lng) {\n    if (lng) this.language = lng;\n  }\n  exists(key) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    if (key === undefined || key === null) {\n      return false;\n    }\n    const resolved = this.resolve(key, options);\n    return resolved && resolved.res !== undefined;\n  }\n  extractFromKey(key, options) {\n    let nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n    if (nsSeparator === undefined) nsSeparator = ':';\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let namespaces = options.ns || this.options.defaultNS || [];\n    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n      const m = key.match(this.interpolator.nestingRegexp);\n      if (m && m.length > 0) {\n        return {\n          key,\n          namespaces: isString(namespaces) ? [namespaces] : namespaces\n        };\n      }\n      const parts = key.split(nsSeparator);\n      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n      key = parts.join(keySeparator);\n    }\n    return {\n      key,\n      namespaces: isString(namespaces) ? [namespaces] : namespaces\n    };\n  }\n  translate(keys, options, lastKey) {\n    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {\n      options = this.options.overloadTranslationOptionHandler(arguments);\n    }\n    if (typeof options === 'object') options = {\n      ...options\n    };\n    if (!options) options = {};\n    if (keys === undefined || keys === null) return '';\n    if (!Array.isArray(keys)) keys = [String(keys)];\n    const returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const {\n      key,\n      namespaces\n    } = this.extractFromKey(keys[keys.length - 1], options);\n    const namespace = namespaces[namespaces.length - 1];\n    const lng = options.lng || this.language;\n    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n    if (lng && lng.toLowerCase() === 'cimode') {\n      if (appendNamespaceToCIMode) {\n        const nsSeparator = options.nsSeparator || this.options.nsSeparator;\n        if (returnDetails) {\n          return {\n            res: `${namespace}${nsSeparator}${key}`,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace,\n            usedParams: this.getUsedParamsDetails(options)\n          };\n        }\n        return `${namespace}${nsSeparator}${key}`;\n      }\n      if (returnDetails) {\n        return {\n          res: key,\n          usedKey: key,\n          exactUsedKey: key,\n          usedLng: lng,\n          usedNS: namespace,\n          usedParams: this.getUsedParamsDetails(options)\n        };\n      }\n      return key;\n    }\n    const resolved = this.resolve(keys, options);\n    let res = resolved && resolved.res;\n    const resUsedKey = resolved && resolved.usedKey || key;\n    const resExactUsedKey = resolved && resolved.exactUsedKey || key;\n    const resType = Object.prototype.toString.apply(res);\n    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n    const joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n    const handleAsObject = !isString(res) && typeof res !== 'boolean' && typeof res !== 'number';\n    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(isString(joinArrays) && Array.isArray(res))) {\n      if (!options.returnObjects && !this.options.returnObjects) {\n        if (!this.options.returnedObjectHandler) {\n          this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n        }\n        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {\n          ...options,\n          ns: namespaces\n        }) : `key '${key} (${this.language})' returned an object instead of string.`;\n        if (returnDetails) {\n          resolved.res = r;\n          resolved.usedParams = this.getUsedParamsDetails(options);\n          return resolved;\n        }\n        return r;\n      }\n      if (keySeparator) {\n        const resTypeIsArray = Array.isArray(res);\n        const copy = resTypeIsArray ? [] : {};\n        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n        for (const m in res) {\n          if (Object.prototype.hasOwnProperty.call(res, m)) {\n            const deepKey = `${newKeyToUse}${keySeparator}${m}`;\n            copy[m] = this.translate(deepKey, {\n              ...options,\n              ...{\n                joinArrays: false,\n                ns: namespaces\n              }\n            });\n            if (copy[m] === deepKey) copy[m] = res[m];\n          }\n        }\n        res = copy;\n      }\n    } else if (handleAsObjectInI18nFormat && isString(joinArrays) && Array.isArray(res)) {\n      res = res.join(joinArrays);\n      if (res) res = this.extendTranslation(res, keys, options, lastKey);\n    } else {\n      let usedDefault = false;\n      let usedKey = false;\n      const needsPluralHandling = options.count !== undefined && !isString(options.count);\n      const hasDefaultValue = Translator.hasDefaultValue(options);\n      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {\n        ordinal: false\n      }) : '';\n      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();\n      const defaultValue = needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] || options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;\n      if (!this.isValidLookup(res) && hasDefaultValue) {\n        usedDefault = true;\n        res = defaultValue;\n      }\n      if (!this.isValidLookup(res)) {\n        usedKey = true;\n        res = key;\n      }\n      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n      if (usedKey || usedDefault || updateMissing) {\n        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n        if (keySeparator) {\n          const fk = this.resolve(key, {\n            ...options,\n            keySeparator: false\n          });\n          if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n        }\n        let lngs = [];\n        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n          for (let i = 0; i < fallbackLngs.length; i++) {\n            lngs.push(fallbackLngs[i]);\n          }\n        } else if (this.options.saveMissingTo === 'all') {\n          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n        } else {\n          lngs.push(options.lng || this.language);\n        }\n        const send = (l, k, specificDefaultValue) => {\n          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n          if (this.options.missingKeyHandler) {\n            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n          } else if (this.backendConnector && this.backendConnector.saveMissing) {\n            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n          }\n          this.emit('missingKey', l, namespace, k, res);\n        };\n        if (this.options.saveMissing) {\n          if (this.options.saveMissingPlurals && needsPluralHandling) {\n            lngs.forEach(language => {\n              const suffixes = this.pluralResolver.getSuffixes(language, options);\n              if (needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] && suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0) {\n                suffixes.push(`${this.options.pluralSeparator}zero`);\n              }\n              suffixes.forEach(suffix => {\n                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);\n              });\n            });\n          } else {\n            send(lngs, key, defaultValue);\n          }\n        }\n      }\n      res = this.extendTranslation(res, keys, options, resolved, lastKey);\n      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;\n      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n        if (this.options.compatibilityAPI !== 'v1') {\n          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : undefined);\n        } else {\n          res = this.options.parseMissingKeyHandler(res);\n        }\n      }\n    }\n    if (returnDetails) {\n      resolved.res = res;\n      resolved.usedParams = this.getUsedParamsDetails(options);\n      return resolved;\n    }\n    return res;\n  }\n  extendTranslation(res, key, options, resolved, lastKey) {\n    var _this = this;\n    if (this.i18nFormat && this.i18nFormat.parse) {\n      res = this.i18nFormat.parse(res, {\n        ...this.options.interpolation.defaultVariables,\n        ...options\n      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n        resolved\n      });\n    } else if (!options.skipInterpolation) {\n      if (options.interpolation) this.interpolator.init({\n        ...options,\n        ...{\n          interpolation: {\n            ...this.options.interpolation,\n            ...options.interpolation\n          }\n        }\n      });\n      const skipOnVariables = isString(res) && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n      let nestBef;\n      if (skipOnVariables) {\n        const nb = res.match(this.interpolator.nestingRegexp);\n        nestBef = nb && nb.length;\n      }\n      let data = options.replace && !isString(options.replace) ? options.replace : options;\n      if (this.options.interpolation.defaultVariables) data = {\n        ...this.options.interpolation.defaultVariables,\n        ...data\n      };\n      res = this.interpolator.interpolate(res, data, options.lng || this.language || resolved.usedLng, options);\n      if (skipOnVariables) {\n        const na = res.match(this.interpolator.nestingRegexp);\n        const nestAft = na && na.length;\n        if (nestBef < nestAft) options.nest = false;\n      }\n      if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = this.language || resolved.usedLng;\n      if (options.nest !== false) res = this.interpolator.nest(res, function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        if (lastKey && lastKey[0] === args[0] && !options.context) {\n          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);\n          return null;\n        }\n        return _this.translate(...args, key);\n      }, options);\n      if (options.interpolation) this.interpolator.reset();\n    }\n    const postProcess = options.postProcess || this.options.postProcess;\n    const postProcessorNames = isString(postProcess) ? [postProcess] : postProcess;\n    if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {\n        i18nResolved: {\n          ...resolved,\n          usedParams: this.getUsedParamsDetails(options)\n        },\n        ...options\n      } : options, this);\n    }\n    return res;\n  }\n  resolve(keys) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let found;\n    let usedKey;\n    let exactUsedKey;\n    let usedLng;\n    let usedNS;\n    if (isString(keys)) keys = [keys];\n    keys.forEach(k => {\n      if (this.isValidLookup(found)) return;\n      const extracted = this.extractFromKey(k, options);\n      const key = extracted.key;\n      usedKey = key;\n      let namespaces = extracted.namespaces;\n      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);\n      const needsPluralHandling = options.count !== undefined && !isString(options.count);\n      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();\n      const needsContextHandling = options.context !== undefined && (isString(options.context) || typeof options.context === 'number') && options.context !== '';\n      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);\n      namespaces.forEach(ns => {\n        if (this.isValidLookup(found)) return;\n        usedNS = ns;\n        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {\n          checkedLoadedFor[`${codes[0]}-${ns}`] = true;\n          this.logger.warn(`key \"${usedKey}\" for languages \"${codes.join(', ')}\" won't get resolved as namespace \"${usedNS}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        }\n        codes.forEach(code => {\n          if (this.isValidLookup(found)) return;\n          usedLng = code;\n          const finalKeys = [key];\n          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {\n            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n          } else {\n            let pluralSuffix;\n            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);\n            const zeroSuffix = `${this.options.pluralSeparator}zero`;\n            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;\n            if (needsPluralHandling) {\n              finalKeys.push(key + pluralSuffix);\n              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n              }\n              if (needsZeroSuffixLookup) {\n                finalKeys.push(key + zeroSuffix);\n              }\n            }\n            if (needsContextHandling) {\n              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;\n              finalKeys.push(contextKey);\n              if (needsPluralHandling) {\n                finalKeys.push(contextKey + pluralSuffix);\n                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n                }\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(contextKey + zeroSuffix);\n                }\n              }\n            }\n          }\n          let possibleKey;\n          while (possibleKey = finalKeys.pop()) {\n            if (!this.isValidLookup(found)) {\n              exactUsedKey = possibleKey;\n              found = this.getResource(code, ns, possibleKey, options);\n            }\n          }\n        });\n      });\n    });\n    return {\n      res: found,\n      usedKey,\n      exactUsedKey,\n      usedLng,\n      usedNS\n    };\n  }\n  isValidLookup(res) {\n    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n  }\n  getResource(code, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n    return this.resourceStore.getResource(code, ns, key, options);\n  }\n  getUsedParamsDetails() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const optionsKeys = ['defaultValue', 'ordinal', 'context', 'replace', 'lng', 'lngs', 'fallbackLng', 'ns', 'keySeparator', 'nsSeparator', 'returnObjects', 'returnDetails', 'joinArrays', 'postProcess', 'interpolation'];\n    const useOptionsReplaceForData = options.replace && !isString(options.replace);\n    let data = useOptionsReplaceForData ? options.replace : options;\n    if (useOptionsReplaceForData && typeof options.count !== 'undefined') {\n      data.count = options.count;\n    }\n    if (this.options.interpolation.defaultVariables) {\n      data = {\n        ...this.options.interpolation.defaultVariables,\n        ...data\n      };\n    }\n    if (!useOptionsReplaceForData) {\n      data = {\n        ...data\n      };\n      for (const key of optionsKeys) {\n        delete data[key];\n      }\n    }\n    return data;\n  }\n  static hasDefaultValue(options) {\n    const prefix = 'defaultValue';\n    for (const option in options) {\n      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nconst capitalize = string => string.charAt(0).toUpperCase() + string.slice(1);\nclass LanguageUtil {\n  constructor(options) {\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n  getScriptPartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return null;\n    const p = code.split('-');\n    if (p.length === 2) return null;\n    p.pop();\n    if (p[p.length - 1].toLowerCase() === 'x') return null;\n    return this.formatLanguageCode(p.join('-'));\n  }\n  getLanguagePartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return code;\n    const p = code.split('-');\n    return this.formatLanguageCode(p[0]);\n  }\n  formatLanguageCode(code) {\n    if (isString(code) && code.indexOf('-') > -1) {\n      if (typeof Intl !== 'undefined' && typeof Intl.getCanonicalLocales !== 'undefined') {\n        try {\n          let formattedCode = Intl.getCanonicalLocales(code)[0];\n          if (formattedCode && this.options.lowerCaseLng) {\n            formattedCode = formattedCode.toLowerCase();\n          }\n          if (formattedCode) return formattedCode;\n        } catch (e) {}\n      }\n      const specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n      let p = code.split('-');\n      if (this.options.lowerCaseLng) {\n        p = p.map(part => part.toLowerCase());\n      } else if (p.length === 2) {\n        p[0] = p[0].toLowerCase();\n        p[1] = p[1].toUpperCase();\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n      } else if (p.length === 3) {\n        p[0] = p[0].toLowerCase();\n        if (p[1].length === 2) p[1] = p[1].toUpperCase();\n        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n      }\n      return p.join('-');\n    }\n    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n  }\n  isSupportedCode(code) {\n    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n      code = this.getLanguagePartFromCode(code);\n    }\n    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n  }\n  getBestMatchFromCodes(codes) {\n    if (!codes) return null;\n    let found;\n    codes.forEach(code => {\n      if (found) return;\n      const cleanedLng = this.formatLanguageCode(code);\n      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;\n    });\n    if (!found && this.options.supportedLngs) {\n      codes.forEach(code => {\n        if (found) return;\n        const lngOnly = this.getLanguagePartFromCode(code);\n        if (this.isSupportedCode(lngOnly)) return found = lngOnly;\n        found = this.options.supportedLngs.find(supportedLng => {\n          if (supportedLng === lngOnly) return supportedLng;\n          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n          if (supportedLng.indexOf('-') > 0 && lngOnly.indexOf('-') < 0 && supportedLng.substring(0, supportedLng.indexOf('-')) === lngOnly) return supportedLng;\n          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1) return supportedLng;\n        });\n      });\n    }\n    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n    return found;\n  }\n  getFallbackCodes(fallbacks, code) {\n    if (!fallbacks) return [];\n    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n    if (isString(fallbacks)) fallbacks = [fallbacks];\n    if (Array.isArray(fallbacks)) return fallbacks;\n    if (!code) return fallbacks.default || [];\n    let found = fallbacks[code];\n    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n    if (!found) found = fallbacks[this.formatLanguageCode(code)];\n    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n    if (!found) found = fallbacks.default;\n    return found || [];\n  }\n  toResolveHierarchy(code, fallbackCode) {\n    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n    const codes = [];\n    const addCode = c => {\n      if (!c) return;\n      if (this.isSupportedCode(c)) {\n        codes.push(c);\n      } else {\n        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);\n      }\n    };\n    if (isString(code) && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {\n      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n    } else if (isString(code)) {\n      addCode(this.formatLanguageCode(code));\n    }\n    fallbackCodes.forEach(fc => {\n      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));\n    });\n    return codes;\n  }\n}\n\nlet sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nlet _rulesPluralsTypes = {\n  1: n => Number(n > 1),\n  2: n => Number(n != 1),\n  3: n => 0,\n  4: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),\n  5: n => Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5),\n  6: n => Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2),\n  7: n => Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),\n  8: n => Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3),\n  9: n => Number(n >= 2),\n  10: n => Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4),\n  11: n => Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3),\n  12: n => Number(n % 10 != 1 || n % 100 == 11),\n  13: n => Number(n !== 0),\n  14: n => Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3),\n  15: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),\n  16: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2),\n  17: n => Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1),\n  18: n => Number(n == 0 ? 0 : n == 1 ? 1 : 2),\n  19: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3),\n  20: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2),\n  21: n => Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0),\n  22: n => Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3)\n};\nconst nonIntlVersions = ['v1', 'v2', 'v3'];\nconst intlVersions = ['v4'];\nconst suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\nconst createRules = () => {\n  const rules = {};\n  sets.forEach(set => {\n    set.lngs.forEach(l => {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n};\nclass PluralResolver {\n  constructor(languageUtils) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n    this.rules = createRules();\n    this.pluralRulesCache = {};\n  }\n  addRule(lng, obj) {\n    this.rules[lng] = obj;\n  }\n  clearCache() {\n    this.pluralRulesCache = {};\n  }\n  getRule(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (this.shouldUseIntlApi()) {\n      const cleanedCode = getCleanedCode(code === 'dev' ? 'en' : code);\n      const type = options.ordinal ? 'ordinal' : 'cardinal';\n      const cacheKey = JSON.stringify({\n        cleanedCode,\n        type\n      });\n      if (cacheKey in this.pluralRulesCache) {\n        return this.pluralRulesCache[cacheKey];\n      }\n      let rule;\n      try {\n        rule = new Intl.PluralRules(cleanedCode, {\n          type\n        });\n      } catch (err) {\n        if (!code.match(/-|_/)) return;\n        const lngPart = this.languageUtils.getLanguagePartFromCode(code);\n        rule = this.getRule(lngPart, options);\n      }\n      this.pluralRulesCache[cacheKey] = rule;\n      return rule;\n    }\n    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n  }\n  needsPlural(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const rule = this.getRule(code, options);\n    if (this.shouldUseIntlApi()) {\n      return rule && rule.resolvedOptions().pluralCategories.length > 1;\n    }\n    return rule && rule.numbers.length > 1;\n  }\n  getPluralFormsOfKey(code, key) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return this.getSuffixes(code, options).map(suffix => `${key}${suffix}`);\n  }\n  getSuffixes(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const rule = this.getRule(code, options);\n    if (!rule) {\n      return [];\n    }\n    if (this.shouldUseIntlApi()) {\n      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);\n    }\n    return rule.numbers.map(number => this.getSuffix(code, number, options));\n  }\n  getSuffix(code, count) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const rule = this.getRule(code, options);\n    if (rule) {\n      if (this.shouldUseIntlApi()) {\n        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;\n      }\n      return this.getSuffixRetroCompatible(rule, count);\n    }\n    this.logger.warn(`no plural rule found for: ${code}`);\n    return '';\n  }\n  getSuffixRetroCompatible(rule, count) {\n    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n    let suffix = rule.numbers[idx];\n    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      if (suffix === 2) {\n        suffix = 'plural';\n      } else if (suffix === 1) {\n        suffix = '';\n      }\n    }\n    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();\n    if (this.options.compatibilityJSON === 'v1') {\n      if (suffix === 1) return '';\n      if (typeof suffix === 'number') return `_plural_${suffix.toString()}`;\n      return returnSuffix();\n    } else if (this.options.compatibilityJSON === 'v2') {\n      return returnSuffix();\n    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      return returnSuffix();\n    }\n    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n  }\n  shouldUseIntlApi() {\n    return !nonIntlVersions.includes(this.options.compatibilityJSON);\n  }\n}\n\nconst deepFindWithDefaults = function (data, defaultData, key) {\n  let keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';\n  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  let path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && isString(key)) {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n};\nconst regexSafe = val => val.replace(/\\$/g, '$$$$');\nclass Interpolator {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n    this.format = options.interpolation && options.interpolation.format || (value => value);\n    this.init(options);\n  }\n  init() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!options.interpolation) options.interpolation = {\n      escapeValue: true\n    };\n    const {\n      escape: escape$1,\n      escapeValue,\n      useRawValueToEscape,\n      prefix,\n      prefixEscaped,\n      suffix,\n      suffixEscaped,\n      formatSeparator,\n      unescapeSuffix,\n      unescapePrefix,\n      nestingPrefix,\n      nestingPrefixEscaped,\n      nestingSuffix,\n      nestingSuffixEscaped,\n      nestingOptionsSeparator,\n      maxReplaces,\n      alwaysFormat\n    } = options.interpolation;\n    this.escape = escape$1 !== undefined ? escape$1 : escape;\n    this.escapeValue = escapeValue !== undefined ? escapeValue : true;\n    this.useRawValueToEscape = useRawValueToEscape !== undefined ? useRawValueToEscape : false;\n    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || '{{';\n    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || '}}';\n    this.formatSeparator = formatSeparator || ',';\n    this.unescapePrefix = unescapeSuffix ? '' : unescapePrefix || '-';\n    this.unescapeSuffix = this.unescapePrefix ? '' : unescapeSuffix || '';\n    this.nestingPrefix = nestingPrefix ? regexEscape(nestingPrefix) : nestingPrefixEscaped || regexEscape('$t(');\n    this.nestingSuffix = nestingSuffix ? regexEscape(nestingSuffix) : nestingSuffixEscaped || regexEscape(')');\n    this.nestingOptionsSeparator = nestingOptionsSeparator || ',';\n    this.maxReplaces = maxReplaces || 1000;\n    this.alwaysFormat = alwaysFormat !== undefined ? alwaysFormat : false;\n    this.resetRegExp();\n  }\n  reset() {\n    if (this.options) this.init(this.options);\n  }\n  resetRegExp() {\n    const getOrResetRegExp = (existingRegExp, pattern) => {\n      if (existingRegExp && existingRegExp.source === pattern) {\n        existingRegExp.lastIndex = 0;\n        return existingRegExp;\n      }\n      return new RegExp(pattern, 'g');\n    };\n    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);\n    this.regexpUnescape = getOrResetRegExp(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`);\n    this.nestingRegexp = getOrResetRegExp(this.nestingRegexp, `${this.nestingPrefix}(.+?)${this.nestingSuffix}`);\n  }\n  interpolate(str, data, lng, options) {\n    let match;\n    let value;\n    let replaces;\n    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n    const handleFormat = key => {\n      if (key.indexOf(this.formatSeparator) < 0) {\n        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);\n        return this.alwaysFormat ? this.format(path, undefined, lng, {\n          ...options,\n          ...data,\n          interpolationkey: key\n        }) : path;\n      }\n      const p = key.split(this.formatSeparator);\n      const k = p.shift().trim();\n      const f = p.join(this.formatSeparator).trim();\n      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {\n        ...options,\n        ...data,\n        interpolationkey: k\n      });\n    };\n    this.resetRegExp();\n    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n    const todos = [{\n      regex: this.regexpUnescape,\n      safeValue: val => regexSafe(val)\n    }, {\n      regex: this.regexp,\n      safeValue: val => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)\n    }];\n    todos.forEach(todo => {\n      replaces = 0;\n      while (match = todo.regex.exec(str)) {\n        const matchedVar = match[1].trim();\n        value = handleFormat(matchedVar);\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            const temp = missingInterpolationHandler(str, match, options);\n            value = isString(temp) ? temp : '';\n          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n            value = '';\n          } else if (skipOnVariables) {\n            value = match[0];\n            continue;\n          } else {\n            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);\n            value = '';\n          }\n        } else if (!isString(value) && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n        const safeValue = todo.safeValue(value);\n        str = str.replace(match[0], safeValue);\n        if (skipOnVariables) {\n          todo.regex.lastIndex += value.length;\n          todo.regex.lastIndex -= match[0].length;\n        } else {\n          todo.regex.lastIndex = 0;\n        }\n        replaces++;\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n    });\n    return str;\n  }\n  nest(str, fc) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let match;\n    let value;\n    let clonedOptions;\n    const handleHasOptions = (key, inheritedOptions) => {\n      const sep = this.nestingOptionsSeparator;\n      if (key.indexOf(sep) < 0) return key;\n      const c = key.split(new RegExp(`${sep}[ ]*{`));\n      let optionsString = `{${c[1]}`;\n      key = c[0];\n      optionsString = this.interpolate(optionsString, clonedOptions);\n      const matchedSingleQuotes = optionsString.match(/'/g);\n      const matchedDoubleQuotes = optionsString.match(/\"/g);\n      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n        optionsString = optionsString.replace(/'/g, '\"');\n      }\n      try {\n        clonedOptions = JSON.parse(optionsString);\n        if (inheritedOptions) clonedOptions = {\n          ...inheritedOptions,\n          ...clonedOptions\n        };\n      } catch (e) {\n        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);\n        return `${key}${sep}${optionsString}`;\n      }\n      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1) delete clonedOptions.defaultValue;\n      return key;\n    };\n    while (match = this.nestingRegexp.exec(str)) {\n      let formatters = [];\n      clonedOptions = {\n        ...options\n      };\n      clonedOptions = clonedOptions.replace && !isString(clonedOptions.replace) ? clonedOptions.replace : clonedOptions;\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n      let doReduce = false;\n      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n        const r = match[1].split(this.formatSeparator).map(elem => elem.trim());\n        match[1] = r.shift();\n        formatters = r;\n        doReduce = true;\n      }\n      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n      if (value && match[0] === str && !isString(value)) return value;\n      if (!isString(value)) value = makeString(value);\n      if (!value) {\n        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);\n        value = '';\n      }\n      if (doReduce) {\n        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {\n          ...options,\n          interpolationkey: match[1].trim()\n        }), value.trim());\n      }\n      str = str.replace(match[0], value);\n      this.regexp.lastIndex = 0;\n    }\n    return str;\n  }\n}\n\nconst parseFormatStr = formatStr => {\n  let formatName = formatStr.toLowerCase().trim();\n  const formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    const p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    const optStr = p[1].substring(0, p[1].length - 1);\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      const opts = optStr.split(';');\n      opts.forEach(opt => {\n        if (opt) {\n          const [key, ...rest] = opt.split(':');\n          const val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n          const trimmedKey = key.trim();\n          if (!formatOptions[trimmedKey]) formatOptions[trimmedKey] = val;\n          if (val === 'false') formatOptions[trimmedKey] = false;\n          if (val === 'true') formatOptions[trimmedKey] = true;\n          if (!isNaN(val)) formatOptions[trimmedKey] = parseInt(val, 10);\n        }\n      });\n    }\n  }\n  return {\n    formatName,\n    formatOptions\n  };\n};\nconst createCachedFormatter = fn => {\n  const cache = {};\n  return (val, lng, options) => {\n    let optForCache = options;\n    if (options && options.interpolationkey && options.formatParams && options.formatParams[options.interpolationkey] && options[options.interpolationkey]) {\n      optForCache = {\n        ...optForCache,\n        [options.interpolationkey]: undefined\n      };\n    }\n    const key = lng + JSON.stringify(optForCache);\n    let formatter = cache[key];\n    if (!formatter) {\n      formatter = fn(getCleanedCode(lng), options);\n      cache[key] = formatter;\n    }\n    return formatter(val);\n  };\n};\nclass Formatter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      currency: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt,\n          style: 'currency'\n        });\n        return val => formatter.format(val);\n      }),\n      datetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.DateTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      relativetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.RelativeTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val, opt.range || 'day');\n      }),\n      list: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.ListFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      })\n    };\n    this.init(options);\n  }\n  init(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    this.formatSeparator = options.interpolation.formatSeparator || ',';\n  }\n  add(name, fc) {\n    this.formats[name.toLowerCase().trim()] = fc;\n  }\n  addCached(name, fc) {\n    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n  }\n  format(value, format, lng) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const formats = format.split(this.formatSeparator);\n    if (formats.length > 1 && formats[0].indexOf('(') > 1 && formats[0].indexOf(')') < 0 && formats.find(f => f.indexOf(')') > -1)) {\n      const lastIndex = formats.findIndex(f => f.indexOf(')') > -1);\n      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);\n    }\n    const result = formats.reduce((mem, f) => {\n      const {\n        formatName,\n        formatOptions\n      } = parseFormatStr(f);\n      if (this.formats[formatName]) {\n        let formatted = mem;\n        try {\n          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n          formatted = this.formats[formatName](mem, l, {\n            ...formatOptions,\n            ...options,\n            ...valOptions\n          });\n        } catch (error) {\n          this.logger.warn(error);\n        }\n        return formatted;\n      } else {\n        this.logger.warn(`there was no format function for ${formatName}`);\n      }\n      return mem;\n    }, value);\n    return result;\n  }\n}\n\nconst removePending = (q, name) => {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n};\nclass Connector extends EventEmitter {\n  constructor(backend, store, services) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    super();\n    this.backend = backend;\n    this.store = store;\n    this.services = services;\n    this.languageUtils = services.languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('backendConnector');\n    this.waitingReads = [];\n    this.maxParallelReads = options.maxParallelReads || 10;\n    this.readingCalls = 0;\n    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    this.state = {};\n    this.queue = [];\n    if (this.backend && this.backend.init) {\n      this.backend.init(services, options.backend, options);\n    }\n  }\n  queueLoad(languages, namespaces, options, callback) {\n    const toLoad = {};\n    const pending = {};\n    const toLoadLanguages = {};\n    const toLoadNamespaces = {};\n    languages.forEach(lng => {\n      let hasAllNamespaces = true;\n      namespaces.forEach(ns => {\n        const name = `${lng}|${ns}`;\n        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {\n          this.state[name] = 2;\n        } else if (this.state[name] < 0) ; else if (this.state[name] === 1) {\n          if (pending[name] === undefined) pending[name] = true;\n        } else {\n          this.state[name] = 1;\n          hasAllNamespaces = false;\n          if (pending[name] === undefined) pending[name] = true;\n          if (toLoad[name] === undefined) toLoad[name] = true;\n          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n        }\n      });\n      if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n    });\n    if (Object.keys(toLoad).length || Object.keys(pending).length) {\n      this.queue.push({\n        pending,\n        pendingCount: Object.keys(pending).length,\n        loaded: {},\n        errors: [],\n        callback\n      });\n    }\n    return {\n      toLoad: Object.keys(toLoad),\n      pending: Object.keys(pending),\n      toLoadLanguages: Object.keys(toLoadLanguages),\n      toLoadNamespaces: Object.keys(toLoadNamespaces)\n    };\n  }\n  loaded(name, err, data) {\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    if (err) this.emit('failedLoading', lng, ns, err);\n    if (!err && data) {\n      this.store.addResourceBundle(lng, ns, data, undefined, undefined, {\n        skipCopy: true\n      });\n    }\n    this.state[name] = err ? -1 : 2;\n    if (err && data) this.state[name] = 0;\n    const loaded = {};\n    this.queue.forEach(q => {\n      pushPath(q.loaded, [lng], ns);\n      removePending(q, name);\n      if (err) q.errors.push(err);\n      if (q.pendingCount === 0 && !q.done) {\n        Object.keys(q.loaded).forEach(l => {\n          if (!loaded[l]) loaded[l] = {};\n          const loadedKeys = q.loaded[l];\n          if (loadedKeys.length) {\n            loadedKeys.forEach(n => {\n              if (loaded[l][n] === undefined) loaded[l][n] = true;\n            });\n          }\n        });\n        q.done = true;\n        if (q.errors.length) {\n          q.callback(q.errors);\n        } else {\n          q.callback();\n        }\n      }\n    });\n    this.emit('loaded', loaded);\n    this.queue = this.queue.filter(q => !q.done);\n  }\n  read(lng, ns, fcName) {\n    let tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    let wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n    let callback = arguments.length > 5 ? arguments[5] : undefined;\n    if (!lng.length) return callback(null, {});\n    if (this.readingCalls >= this.maxParallelReads) {\n      this.waitingReads.push({\n        lng,\n        ns,\n        fcName,\n        tried,\n        wait,\n        callback\n      });\n      return;\n    }\n    this.readingCalls++;\n    const resolver = (err, data) => {\n      this.readingCalls--;\n      if (this.waitingReads.length > 0) {\n        const next = this.waitingReads.shift();\n        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n      }\n      if (err && data && tried < this.maxRetries) {\n        setTimeout(() => {\n          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);\n        }, wait);\n        return;\n      }\n      callback(err, data);\n    };\n    const fc = this.backend[fcName].bind(this.backend);\n    if (fc.length === 2) {\n      try {\n        const r = fc(lng, ns);\n        if (r && typeof r.then === 'function') {\n          r.then(data => resolver(null, data)).catch(resolver);\n        } else {\n          resolver(null, r);\n        }\n      } catch (err) {\n        resolver(err);\n      }\n      return;\n    }\n    return fc(lng, ns, resolver);\n  }\n  prepareLoading(languages, namespaces) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let callback = arguments.length > 3 ? arguments[3] : undefined;\n    if (!this.backend) {\n      this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n      return callback && callback();\n    }\n    if (isString(languages)) languages = this.languageUtils.toResolveHierarchy(languages);\n    if (isString(namespaces)) namespaces = [namespaces];\n    const toLoad = this.queueLoad(languages, namespaces, options, callback);\n    if (!toLoad.toLoad.length) {\n      if (!toLoad.pending.length) callback();\n      return null;\n    }\n    toLoad.toLoad.forEach(name => {\n      this.loadOne(name);\n    });\n  }\n  load(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {}, callback);\n  }\n  reload(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {\n      reload: true\n    }, callback);\n  }\n  loadOne(name) {\n    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {\n      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);\n      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);\n      this.loaded(name, err, data);\n    });\n  }\n  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    let clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : () => {};\n    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n      this.logger.warn(`did not save key \"${key}\" as the namespace \"${namespace}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n      return;\n    }\n    if (key === undefined || key === null || key === '') return;\n    if (this.backend && this.backend.create) {\n      const opts = {\n        ...options,\n        isUpdate\n      };\n      const fc = this.backend.create.bind(this.backend);\n      if (fc.length < 6) {\n        try {\n          let r;\n          if (fc.length === 5) {\n            r = fc(languages, namespace, key, fallbackValue, opts);\n          } else {\n            r = fc(languages, namespace, key, fallbackValue);\n          }\n          if (r && typeof r.then === 'function') {\n            r.then(data => clb(null, data)).catch(clb);\n          } else {\n            clb(null, r);\n          }\n        } catch (err) {\n          clb(err);\n        }\n      } else {\n        fc(languages, namespace, key, fallbackValue, clb, opts);\n      }\n    }\n    if (!languages || !languages[0]) return;\n    this.store.addResource(languages[0], namespace, key, fallbackValue);\n  }\n}\n\nconst get = () => ({\n  debug: false,\n  initImmediate: true,\n  ns: ['translation'],\n  defaultNS: ['translation'],\n  fallbackLng: ['dev'],\n  fallbackNS: false,\n  supportedLngs: false,\n  nonExplicitSupportedLngs: false,\n  load: 'all',\n  preload: false,\n  simplifyPluralSuffix: true,\n  keySeparator: '.',\n  nsSeparator: ':',\n  pluralSeparator: '_',\n  contextSeparator: '_',\n  partialBundledLanguages: false,\n  saveMissing: false,\n  updateMissing: false,\n  saveMissingTo: 'fallback',\n  saveMissingPlurals: true,\n  missingKeyHandler: false,\n  missingInterpolationHandler: false,\n  postProcess: false,\n  postProcessPassResolved: false,\n  returnNull: false,\n  returnEmptyString: true,\n  returnObjects: false,\n  joinArrays: false,\n  returnedObjectHandler: false,\n  parseMissingKeyHandler: false,\n  appendNamespaceToMissingKey: false,\n  appendNamespaceToCIMode: false,\n  overloadTranslationOptionHandler: args => {\n    let ret = {};\n    if (typeof args[1] === 'object') ret = args[1];\n    if (isString(args[1])) ret.defaultValue = args[1];\n    if (isString(args[2])) ret.tDescription = args[2];\n    if (typeof args[2] === 'object' || typeof args[3] === 'object') {\n      const options = args[3] || args[2];\n      Object.keys(options).forEach(key => {\n        ret[key] = options[key];\n      });\n    }\n    return ret;\n  },\n  interpolation: {\n    escapeValue: true,\n    format: value => value,\n    prefix: '{{',\n    suffix: '}}',\n    formatSeparator: ',',\n    unescapePrefix: '-',\n    nestingPrefix: '$t(',\n    nestingSuffix: ')',\n    nestingOptionsSeparator: ',',\n    maxReplaces: 1000,\n    skipOnVariables: true\n  }\n});\nconst transformOptions = options => {\n  if (isString(options.ns)) options.ns = [options.ns];\n  if (isString(options.fallbackLng)) options.fallbackLng = [options.fallbackLng];\n  if (isString(options.fallbackNS)) options.fallbackNS = [options.fallbackNS];\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n  return options;\n};\n\nconst noop = () => {};\nconst bindMemberFunctions = inst => {\n  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(mem => {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n};\nclass I18n extends EventEmitter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    super();\n    this.options = transformOptions(options);\n    this.services = {};\n    this.logger = baseLogger;\n    this.modules = {\n      external: []\n    };\n    bindMemberFunctions(this);\n    if (callback && !this.isInitialized && !options.isClone) {\n      if (!this.options.initImmediate) {\n        this.init(options, callback);\n        return this;\n      }\n      setTimeout(() => {\n        this.init(options, callback);\n      }, 0);\n    }\n  }\n  init() {\n    var _this = this;\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    this.isInitializing = true;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n      if (isString(options.ns)) {\n        options.defaultNS = options.ns;\n      } else if (options.ns.indexOf('translation') < 0) {\n        options.defaultNS = options.ns[0];\n      }\n    }\n    const defOpts = get();\n    this.options = {\n      ...defOpts,\n      ...this.options,\n      ...transformOptions(options)\n    };\n    if (this.options.compatibilityAPI !== 'v1') {\n      this.options.interpolation = {\n        ...defOpts.interpolation,\n        ...this.options.interpolation\n      };\n    }\n    if (options.keySeparator !== undefined) {\n      this.options.userDefinedKeySeparator = options.keySeparator;\n    }\n    if (options.nsSeparator !== undefined) {\n      this.options.userDefinedNsSeparator = options.nsSeparator;\n    }\n    const createClassOnDemand = ClassOrObject => {\n      if (!ClassOrObject) return null;\n      if (typeof ClassOrObject === 'function') return new ClassOrObject();\n      return ClassOrObject;\n    };\n    if (!this.options.isClone) {\n      if (this.modules.logger) {\n        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n      } else {\n        baseLogger.init(null, this.options);\n      }\n      let formatter;\n      if (this.modules.formatter) {\n        formatter = this.modules.formatter;\n      } else if (typeof Intl !== 'undefined') {\n        formatter = Formatter;\n      }\n      const lu = new LanguageUtil(this.options);\n      this.store = new ResourceStore(this.options.resources, this.options);\n      const s = this.services;\n      s.logger = baseLogger;\n      s.resourceStore = this.store;\n      s.languageUtils = lu;\n      s.pluralResolver = new PluralResolver(lu, {\n        prepend: this.options.pluralSeparator,\n        compatibilityJSON: this.options.compatibilityJSON,\n        simplifyPluralSuffix: this.options.simplifyPluralSuffix\n      });\n      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n        s.formatter = createClassOnDemand(formatter);\n        s.formatter.init(s, this.options);\n        this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n      }\n      s.interpolator = new Interpolator(this.options);\n      s.utils = {\n        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n      };\n      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n      s.backendConnector.on('*', function (event) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        _this.emit(event, ...args);\n      });\n      if (this.modules.languageDetector) {\n        s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n      }\n      if (this.modules.i18nFormat) {\n        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n        if (s.i18nFormat.init) s.i18nFormat.init(this);\n      }\n      this.translator = new Translator(this.services, this.options);\n      this.translator.on('*', function (event) {\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n        _this.emit(event, ...args);\n      });\n      this.modules.external.forEach(m => {\n        if (m.init) m.init(this);\n      });\n    }\n    this.format = this.options.interpolation.format;\n    if (!callback) callback = noop;\n    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n    }\n    if (!this.services.languageDetector && !this.options.lng) {\n      this.logger.warn('init: no languageDetector is used and no lng is defined');\n    }\n    const storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n    storeApi.forEach(fcName => {\n      this[fcName] = function () {\n        return _this.store[fcName](...arguments);\n      };\n    });\n    const storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n    storeApiChained.forEach(fcName => {\n      this[fcName] = function () {\n        _this.store[fcName](...arguments);\n        return _this;\n      };\n    });\n    const deferred = defer();\n    const load = () => {\n      const finish = (err, t) => {\n        this.isInitializing = false;\n        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');\n        this.isInitialized = true;\n        if (!this.options.isClone) this.logger.log('initialized', this.options);\n        this.emit('initialized', this.options);\n        deferred.resolve(t);\n        callback(err, t);\n      };\n      if (this.languages && this.options.compatibilityAPI !== 'v1' && !this.isInitialized) return finish(null, this.t.bind(this));\n      this.changeLanguage(this.options.lng, finish);\n    };\n    if (this.options.resources || !this.options.initImmediate) {\n      load();\n    } else {\n      setTimeout(load, 0);\n    }\n    return deferred;\n  }\n  loadResources(language) {\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    let usedCallback = callback;\n    const usedLng = isString(language) ? language : this.language;\n    if (typeof language === 'function') usedCallback = language;\n    if (!this.options.resources || this.options.partialBundledLanguages) {\n      if (usedLng && usedLng.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();\n      const toLoad = [];\n      const append = lng => {\n        if (!lng) return;\n        if (lng === 'cimode') return;\n        const lngs = this.services.languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(l => {\n          if (l === 'cimode') return;\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n      if (!usedLng) {\n        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        fallbacks.forEach(l => append(l));\n      } else {\n        append(usedLng);\n      }\n      if (this.options.preload) {\n        this.options.preload.forEach(l => append(l));\n      }\n      this.services.backendConnector.load(toLoad, this.options.ns, e => {\n        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);\n        usedCallback(e);\n      });\n    } else {\n      usedCallback(null);\n    }\n  }\n  reloadResources(lngs, ns, callback) {\n    const deferred = defer();\n    if (typeof lngs === 'function') {\n      callback = lngs;\n      lngs = undefined;\n    }\n    if (typeof ns === 'function') {\n      callback = ns;\n      ns = undefined;\n    }\n    if (!lngs) lngs = this.languages;\n    if (!ns) ns = this.options.ns;\n    if (!callback) callback = noop;\n    this.services.backendConnector.reload(lngs, ns, err => {\n      deferred.resolve();\n      callback(err);\n    });\n    return deferred;\n  }\n  use(module) {\n    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n    if (module.type === 'backend') {\n      this.modules.backend = module;\n    }\n    if (module.type === 'logger' || module.log && module.warn && module.error) {\n      this.modules.logger = module;\n    }\n    if (module.type === 'languageDetector') {\n      this.modules.languageDetector = module;\n    }\n    if (module.type === 'i18nFormat') {\n      this.modules.i18nFormat = module;\n    }\n    if (module.type === 'postProcessor') {\n      postProcessor.addPostProcessor(module);\n    }\n    if (module.type === 'formatter') {\n      this.modules.formatter = module;\n    }\n    if (module.type === '3rdParty') {\n      this.modules.external.push(module);\n    }\n    return this;\n  }\n  setResolvedLanguage(l) {\n    if (!l || !this.languages) return;\n    if (['cimode', 'dev'].indexOf(l) > -1) return;\n    for (let li = 0; li < this.languages.length; li++) {\n      const lngInLngs = this.languages[li];\n      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n        this.resolvedLanguage = lngInLngs;\n        break;\n      }\n    }\n  }\n  changeLanguage(lng, callback) {\n    var _this2 = this;\n    this.isLanguageChangingTo = lng;\n    const deferred = defer();\n    this.emit('languageChanging', lng);\n    const setLngProps = l => {\n      this.language = l;\n      this.languages = this.services.languageUtils.toResolveHierarchy(l);\n      this.resolvedLanguage = undefined;\n      this.setResolvedLanguage(l);\n    };\n    const done = (err, l) => {\n      if (l) {\n        setLngProps(l);\n        this.translator.changeLanguage(l);\n        this.isLanguageChangingTo = undefined;\n        this.emit('languageChanged', l);\n        this.logger.log('languageChanged', l);\n      } else {\n        this.isLanguageChangingTo = undefined;\n      }\n      deferred.resolve(function () {\n        return _this2.t(...arguments);\n      });\n      if (callback) callback(err, function () {\n        return _this2.t(...arguments);\n      });\n    };\n    const setLng = lngs => {\n      if (!lng && !lngs && this.services.languageDetector) lngs = [];\n      const l = isString(lngs) ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);\n      if (l) {\n        if (!this.language) {\n          setLngProps(l);\n        }\n        if (!this.translator.language) this.translator.changeLanguage(l);\n        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage) this.services.languageDetector.cacheUserLanguage(l);\n      }\n      this.loadResources(l, err => {\n        done(err, l);\n      });\n    };\n    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n      setLng(this.services.languageDetector.detect());\n    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n      if (this.services.languageDetector.detect.length === 0) {\n        this.services.languageDetector.detect().then(setLng);\n      } else {\n        this.services.languageDetector.detect(setLng);\n      }\n    } else {\n      setLng(lng);\n    }\n    return deferred;\n  }\n  getFixedT(lng, ns, keyPrefix) {\n    var _this3 = this;\n    const fixedT = function (key, opts) {\n      let options;\n      if (typeof opts !== 'object') {\n        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n          rest[_key3 - 2] = arguments[_key3];\n        }\n        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n      } else {\n        options = {\n          ...opts\n        };\n      }\n      options.lng = options.lng || fixedT.lng;\n      options.lngs = options.lngs || fixedT.lngs;\n      options.ns = options.ns || fixedT.ns;\n      if (options.keyPrefix !== '') options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n      const keySeparator = _this3.options.keySeparator || '.';\n      let resultKey;\n      if (options.keyPrefix && Array.isArray(key)) {\n        resultKey = key.map(k => `${options.keyPrefix}${keySeparator}${k}`);\n      } else {\n        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;\n      }\n      return _this3.t(resultKey, options);\n    };\n    if (isString(lng)) {\n      fixedT.lng = lng;\n    } else {\n      fixedT.lngs = lng;\n    }\n    fixedT.ns = ns;\n    fixedT.keyPrefix = keyPrefix;\n    return fixedT;\n  }\n  t() {\n    return this.translator && this.translator.translate(...arguments);\n  }\n  exists() {\n    return this.translator && this.translator.exists(...arguments);\n  }\n  setDefaultNamespace(ns) {\n    this.options.defaultNS = ns;\n  }\n  hasLoadedNamespace(ns) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (!this.isInitialized) {\n      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n      return false;\n    }\n    if (!this.languages || !this.languages.length) {\n      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n      return false;\n    }\n    const lng = options.lng || this.resolvedLanguage || this.languages[0];\n    const fallbackLng = this.options ? this.options.fallbackLng : false;\n    const lastLng = this.languages[this.languages.length - 1];\n    if (lng.toLowerCase() === 'cimode') return true;\n    const loadNotPending = (l, n) => {\n      const loadState = this.services.backendConnector.state[`${l}|${n}`];\n      return loadState === -1 || loadState === 0 || loadState === 2;\n    };\n    if (options.precheck) {\n      const preResult = options.precheck(this, loadNotPending);\n      if (preResult !== undefined) return preResult;\n    }\n    if (this.hasResourceBundle(lng, ns)) return true;\n    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n    return false;\n  }\n  loadNamespaces(ns, callback) {\n    const deferred = defer();\n    if (!this.options.ns) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    if (isString(ns)) ns = [ns];\n    ns.forEach(n => {\n      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);\n    });\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  loadLanguages(lngs, callback) {\n    const deferred = defer();\n    if (isString(lngs)) lngs = [lngs];\n    const preloaded = this.options.preload || [];\n    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));\n    if (!newLngs.length) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    this.options.preload = preloaded.concat(newLngs);\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  dir(lng) {\n    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n    if (!lng) return 'rtl';\n    const rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());\n    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n  }\n  static createInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    return new I18n(options, callback);\n  }\n  cloneInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    const forkResourceStore = options.forkResourceStore;\n    if (forkResourceStore) delete options.forkResourceStore;\n    const mergedOptions = {\n      ...this.options,\n      ...options,\n      ...{\n        isClone: true\n      }\n    };\n    const clone = new I18n(mergedOptions);\n    if (options.debug !== undefined || options.prefix !== undefined) {\n      clone.logger = clone.logger.clone(options);\n    }\n    const membersToCopy = ['store', 'services', 'language'];\n    membersToCopy.forEach(m => {\n      clone[m] = this[m];\n    });\n    clone.services = {\n      ...this.services\n    };\n    clone.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    if (forkResourceStore) {\n      clone.store = new ResourceStore(this.store.data, mergedOptions);\n      clone.services.resourceStore = clone.store;\n    }\n    clone.translator = new Translator(clone.services, mergedOptions);\n    clone.translator.on('*', function (event) {\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n      clone.emit(event, ...args);\n    });\n    clone.init(mergedOptions, callback);\n    clone.translator.options = mergedOptions;\n    clone.translator.backendConnector.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    return clone;\n  }\n  toJSON() {\n    return {\n      options: this.options,\n      store: this.store,\n      language: this.language,\n      languages: this.languages,\n      resolvedLanguage: this.resolvedLanguage\n    };\n  }\n}\nconst instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nconst createInstance = instance.createInstance;\nconst dir = instance.dir;\nconst init = instance.init;\nconst loadResources = instance.loadResources;\nconst reloadResources = instance.reloadResources;\nconst use = instance.use;\nconst changeLanguage = instance.changeLanguage;\nconst getFixedT = instance.getFixedT;\nconst t = instance.t;\nconst exists = instance.exists;\nconst setDefaultNamespace = instance.setDefaultNamespace;\nconst hasLoadedNamespace = instance.hasLoadedNamespace;\nconst loadNamespaces = instance.loadNamespaces;\nconst loadLanguages = instance.loadLanguages;\n\nexport { changeLanguage, createInstance, instance as default, dir, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nexport function defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\nexport function hasXMLHttpRequest() {\n  return typeof XMLHttpRequest === 'function' || (typeof XMLHttpRequest === \"undefined\" ? \"undefined\" : _typeof(XMLHttpRequest)) === 'object';\n}\nfunction isPromise(maybePromise) {\n  return !!maybePromise && typeof maybePromise.then === 'function';\n}\nexport function makePromise(maybePromise) {\n  if (isPromise(maybePromise)) {\n    return maybePromise;\n  }\n  return Promise.resolve(maybePromise);\n}","// Save global object in a variable\nvar __global__ =\n(typeof globalThis !== 'undefined' && globalThis) ||\n(typeof self !== 'undefined' && self) ||\n(typeof global !== 'undefined' && global);\n// Create an object that extends from __global__ without the fetch function\nvar __globalThis__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = __global__.DOMException\n}\nF.prototype = __global__; // Needed for feature detection on whatwg-fetch's code\nreturn new F();\n})();\n// Wraps whatwg-fetch with a function scope to hijack the global object\n// \"globalThis\" that's going to be patched\n(function(globalThis) {\n\nvar irrelevant = (function (exports) {\n\n  var global =\n    (typeof globalThis !== 'undefined' && globalThis) ||\n    (typeof self !== 'undefined' && self) ||\n    (typeof global !== 'undefined' && global);\n\n  var support = {\n    searchParams: 'URLSearchParams' in global,\n    iterable: 'Symbol' in global && 'iterator' in Symbol,\n    blob:\n      'FileReader' in global &&\n      'Blob' in global &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in global,\n    arrayBuffer: 'ArrayBuffer' in global\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n      throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      /*\n        fetch-mock wraps the Response object in an ES6 Proxy to\n        provide useful test harness features such as flush. However, on\n        ES5 browsers without fetch or Proxy support pollyfills must be used;\n        the proxy-pollyfill is unable to proxy an attribute unless it exists\n        on the object before the Proxy is created. This change ensures\n        Response.bodyUsed exists on the instance, while maintaining the\n        semantic of setting Request.bodyUsed in the constructor before\n        _initBody is called.\n      */\n      this.bodyUsed = this.bodyUsed;\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          var isConsumed = consumed(this);\n          if (isConsumed) {\n            return isConsumed\n          }\n          if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n            return Promise.resolve(\n              this._bodyArrayBuffer.buffer.slice(\n                this._bodyArrayBuffer.byteOffset,\n                this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n              )\n            )\n          } else {\n            return Promise.resolve(this._bodyArrayBuffer)\n          }\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    if (!(this instanceof Request)) {\n      throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n    }\n\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n\n    if (this.method === 'GET' || this.method === 'HEAD') {\n      if (options.cache === 'no-store' || options.cache === 'no-cache') {\n        // Search for a '_' parameter in the query string\n        var reParamSearch = /([?&])_=[^&]*/;\n        if (reParamSearch.test(this.url)) {\n          // If it already exists then set the value with the current time\n          this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime());\n        } else {\n          // Otherwise add a new '_' parameter to the end with the current time\n          var reQueryString = /\\?/;\n          this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime();\n        }\n      }\n    }\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n    // https://github.com/github/fetch/issues/748\n    // https://github.com/zloirock/core-js/issues/751\n    preProcessedHeaders\n      .split('\\r')\n      .map(function(header) {\n        return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n      })\n      .forEach(function(line) {\n        var parts = line.split(':');\n        var key = parts.shift().trim();\n        if (key) {\n          var value = parts.join(':').trim();\n          headers.append(key, value);\n        }\n      });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!(this instanceof Response)) {\n      throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n    }\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = options.statusText === undefined ? '' : '' + options.statusText;\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = global.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        setTimeout(function() {\n          resolve(new Response(body, options));\n        }, 0);\n      };\n\n      xhr.onerror = function() {\n        setTimeout(function() {\n          reject(new TypeError('Network request failed'));\n        }, 0);\n      };\n\n      xhr.ontimeout = function() {\n        setTimeout(function() {\n          reject(new TypeError('Network request failed'));\n        }, 0);\n      };\n\n      xhr.onabort = function() {\n        setTimeout(function() {\n          reject(new exports.DOMException('Aborted', 'AbortError'));\n        }, 0);\n      };\n\n      function fixUrl(url) {\n        try {\n          return url === '' && global.location.href ? global.location.href : url\n        } catch (e) {\n          return url\n        }\n      }\n\n      xhr.open(request.method, fixUrl(request.url), true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr) {\n        if (support.blob) {\n          xhr.responseType = 'blob';\n        } else if (\n          support.arrayBuffer &&\n          request.headers.get('Content-Type') &&\n          request.headers.get('Content-Type').indexOf('application/octet-stream') !== -1\n        ) {\n          xhr.responseType = 'arraybuffer';\n        }\n      }\n\n      if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers)) {\n        Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n          xhr.setRequestHeader(name, normalizeValue(init.headers[name]));\n        });\n      } else {\n        request.headers.forEach(function(value, name) {\n          xhr.setRequestHeader(name, value);\n        });\n      }\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!global.fetch) {\n    global.fetch = fetch;\n    global.Headers = Headers;\n    global.Request = Request;\n    global.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n})({});\n})(__globalThis__);\n// This is a ponyfill, so...\n__globalThis__.fetch.ponyfill = true;\ndelete __globalThis__.fetch.polyfill;\n// Choose between native implementation (__global__) or custom implementation (__globalThis__)\nvar ctx = __global__.fetch ? __global__ : __globalThis__;\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","var fetchApi = typeof fetch === 'function' ? fetch : undefined\nif (typeof global !== 'undefined' && global.fetch) {\n  fetchApi = global.fetch\n} else if (typeof window !== 'undefined' && window.fetch) {\n  fetchApi = window.fetch\n}\n\nif (typeof require !== 'undefined' && typeof window === 'undefined') {\n  var f = fetchApi || require('cross-fetch')\n  if (f.default) f = f.default\n  exports.default = f\n  module.exports = exports.default\n}\n","function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nimport { hasXMLHttpRequest } from './utils.js';\nimport * as fetchNode from './getFetch.cjs';\nvar fetchApi = typeof fetch === 'function' ? fetch : undefined;\nif (typeof global !== 'undefined' && global.fetch) {\n  fetchApi = global.fetch;\n} else if (typeof window !== 'undefined' && window.fetch) {\n  fetchApi = window.fetch;\n}\nvar XmlHttpRequestApi;\nif (hasXMLHttpRequest()) {\n  if (typeof global !== 'undefined' && global.XMLHttpRequest) {\n    XmlHttpRequestApi = global.XMLHttpRequest;\n  } else if (typeof window !== 'undefined' && window.XMLHttpRequest) {\n    XmlHttpRequestApi = window.XMLHttpRequest;\n  }\n}\nvar ActiveXObjectApi;\nif (typeof ActiveXObject === 'function') {\n  if (typeof global !== 'undefined' && global.ActiveXObject) {\n    ActiveXObjectApi = global.ActiveXObject;\n  } else if (typeof window !== 'undefined' && window.ActiveXObject) {\n    ActiveXObjectApi = window.ActiveXObject;\n  }\n}\nif (!fetchApi && fetchNode && !XmlHttpRequestApi && !ActiveXObjectApi) fetchApi = fetchNode.default || fetchNode;\nif (typeof fetchApi !== 'function') fetchApi = undefined;\nvar addQueryString = function addQueryString(url, params) {\n  if (params && _typeof(params) === 'object') {\n    var queryString = '';\n    for (var paramName in params) {\n      queryString += '&' + encodeURIComponent(paramName) + '=' + encodeURIComponent(params[paramName]);\n    }\n    if (!queryString) return url;\n    url = url + (url.indexOf('?') !== -1 ? '&' : '?') + queryString.slice(1);\n  }\n  return url;\n};\nvar fetchIt = function fetchIt(url, fetchOptions, callback, altFetch) {\n  var resolver = function resolver(response) {\n    if (!response.ok) return callback(response.statusText || 'Error', {\n      status: response.status\n    });\n    response.text().then(function (data) {\n      callback(null, {\n        status: response.status,\n        data: data\n      });\n    }).catch(callback);\n  };\n  if (altFetch) {\n    var altResponse = altFetch(url, fetchOptions);\n    if (altResponse instanceof Promise) {\n      altResponse.then(resolver).catch(callback);\n      return;\n    }\n  }\n  if (typeof fetch === 'function') {\n    fetch(url, fetchOptions).then(resolver).catch(callback);\n  } else {\n    fetchApi(url, fetchOptions).then(resolver).catch(callback);\n  }\n};\nvar omitFetchOptions = false;\nvar requestWithFetch = function requestWithFetch(options, url, payload, callback) {\n  if (options.queryStringParams) {\n    url = addQueryString(url, options.queryStringParams);\n  }\n  var headers = _objectSpread({}, typeof options.customHeaders === 'function' ? options.customHeaders() : options.customHeaders);\n  if (typeof window === 'undefined' && typeof global !== 'undefined' && typeof global.process !== 'undefined' && global.process.versions && global.process.versions.node) {\n    headers['User-Agent'] = \"i18next-http-backend (node/\".concat(global.process.version, \"; \").concat(global.process.platform, \" \").concat(global.process.arch, \")\");\n  }\n  if (payload) headers['Content-Type'] = 'application/json';\n  var reqOptions = typeof options.requestOptions === 'function' ? options.requestOptions(payload) : options.requestOptions;\n  var fetchOptions = _objectSpread({\n    method: payload ? 'POST' : 'GET',\n    body: payload ? options.stringify(payload) : undefined,\n    headers: headers\n  }, omitFetchOptions ? {} : reqOptions);\n  var altFetch = typeof options.alternateFetch === 'function' && options.alternateFetch.length >= 1 ? options.alternateFetch : undefined;\n  try {\n    fetchIt(url, fetchOptions, callback, altFetch);\n  } catch (e) {\n    if (!reqOptions || Object.keys(reqOptions).length === 0 || !e.message || e.message.indexOf('not implemented') < 0) {\n      return callback(e);\n    }\n    try {\n      Object.keys(reqOptions).forEach(function (opt) {\n        delete fetchOptions[opt];\n      });\n      fetchIt(url, fetchOptions, callback, altFetch);\n      omitFetchOptions = true;\n    } catch (err) {\n      callback(err);\n    }\n  }\n};\nvar requestWithXmlHttpRequest = function requestWithXmlHttpRequest(options, url, payload, callback) {\n  if (payload && _typeof(payload) === 'object') {\n    payload = addQueryString('', payload).slice(1);\n  }\n  if (options.queryStringParams) {\n    url = addQueryString(url, options.queryStringParams);\n  }\n  try {\n    var x;\n    if (XmlHttpRequestApi) {\n      x = new XmlHttpRequestApi();\n    } else {\n      x = new ActiveXObjectApi('MSXML2.XMLHTTP.3.0');\n    }\n    x.open(payload ? 'POST' : 'GET', url, 1);\n    if (!options.crossDomain) {\n      x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    }\n    x.withCredentials = !!options.withCredentials;\n    if (payload) {\n      x.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n    if (x.overrideMimeType) {\n      x.overrideMimeType('application/json');\n    }\n    var h = options.customHeaders;\n    h = typeof h === 'function' ? h() : h;\n    if (h) {\n      for (var i in h) {\n        x.setRequestHeader(i, h[i]);\n      }\n    }\n    x.onreadystatechange = function () {\n      x.readyState > 3 && callback(x.status >= 400 ? x.statusText : null, {\n        status: x.status,\n        data: x.responseText\n      });\n    };\n    x.send(payload);\n  } catch (e) {\n    console && console.log(e);\n  }\n};\nvar request = function request(options, url, payload, callback) {\n  if (typeof payload === 'function') {\n    callback = payload;\n    payload = undefined;\n  }\n  callback = callback || function () {};\n  if (fetchApi && url.indexOf('file:') !== 0) {\n    return requestWithFetch(options, url, payload, callback);\n  }\n  if (hasXMLHttpRequest() || typeof ActiveXObject === 'function') {\n    return requestWithXmlHttpRequest(options, url, payload, callback);\n  }\n  callback(new Error('No fetch and no xhr implementation found!'));\n};\nexport default request;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport { makePromise } from './utils.js';\nimport request from './request.js';\nvar getDefaults = function getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    parse: function parse(data) {\n      return JSON.parse(data);\n    },\n    stringify: JSON.stringify,\n    parsePayload: function parsePayload(namespace, key, fallbackValue) {\n      return _defineProperty({}, key, fallbackValue || '');\n    },\n    parseLoadPayload: function parseLoadPayload(languages, namespaces) {\n      return undefined;\n    },\n    request: request,\n    reloadInterval: typeof window !== 'undefined' ? false : 60 * 60 * 1000,\n    customHeaders: {},\n    queryStringParams: {},\n    crossDomain: false,\n    withCredentials: false,\n    overrideMimeType: false,\n    requestOptions: {\n      mode: 'cors',\n      credentials: 'same-origin',\n      cache: 'default'\n    }\n  };\n};\nvar Backend = function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, Backend);\n    this.services = services;\n    this.options = options;\n    this.allOptions = allOptions;\n    this.type = 'backend';\n    this.init(services, options, allOptions);\n  }\n  return _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.services = services;\n      this.options = _objectSpread(_objectSpread(_objectSpread({}, getDefaults()), this.options || {}), options);\n      this.allOptions = allOptions;\n      if (this.services && this.options.reloadInterval) {\n        var timer = setInterval(function () {\n          return _this.reload();\n        }, this.options.reloadInterval);\n        if (_typeof(timer) === 'object' && typeof timer.unref === 'function') timer.unref();\n      }\n    }\n  }, {\n    key: \"readMulti\",\n    value: function readMulti(languages, namespaces, callback) {\n      this._readAny(languages, languages, namespaces, namespaces, callback);\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      this._readAny([language], language, [namespace], namespace, callback);\n    }\n  }, {\n    key: \"_readAny\",\n    value: function _readAny(languages, loadUrlLanguages, namespaces, loadUrlNamespaces, callback) {\n      var _this2 = this;\n      var loadPath = this.options.loadPath;\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n      loadPath = makePromise(loadPath);\n      loadPath.then(function (resolvedLoadPath) {\n        if (!resolvedLoadPath) return callback(null, {});\n        var url = _this2.services.interpolator.interpolate(resolvedLoadPath, {\n          lng: languages.join('+'),\n          ns: namespaces.join('+')\n        });\n        _this2.loadUrl(url, callback, loadUrlLanguages, loadUrlNamespaces);\n      });\n    }\n  }, {\n    key: \"loadUrl\",\n    value: function loadUrl(url, callback, languages, namespaces) {\n      var _this3 = this;\n      var lng = typeof languages === 'string' ? [languages] : languages;\n      var ns = typeof namespaces === 'string' ? [namespaces] : namespaces;\n      var payload = this.options.parseLoadPayload(lng, ns);\n      this.options.request(this.options, url, payload, function (err, res) {\n        if (res && (res.status >= 500 && res.status < 600 || !res.status)) return callback('failed loading ' + url + '; status code: ' + res.status, true);\n        if (res && res.status >= 400 && res.status < 500) return callback('failed loading ' + url + '; status code: ' + res.status, false);\n        if (!res && err && err.message) {\n          var errorMessage = err.message.toLowerCase();\n          var isNetworkError = ['failed', 'fetch', 'network', 'load'].find(function (term) {\n            return errorMessage.indexOf(term) > -1;\n          });\n          if (isNetworkError) {\n            return callback('failed loading ' + url + ': ' + err.message, true);\n          }\n        }\n        if (err) return callback(err, false);\n        var ret, parseErr;\n        try {\n          if (typeof res.data === 'string') {\n            ret = _this3.options.parse(res.data, languages, namespaces);\n          } else {\n            ret = res.data;\n          }\n        } catch (e) {\n          parseErr = 'failed parsing ' + url + ' to json';\n        }\n        if (parseErr) return callback(parseErr, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue, callback) {\n      var _this4 = this;\n      if (!this.options.addPath) return;\n      if (typeof languages === 'string') languages = [languages];\n      var payload = this.options.parsePayload(namespace, key, fallbackValue);\n      var finished = 0;\n      var dataArray = [];\n      var resArray = [];\n      languages.forEach(function (lng) {\n        var addPath = _this4.options.addPath;\n        if (typeof _this4.options.addPath === 'function') {\n          addPath = _this4.options.addPath(lng, namespace);\n        }\n        var url = _this4.services.interpolator.interpolate(addPath, {\n          lng: lng,\n          ns: namespace\n        });\n        _this4.options.request(_this4.options, url, payload, function (data, res) {\n          finished += 1;\n          dataArray.push(data);\n          resArray.push(res);\n          if (finished === languages.length) {\n            if (typeof callback === 'function') callback(dataArray, resArray);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      var _this5 = this;\n      var _this$services = this.services,\n        backendConnector = _this$services.backendConnector,\n        languageUtils = _this$services.languageUtils,\n        logger = _this$services.logger;\n      var currentLanguage = backendConnector.language;\n      if (currentLanguage && currentLanguage.toLowerCase() === 'cimode') return;\n      var toLoad = [];\n      var append = function append(lng) {\n        var lngs = languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(function (l) {\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n      append(currentLanguage);\n      if (this.allOptions.preload) this.allOptions.preload.forEach(function (l) {\n        return append(l);\n      });\n      toLoad.forEach(function (lng) {\n        _this5.allOptions.ns.forEach(function (ns) {\n          backendConnector.read(lng, ns, 'read', null, null, function (err, data) {\n            if (err) logger.warn(\"loading namespace \".concat(ns, \" for language \").concat(lng, \" failed\"), err);\n            if (!err && data) logger.log(\"loaded namespace \".concat(ns, \" for language \").concat(lng), data);\n            backendConnector.loaded(\"\".concat(lng, \"|\").concat(ns), err, data);\n          });\n        });\n      });\n    }\n  }]);\n}();\nBackend.type = 'backend';\nexport default Backend;","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\n\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\n// eslint-disable-next-line no-control-regex\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\nvar serializeCookie = function serializeCookie(name, val, options) {\n  var opt = options || {};\n  opt.path = opt.path || '/';\n  var value = encodeURIComponent(val);\n  var str = \"\".concat(name, \"=\").concat(value);\n  if (opt.maxAge > 0) {\n    var maxAge = opt.maxAge - 0;\n    if (Number.isNaN(maxAge)) throw new Error('maxAge should be a Number');\n    str += \"; Max-Age=\".concat(Math.floor(maxAge));\n  }\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n    str += \"; Domain=\".concat(opt.domain);\n  }\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n    str += \"; Path=\".concat(opt.path);\n  }\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n    str += \"; Expires=\".concat(opt.expires.toUTCString());\n  }\n  if (opt.httpOnly) str += '; HttpOnly';\n  if (opt.secure) str += '; Secure';\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string' ? opt.sameSite.toLowerCase() : opt.sameSite;\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n  return str;\n};\nvar cookie = {\n  create: function create(name, value, minutes, domain) {\n    var cookieOptions = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      path: '/',\n      sameSite: 'strict'\n    };\n    if (minutes) {\n      cookieOptions.expires = new Date();\n      cookieOptions.expires.setTime(cookieOptions.expires.getTime() + minutes * 60 * 1000);\n    }\n    if (domain) cookieOptions.domain = domain;\n    document.cookie = serializeCookie(name, encodeURIComponent(value), cookieOptions);\n  },\n  read: function read(name) {\n    var nameEQ = \"\".concat(name, \"=\");\n    var ca = document.cookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n    }\n    return null;\n  },\n  remove: function remove(name) {\n    this.create(name, '', -1);\n  }\n};\nvar cookie$1 = {\n  name: 'cookie',\n  lookup: function lookup(options) {\n    var found;\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      var c = cookie.read(options.lookupCookie);\n      if (c) found = c;\n    }\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      cookie.create(options.lookupCookie, lng, options.cookieMinutes, options.cookieDomain, options.cookieOptions);\n    }\n  }\n};\n\nvar querystring = {\n  name: 'querystring',\n  lookup: function lookup(options) {\n    var found;\n    if (typeof window !== 'undefined') {\n      var search = window.location.search;\n      if (!window.location.search && window.location.hash && window.location.hash.indexOf('?') > -1) {\n        search = window.location.hash.substring(window.location.hash.indexOf('?'));\n      }\n      var query = search.substring(1);\n      var params = query.split('&');\n      for (var i = 0; i < params.length; i++) {\n        var pos = params[i].indexOf('=');\n        if (pos > 0) {\n          var key = params[i].substring(0, pos);\n          if (key === options.lookupQuerystring) {\n            found = params[i].substring(pos + 1);\n          }\n        }\n      }\n    }\n    return found;\n  }\n};\n\nvar hasLocalStorageSupport = null;\nvar localStorageAvailable = function localStorageAvailable() {\n  if (hasLocalStorageSupport !== null) return hasLocalStorageSupport;\n  try {\n    hasLocalStorageSupport = window !== 'undefined' && window.localStorage !== null;\n    var testKey = 'i18next.translate.boo';\n    window.localStorage.setItem(testKey, 'foo');\n    window.localStorage.removeItem(testKey);\n  } catch (e) {\n    hasLocalStorageSupport = false;\n  }\n  return hasLocalStorageSupport;\n};\nvar localStorage = {\n  name: 'localStorage',\n  lookup: function lookup(options) {\n    var found;\n    if (options.lookupLocalStorage && localStorageAvailable()) {\n      var lng = window.localStorage.getItem(options.lookupLocalStorage);\n      if (lng) found = lng;\n    }\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupLocalStorage && localStorageAvailable()) {\n      window.localStorage.setItem(options.lookupLocalStorage, lng);\n    }\n  }\n};\n\nvar hasSessionStorageSupport = null;\nvar sessionStorageAvailable = function sessionStorageAvailable() {\n  if (hasSessionStorageSupport !== null) return hasSessionStorageSupport;\n  try {\n    hasSessionStorageSupport = window !== 'undefined' && window.sessionStorage !== null;\n    var testKey = 'i18next.translate.boo';\n    window.sessionStorage.setItem(testKey, 'foo');\n    window.sessionStorage.removeItem(testKey);\n  } catch (e) {\n    hasSessionStorageSupport = false;\n  }\n  return hasSessionStorageSupport;\n};\nvar sessionStorage = {\n  name: 'sessionStorage',\n  lookup: function lookup(options) {\n    var found;\n    if (options.lookupSessionStorage && sessionStorageAvailable()) {\n      var lng = window.sessionStorage.getItem(options.lookupSessionStorage);\n      if (lng) found = lng;\n    }\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupSessionStorage && sessionStorageAvailable()) {\n      window.sessionStorage.setItem(options.lookupSessionStorage, lng);\n    }\n  }\n};\n\nvar navigator$1 = {\n  name: 'navigator',\n  lookup: function lookup(options) {\n    var found = [];\n    if (typeof navigator !== 'undefined') {\n      if (navigator.languages) {\n        // chrome only; not an array, so can't use .push.apply instead of iterating\n        for (var i = 0; i < navigator.languages.length; i++) {\n          found.push(navigator.languages[i]);\n        }\n      }\n      if (navigator.userLanguage) {\n        found.push(navigator.userLanguage);\n      }\n      if (navigator.language) {\n        found.push(navigator.language);\n      }\n    }\n    return found.length > 0 ? found : undefined;\n  }\n};\n\nvar htmlTag = {\n  name: 'htmlTag',\n  lookup: function lookup(options) {\n    var found;\n    var htmlTag = options.htmlTag || (typeof document !== 'undefined' ? document.documentElement : null);\n    if (htmlTag && typeof htmlTag.getAttribute === 'function') {\n      found = htmlTag.getAttribute('lang');\n    }\n    return found;\n  }\n};\n\nvar path = {\n  name: 'path',\n  lookup: function lookup(options) {\n    var found;\n    if (typeof window !== 'undefined') {\n      var language = window.location.pathname.match(/\\/([a-zA-Z-]*)/g);\n      if (language instanceof Array) {\n        if (typeof options.lookupFromPathIndex === 'number') {\n          if (typeof language[options.lookupFromPathIndex] !== 'string') {\n            return undefined;\n          }\n          found = language[options.lookupFromPathIndex].replace('/', '');\n        } else {\n          found = language[0].replace('/', '');\n        }\n      }\n    }\n    return found;\n  }\n};\n\nvar subdomain = {\n  name: 'subdomain',\n  lookup: function lookup(options) {\n    // If given get the subdomain index else 1\n    var lookupFromSubdomainIndex = typeof options.lookupFromSubdomainIndex === 'number' ? options.lookupFromSubdomainIndex + 1 : 1;\n    // get all matches if window.location. is existing\n    // first item of match is the match itself and the second is the first group macht which sould be the first subdomain match\n    // is the hostname no public domain get the or option of localhost\n    var language = typeof window !== 'undefined' && window.location && window.location.hostname && window.location.hostname.match(/^(\\w{2,5})\\.(([a-z0-9-]{1,63}\\.[a-z]{2,6})|localhost)/i);\n\n    // if there is no match (null) return undefined\n    if (!language) return undefined;\n    // return the given group match\n    return language[lookupFromSubdomainIndex];\n  }\n};\n\n// some environments, throws when accessing document.cookie\nvar canCookies = false;\ntry {\n  // eslint-disable-next-line no-unused-expressions\n  document.cookie;\n  canCookies = true;\n  // eslint-disable-next-line no-empty\n} catch (e) {}\nvar order = ['querystring', 'cookie', 'localStorage', 'sessionStorage', 'navigator', 'htmlTag'];\nif (!canCookies) order.splice(1, 1);\nfunction getDefaults() {\n  return {\n    order: order,\n    lookupQuerystring: 'lng',\n    lookupCookie: 'i18next',\n    lookupLocalStorage: 'i18nextLng',\n    lookupSessionStorage: 'i18nextLng',\n    // cache user language\n    caches: ['localStorage'],\n    excludeCacheFor: ['cimode'],\n    // cookieMinutes: 10,\n    // cookieDomain: 'myDomain'\n\n    convertDetectedLanguage: function convertDetectedLanguage(l) {\n      return l;\n    }\n  };\n}\nvar Browser = /*#__PURE__*/function () {\n  function Browser(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Browser);\n    this.type = 'languageDetector';\n    this.detectors = {};\n    this.init(services, options);\n  }\n  return _createClass(Browser, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var i18nOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.services = services || {\n        languageUtils: {}\n      }; // this way the language detector can be used without i18next\n      this.options = defaults(options, this.options || {}, getDefaults());\n      if (typeof this.options.convertDetectedLanguage === 'string' && this.options.convertDetectedLanguage.indexOf('15897') > -1) {\n        this.options.convertDetectedLanguage = function (l) {\n          return l.replace('-', '_');\n        };\n      }\n\n      // backwards compatibility\n      if (this.options.lookupFromUrlIndex) this.options.lookupFromPathIndex = this.options.lookupFromUrlIndex;\n      this.i18nOptions = i18nOptions;\n      this.addDetector(cookie$1);\n      this.addDetector(querystring);\n      this.addDetector(localStorage);\n      this.addDetector(sessionStorage);\n      this.addDetector(navigator$1);\n      this.addDetector(htmlTag);\n      this.addDetector(path);\n      this.addDetector(subdomain);\n    }\n  }, {\n    key: \"addDetector\",\n    value: function addDetector(detector) {\n      this.detectors[detector.name] = detector;\n      return this;\n    }\n  }, {\n    key: \"detect\",\n    value: function detect(detectionOrder) {\n      var _this = this;\n      if (!detectionOrder) detectionOrder = this.options.order;\n      var detected = [];\n      detectionOrder.forEach(function (detectorName) {\n        if (_this.detectors[detectorName]) {\n          var lookup = _this.detectors[detectorName].lookup(_this.options);\n          if (lookup && typeof lookup === 'string') lookup = [lookup];\n          if (lookup) detected = detected.concat(lookup);\n        }\n      });\n      detected = detected.map(function (d) {\n        return _this.options.convertDetectedLanguage(d);\n      });\n      if (this.services.languageUtils.getBestMatchFromCodes) return detected; // new i18next v19.5.0\n      return detected.length > 0 ? detected[0] : null; // a little backward compatibility\n    }\n  }, {\n    key: \"cacheUserLanguage\",\n    value: function cacheUserLanguage(lng, caches) {\n      var _this2 = this;\n      if (!caches) caches = this.options.caches;\n      if (!caches) return;\n      if (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(lng) > -1) return;\n      caches.forEach(function (cacheName) {\n        if (_this2.detectors[cacheName]) _this2.detectors[cacheName].cacheUserLanguage(lng, _this2.options);\n      });\n    }\n  }]);\n}();\nBrowser.type = 'languageDetector';\n\nexport { Browser as default };\n","import i18n from 'i18next';\nimport Backend from 'i18next-http-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n\n// Supported languages configuration\nexport const SUPPORTED_LANGUAGES = {\n  en: {\n    code: 'en',\n    name: 'English',\n    nativeName: 'English',\n    flag: '',\n    rtl: false,\n  },\n  es: {\n    code: 'es',\n    name: 'Spanish',\n    nativeName: 'Espaol',\n    flag: '',\n    rtl: false,\n  },\n  fr: {\n    code: 'fr',\n    name: 'French',\n    nativeName: 'Franais',\n    flag: '',\n    rtl: false,\n  },\n  de: {\n    code: 'de',\n    name: 'German',\n    nativeName: 'Deutsch',\n    flag: '',\n    rtl: false,\n  },\n  it: {\n    code: 'it',\n    name: 'Italian',\n    nativeName: 'Italiano',\n    flag: '',\n    rtl: false,\n  },\n  pt: {\n    code: 'pt',\n    name: 'Portuguese',\n    nativeName: 'Portugus',\n    flag: '',\n    rtl: false,\n  },\n  ru: {\n    code: 'ru',\n    name: 'Russian',\n    nativeName: '',\n    flag: '',\n    rtl: false,\n  },\n  ja: {\n    code: 'ja',\n    name: 'Japanese',\n    nativeName: '',\n    flag: '',\n    rtl: false,\n  },\n  ko: {\n    code: 'ko',\n    name: 'Korean',\n    nativeName: '',\n    flag: '',\n    rtl: false,\n  },\n  zh: {\n    code: 'zh',\n    name: 'Chinese',\n    nativeName: '',\n    flag: '',\n    rtl: false,\n  },\n  ar: {\n    code: 'ar',\n    name: 'Arabic',\n    nativeName: '',\n    flag: '',\n    rtl: true,\n  },\n  he: {\n    code: 'he',\n    name: 'Hebrew',\n    nativeName: '',\n    flag: '',\n    rtl: true,\n  },\n} as const;\n\nexport type SupportedLanguage = keyof typeof SUPPORTED_LANGUAGES;\n\n// Default translations\nexport const DEFAULT_TRANSLATIONS = {\n  en: {\n    common: {\n      loading: 'Loading...',\n      error: 'Error',\n      retry: 'Retry',\n      close: 'Close',\n      save: 'Save',\n      cancel: 'Cancel',\n      yes: 'Yes',\n      no: 'No',\n      continue: 'Continue',\n      back: 'Back',\n      next: 'Next',\n      previous: 'Previous',\n    },\n    game: {\n      title: 'SprintSolve',\n      subtitle: 'Test your knowledge at lightning speed!',\n      startGame: 'Start Game',\n      playAgain: 'Play Again',\n      paused: 'Paused',\n      gameOver: 'Game Over',\n      score: 'Score',\n      lives: 'Lives',\n      level: 'Level',\n      correct: 'Correct!',\n      incorrect: 'Incorrect!',\n      timeUp: \"Time's up!\",\n      finalScore: 'Final Score',\n      newHighScore: 'New High Score!',\n      pressToJump: 'Press SPACE or tap to jump',\n      pressToContinue: 'Press P to continue',\n      shieldUsed: 'Shield Used!',\n    },\n    menu: {\n      play: 'Play',\n      settings: 'Settings',\n      leaderboard: 'Leaderboard',\n      achievements: 'Achievements',\n      statistics: 'Statistics',\n      about: 'About',\n      credits: 'Credits',\n      quit: 'Quit',\n    },\n    settings: {\n      title: 'Settings',\n      audio: 'Audio',\n      graphics: 'Graphics',\n      controls: 'Controls',\n      language: 'Language',\n      theme: 'Theme',\n      difficulty: 'Difficulty',\n      volume: 'Volume',\n      soundEffects: 'Sound Effects',\n      music: 'Music',\n      fullscreen: 'Fullscreen',\n      notifications: 'Notifications',\n    },\n    categories: {\n      generalKnowledge: 'General Knowledge',\n      science: 'Science',\n      history: 'History',\n      geography: 'Geography',\n      sports: 'Sports',\n      entertainment: 'Entertainment',\n      art: 'Art & Literature',\n      mythology: 'Mythology',\n      politics: 'Politics',\n      animals: 'Animals',\n    },\n    privacy: {\n      cookieConsent: 'We value your privacy',\n      cookieDescription:\n        'We use cookies and similar technologies to enhance your gaming experience.',\n      necessary: 'Necessary',\n      analytics: 'Analytics',\n      marketing: 'Marketing',\n      preferences: 'Preferences',\n      acceptAll: 'Accept All',\n      acceptNecessary: 'Necessary Only',\n      customize: 'Customize',\n      privacyPolicy: 'Privacy Policy',\n    },\n  },\n} as const;\n\nexport interface I18nConfig {\n  fallbackLanguage?: SupportedLanguage;\n  debug?: boolean;\n  loadPath?: string;\n}\n\nclass I18nService {\n  private currentLanguage: SupportedLanguage = 'en';\n  private isInitialized = false;\n  private changeListeners: Set<(_language: SupportedLanguage) => void> =\n    new Set();\n\n  constructor() {\n    this.currentLanguage = this.detectLanguage();\n  }\n\n  public async initialize(config: I18nConfig = {}): Promise<void> {\n    const {\n      fallbackLanguage = 'en',\n      debug = process.env.NODE_ENV === 'development',\n      loadPath = '/locales/{{lng}}/{{ns}}.json',\n    } = config;\n\n    try {\n      await i18n\n        .use(Backend)\n        .use(LanguageDetector)\n        .init({\n          lng: this.currentLanguage,\n          fallbackLng: fallbackLanguage,\n          debug,\n          backend: { loadPath },\n          detection: {\n            order: ['localStorage', 'navigator', 'htmlTag'],\n            caches: ['localStorage'],\n          },\n          resources: {\n            en: { translation: DEFAULT_TRANSLATIONS.en },\n          },\n          interpolation: { escapeValue: false },\n        });\n\n      this.isInitialized = true;\n      this.currentLanguage = (i18n.language as SupportedLanguage) || 'en';\n      this.applyTextDirection();\n      // eslint-disable-next-line no-console\n      console.log(`I18n initialized with language: ${this.currentLanguage}`);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error('Failed to initialize i18n:', error);\n      this.isInitialized = true;\n    }\n  }\n\n  public async changeLanguage(language: SupportedLanguage): Promise<void> {\n    if (!this.isInitialized) {\n      await this.initialize();\n    }\n\n    try {\n      await i18n.changeLanguage(language);\n      this.currentLanguage = language;\n      this.applyTextDirection();\n      localStorage.setItem('i18n_language', language);\n      this.changeListeners.forEach(listener => listener(language));\n      // eslint-disable-next-line no-console\n      console.log(`Language changed to: ${language}`);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error('Failed to change language:', error);\n    }\n  }\n\n  public t(key: string, options?: any): string {\n    if (!this.isInitialized) {\n      const keys = key.split('.');\n      let value: any = DEFAULT_TRANSLATIONS.en;\n\n      for (const k of keys) {\n        value = value?.[k];\n        if (!value) break;\n      }\n\n      return value || key;\n    }\n\n    return i18n.t(key, options) as string;\n  }\n\n  public getCurrentLanguage(): SupportedLanguage {\n    return this.currentLanguage;\n  }\n\n  public getLanguageConfig(language: SupportedLanguage) {\n    return SUPPORTED_LANGUAGES[language];\n  }\n\n  public getSupportedLanguages() {\n    return Object.values(SUPPORTED_LANGUAGES);\n  }\n\n  public isRTL(): boolean {\n    return SUPPORTED_LANGUAGES[this.currentLanguage]?.rtl || false;\n  }\n\n  public formatNumber(\n    number: number,\n    options?: Intl.NumberFormatOptions,\n  ): string {\n    try {\n      return new Intl.NumberFormat(this.currentLanguage, options).format(\n        number,\n      );\n    } catch {\n      return number.toString();\n    }\n  }\n\n  public formatDate(date: Date, options?: Intl.DateTimeFormatOptions): string {\n    try {\n      return new Intl.DateTimeFormat(this.currentLanguage, options).format(\n        date,\n      );\n    } catch {\n      return date.toLocaleDateString();\n    }\n  }\n\n  public onLanguageChange(\n    callback: (_language: SupportedLanguage) => void,\n  ): () => void {\n    this.changeListeners.add(callback);\n    return () => this.changeListeners.delete(callback);\n  }\n\n  private detectLanguage(): SupportedLanguage {\n    const saved = localStorage.getItem('i18n_language') as SupportedLanguage;\n    if (saved && saved in SUPPORTED_LANGUAGES) {\n      return saved;\n    }\n\n    const browserLang = navigator.language.split('-')[0] as SupportedLanguage;\n    if (browserLang in SUPPORTED_LANGUAGES) {\n      return browserLang;\n    }\n\n    for (const lang of navigator.languages) {\n      const langCode = lang.split('-')[0] as SupportedLanguage;\n      if (langCode in SUPPORTED_LANGUAGES) {\n        return langCode;\n      }\n    }\n\n    return 'en';\n  }\n\n  private applyTextDirection(): void {\n    const isRTL = this.isRTL();\n    const htmlElement = document.documentElement;\n\n    if (isRTL) {\n      htmlElement.setAttribute('dir', 'rtl');\n      htmlElement.setAttribute('lang', this.currentLanguage);\n      document.body.classList.add('rtl');\n      document.body.classList.remove('ltr');\n    } else {\n      htmlElement.setAttribute('dir', 'ltr');\n      htmlElement.setAttribute('lang', this.currentLanguage);\n      document.body.classList.add('ltr');\n      document.body.classList.remove('rtl');\n    }\n  }\n}\n\nexport const i18nService = new I18nService();\n\nexport const t = (key: string, options?: any): string => {\n  return i18nService.t(key, options);\n};\n\nexport const isRTL = (): boolean => {\n  return i18nService.isRTL();\n};\n","import { analyticsService } from '../services/analyticsService';\nimport { t } from '../services/i18nService';\n\nexport interface ConsentPreferences {\n  necessary: boolean;\n  analytics: boolean;\n  marketing: boolean;\n  preferences: boolean;\n}\n\nexport class ConsentManager {\n  private consentBanner: HTMLElement | null = null;\n  private preferencesModal: HTMLElement | null = null;\n  private currentPreferences: ConsentPreferences;\n\n  constructor() {\n    this.currentPreferences = this.loadConsentPreferences();\n    this.init();\n  }\n\n  /**\n   * Initialize the consent manager\n   */\n  public init(): void {\n    if (this.shouldShowConsent()) {\n      this.createConsentBanner();\n    } else {\n      this.applyConsent();\n    }\n\n    // Add event listener for consent preference changes\n    document.addEventListener('show-consent-preferences', () => {\n      this.showPreferencesModal();\n    });\n  }\n\n  /**\n   * Check if we need to show consent banner\n   */\n  private shouldShowConsent(): boolean {\n    const hasConsent = localStorage.getItem('consent_preferences');\n    const consentVersion = localStorage.getItem('consent_version');\n    const currentVersion = '1.0'; // Update this when privacy policy changes\n\n    return !hasConsent || consentVersion !== currentVersion;\n  }\n\n  /**\n   * Load saved consent preferences\n   */\n  private loadConsentPreferences(): ConsentPreferences {\n    const saved = localStorage.getItem('consent_preferences');\n    if (saved) {\n      return JSON.parse(saved);\n    }\n\n    return {\n      necessary: true, // Always required\n      analytics: false,\n      marketing: false,\n      preferences: false,\n    };\n  }\n\n  /**\n   * Save consent preferences\n   */\n  private saveConsentPreferences(preferences: ConsentPreferences): void {\n    localStorage.setItem('consent_preferences', JSON.stringify(preferences));\n    localStorage.setItem('consent_version', '1.0');\n    localStorage.setItem('consent_timestamp', Date.now().toString());\n\n    this.currentPreferences = preferences;\n    this.applyConsent();\n  }\n\n  /**\n   * Apply consent preferences to services\n   */\n  private applyConsent(): void {\n    // Apply analytics consent\n    analyticsService.updateConsent(this.currentPreferences.analytics);\n\n    // Initialize analytics if consent given\n    if (this.currentPreferences.analytics) {\n      analyticsService.initialize({\n        userConsent: true,\n      });\n    }\n\n    // Apply other consents (marketing, preferences, etc.)\n    this.applyMarketingConsent(this.currentPreferences.marketing);\n    this.applyPreferencesConsent(this.currentPreferences.preferences);\n\n    // Dispatch event for other parts of the app\n    document.dispatchEvent(\n      new CustomEvent('consent-updated', {\n        detail: this.currentPreferences,\n      }),\n    );\n  }\n\n  /**\n   * Apply marketing consent\n   */\n  private applyMarketingConsent(enabled: boolean): void {\n    // Placeholder for marketing tools (social media pixels, etc.)\n    if (enabled) {\n      // eslint-disable-next-line no-console\n      console.log('Marketing consent granted');\n    } else {\n      // eslint-disable-next-line no-console\n      console.log('Marketing consent denied');\n    }\n  }\n\n  /**\n   * Apply preferences consent\n   */\n  private applyPreferencesConsent(enabled: boolean): void {\n    // Placeholder for preference-based features\n    if (enabled) {\n      // eslint-disable-next-line no-console\n      console.log('Preferences consent granted');\n    } else {\n      // eslint-disable-next-line no-console\n      console.log('Preferences consent denied');\n    }\n  }\n\n  /**\n   * Create and show consent banner\n   */\n  private createConsentBanner(): void {\n    this.consentBanner = document.createElement('div');\n    this.consentBanner.className = 'consent-banner';\n    this.consentBanner.innerHTML = `\n      <div class=\"consent-content\">\n        <div class=\"consent-text\">\n          <h3> ${t('privacy.cookieConsent')}</h3>\n          <p>${t('privacy.cookieDescription')}</p>\n        </div>\n        <div class=\"consent-actions\">\n          <button class=\"btn-accept-all\" type=\"button\">${t('privacy.acceptAll')}</button>\n          <button class=\"btn-accept-necessary\" type=\"button\">${t('privacy.acceptNecessary')}</button>\n          <button class=\"btn-preferences\" type=\"button\">${t('privacy.customize')}</button>\n          <a href=\"#privacy-policy\" class=\"privacy-link\">${t('privacy.privacyPolicy')}</a>\n        </div>\n      </div>\n    `;\n\n    this.addConsentStyles();\n    this.attachConsentEvents();\n\n    document.body.appendChild(this.consentBanner);\n\n    // Show with animation\n    setTimeout(() => {\n      this.consentBanner?.classList.add('show');\n    }, 100);\n  }\n\n  /**\n   * Attach event listeners to consent banner\n   */\n  private attachConsentEvents(): void {\n    if (!this.consentBanner) return;\n\n    const acceptAllBtn = this.consentBanner.querySelector('.btn-accept-all');\n    const acceptNecessaryBtn = this.consentBanner.querySelector(\n      '.btn-accept-necessary',\n    );\n    const preferencesBtn = this.consentBanner.querySelector('.btn-preferences');\n\n    acceptAllBtn?.addEventListener('click', () => {\n      this.saveConsentPreferences({\n        necessary: true,\n        analytics: true,\n        marketing: true,\n        preferences: true,\n      });\n      this.hideConsentBanner();\n    });\n\n    acceptNecessaryBtn?.addEventListener('click', () => {\n      this.saveConsentPreferences({\n        necessary: true,\n        analytics: false,\n        marketing: false,\n        preferences: false,\n      });\n      this.hideConsentBanner();\n    });\n\n    preferencesBtn?.addEventListener('click', () => {\n      this.showPreferencesModal();\n    });\n  }\n\n  /**\n   * Hide consent banner\n   */\n  private hideConsentBanner(): void {\n    if (this.consentBanner) {\n      this.consentBanner.classList.remove('show');\n      setTimeout(() => {\n        this.consentBanner?.remove();\n        this.consentBanner = null;\n      }, 300);\n    }\n  }\n\n  /**\n   * Show preferences modal\n   */\n  private showPreferencesModal(): void {\n    this.createPreferencesModal();\n  }\n\n  /**\n   * Create preferences modal\n   */\n  private createPreferencesModal(): void {\n    this.preferencesModal = document.createElement('div');\n    this.preferencesModal.className = 'consent-modal-overlay';\n    this.preferencesModal.innerHTML = `\n      <div class=\"consent-modal\">\n        <div class=\"modal-header\">\n          <h2>Privacy Preferences</h2>\n          <button class=\"close-btn\" type=\"button\"></button>\n        </div>\n        <div class=\"modal-content\">\n          <p>Choose which cookies and data processing you're comfortable with. You can change these settings at any time.</p>\n          \n          <div class=\"preference-group\">\n            <div class=\"preference-header\">\n              <label class=\"preference-label\">\n                <input type=\"checkbox\" checked disabled>\n                <span class=\"checkmark\"></span>\n                <strong>Necessary</strong>\n              </label>\n            </div>\n            <p class=\"preference-description\">Required for basic site functionality, game saves, and security.</p>\n          </div>\n          \n          <div class=\"preference-group\">\n            <div class=\"preference-header\">\n              <label class=\"preference-label\">\n                <input type=\"checkbox\" id=\"analytics-consent\" ${this.currentPreferences.analytics ? 'checked' : ''}>\n                <span class=\"checkmark\"></span>\n                <strong>Analytics</strong>\n              </label>\n            </div>\n            <p class=\"preference-description\">Help us understand how you play and improve the game experience.</p>\n          </div>\n          \n          <div class=\"preference-group\">\n            <div class=\"preference-header\">\n              <label class=\"preference-label\">\n                <input type=\"checkbox\" id=\"marketing-consent\" ${this.currentPreferences.marketing ? 'checked' : ''}>\n                <span class=\"checkmark\"></span>\n                <strong>Marketing</strong>\n              </label>\n            </div>\n            <p class=\"preference-description\">Personalized content and recommendations based on your interests.</p>\n          </div>\n          \n          <div class=\"preference-group\">\n            <div class=\"preference-header\">\n              <label class=\"preference-label\">\n                <input type=\"checkbox\" id=\"preferences-consent\" ${this.currentPreferences.preferences ? 'checked' : ''}>\n                <span class=\"checkmark\"></span>\n                <strong>Preferences</strong>\n              </label>\n            </div>\n            <p class=\"preference-description\">Remember your settings and provide a personalized experience.</p>\n          </div>\n        </div>\n        <div class=\"modal-actions\">\n          <button class=\"btn-save\" type=\"button\">Save Preferences</button>\n          <button class=\"btn-cancel\" type=\"button\">Cancel</button>\n        </div>\n      </div>\n    `;\n\n    this.attachPreferencesEvents();\n    document.body.appendChild(this.preferencesModal);\n\n    // Show with animation\n    setTimeout(() => {\n      this.preferencesModal?.classList.add('show');\n    }, 50);\n  }\n\n  /**\n   * Attach event listeners to preferences modal\n   */\n  private attachPreferencesEvents(): void {\n    if (!this.preferencesModal) return;\n\n    const closeBtn = this.preferencesModal.querySelector('.close-btn');\n    const saveBtn = this.preferencesModal.querySelector('.btn-save');\n    const cancelBtn = this.preferencesModal.querySelector('.btn-cancel');\n    const overlay = this.preferencesModal;\n\n    const closeModal = () => this.hidePreferencesModal();\n\n    closeBtn?.addEventListener('click', closeModal);\n    cancelBtn?.addEventListener('click', closeModal);\n\n    overlay?.addEventListener('click', e => {\n      if (e.target === overlay) {\n        closeModal();\n      }\n    });\n\n    saveBtn?.addEventListener('click', () => {\n      const analyticsCheckbox = this.preferencesModal?.querySelector(\n        '#analytics-consent',\n      ) as HTMLInputElement;\n      const marketingCheckbox = this.preferencesModal?.querySelector(\n        '#marketing-consent',\n      ) as HTMLInputElement;\n      const preferencesCheckbox = this.preferencesModal?.querySelector(\n        '#preferences-consent',\n      ) as HTMLInputElement;\n\n      const preferences: ConsentPreferences = {\n        necessary: true,\n        analytics: analyticsCheckbox?.checked || false,\n        marketing: marketingCheckbox?.checked || false,\n        preferences: preferencesCheckbox?.checked || false,\n      };\n\n      this.saveConsentPreferences(preferences);\n      this.hidePreferencesModal();\n      this.hideConsentBanner();\n    });\n  }\n\n  /**\n   * Hide preferences modal\n   */\n  private hidePreferencesModal(): void {\n    if (this.preferencesModal) {\n      this.preferencesModal.classList.remove('show');\n      setTimeout(() => {\n        this.preferencesModal?.remove();\n        this.preferencesModal = null;\n      }, 300);\n    }\n  }\n\n  /**\n   * Add consent banner and modal styles\n   */\n  private addConsentStyles(): void {\n    const styleId = 'consent-styles';\n    if (document.getElementById(styleId)) return;\n\n    const style = document.createElement('style');\n    style.id = styleId;\n    style.textContent = `\n      .consent-banner {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        background: rgba(0, 0, 0, 0.95);\n        backdrop-filter: blur(10px);\n        border-top: 2px solid #FF6A00;\n        padding: 1.5rem;\n        z-index: 10000;\n        transform: translateY(100%);\n        transition: transform 0.3s ease-out;\n        font-family: 'Press Start 2P', monospace;\n      }\n\n      .consent-banner.show {\n        transform: translateY(0);\n      }\n\n      .consent-content {\n        max-width: 1200px;\n        margin: 0 auto;\n        display: flex;\n        align-items: center;\n        gap: 2rem;\n        flex-wrap: wrap;\n      }\n\n      .consent-text {\n        flex: 1;\n        min-width: 300px;\n      }\n\n      .consent-text h3 {\n        color: #FF6A00;\n        font-size: 0.8rem;\n        margin: 0 0 0.5rem 0;\n      }\n\n      .consent-text p {\n        color: white;\n        font-size: 0.5rem;\n        line-height: 1.4;\n        margin: 0;\n      }\n\n      .consent-actions {\n        display: flex;\n        gap: 1rem;\n        align-items: center;\n        flex-wrap: wrap;\n      }\n\n      .consent-actions button {\n        background: #FF6A00;\n        color: white;\n        border: none;\n        padding: 0.5rem 1rem;\n        font-family: 'Press Start 2P', monospace;\n        font-size: 0.4rem;\n        cursor: pointer;\n        transition: all 0.2s;\n        border: 2px solid transparent;\n      }\n\n      .consent-actions button:hover {\n        background: white;\n        color: #FF6A00;\n        border-color: #FF6A00;\n      }\n\n      .btn-accept-necessary {\n        background: #666 !important;\n      }\n\n      .btn-accept-necessary:hover {\n        background: white !important;\n        color: #666 !important;\n        border-color: #666 !important;\n      }\n\n      .privacy-link {\n        color: #FF6A00;\n        text-decoration: none;\n        font-size: 0.4rem;\n        border-bottom: 1px solid transparent;\n        transition: border-color 0.2s;\n      }\n\n      .privacy-link:hover {\n        border-bottom-color: #FF6A00;\n      }\n\n      .consent-modal-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.8);\n        backdrop-filter: blur(5px);\n        z-index: 10001;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        opacity: 0;\n        transition: opacity 0.3s ease;\n        padding: 1rem;\n      }\n\n      .consent-modal-overlay.show {\n        opacity: 1;\n      }\n\n      .consent-modal {\n        background: #1a1a1a;\n        border: 2px solid #FF6A00;\n        border-radius: 10px;\n        max-width: 600px;\n        width: 100%;\n        max-height: 80vh;\n        overflow-y: auto;\n        font-family: 'Press Start 2P', monospace;\n        transform: scale(0.9);\n        transition: transform 0.3s ease;\n      }\n\n      .consent-modal-overlay.show .consent-modal {\n        transform: scale(1);\n      }\n\n      .modal-header {\n        padding: 1.5rem;\n        border-bottom: 1px solid #333;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n\n      .modal-header h2 {\n        color: #FF6A00;\n        font-size: 0.7rem;\n        margin: 0;\n      }\n\n      .close-btn {\n        background: none;\n        border: none;\n        color: white;\n        font-size: 1.5rem;\n        cursor: pointer;\n        padding: 0;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .close-btn:hover {\n        color: #FF6A00;\n      }\n\n      .modal-content {\n        padding: 1.5rem;\n        color: white;\n      }\n\n      .modal-content > p {\n        font-size: 0.5rem;\n        line-height: 1.4;\n        margin-bottom: 1.5rem;\n      }\n\n      .preference-group {\n        margin-bottom: 1.5rem;\n        padding: 1rem;\n        background: rgba(255, 106, 0, 0.1);\n        border-radius: 5px;\n      }\n\n      .preference-header {\n        margin-bottom: 0.5rem;\n      }\n\n      .preference-label {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        font-size: 0.5rem;\n      }\n\n      .preference-label input[type=\"checkbox\"] {\n        margin-right: 0.5rem;\n        transform: scale(1.2);\n      }\n\n      .preference-description {\n        font-size: 0.4rem;\n        line-height: 1.3;\n        color: #ccc;\n        margin: 0;\n        margin-left: 1.5rem;\n      }\n\n      .modal-actions {\n        padding: 1.5rem;\n        border-top: 1px solid #333;\n        display: flex;\n        gap: 1rem;\n        justify-content: flex-end;\n      }\n\n      .modal-actions button {\n        background: #FF6A00;\n        color: white;\n        border: none;\n        padding: 0.5rem 1rem;\n        font-family: 'Press Start 2P', monospace;\n        font-size: 0.4rem;\n        cursor: pointer;\n        transition: all 0.2s;\n        border: 2px solid transparent;\n      }\n\n      .modal-actions button:hover {\n        background: white;\n        color: #FF6A00;\n        border-color: #FF6A00;\n      }\n\n      .btn-cancel {\n        background: #666 !important;\n      }\n\n      .btn-cancel:hover {\n        background: white !important;\n        color: #666 !important;\n        border-color: #666 !important;\n      }\n\n      @media (max-width: 768px) {\n        .consent-content {\n          flex-direction: column;\n          text-align: center;\n        }\n\n        .consent-actions {\n          justify-content: center;\n          width: 100%;\n        }\n\n        .consent-modal {\n          margin: 1rem;\n          max-height: calc(100vh - 2rem);\n        }\n      }\n    `;\n\n    document.head.appendChild(style);\n  }\n\n  /**\n   * Get current consent preferences\n   */\n  public getConsentPreferences(): ConsentPreferences {\n    return { ...this.currentPreferences };\n  }\n\n  /**\n   * Check if specific consent is granted\n   */\n  public hasConsent(type: keyof ConsentPreferences): boolean {\n    return this.currentPreferences[type];\n  }\n\n  /**\n   * Programmatically show consent preferences\n   */\n  public showConsentPreferences(): void {\n    this.showPreferencesModal();\n  }\n\n  /**\n   * Reset all consent preferences\n   */\n  public resetConsent(): void {\n    localStorage.removeItem('consent_preferences');\n    localStorage.removeItem('consent_version');\n    localStorage.removeItem('consent_timestamp');\n\n    this.currentPreferences = {\n      necessary: true,\n      analytics: false,\n      marketing: false,\n      preferences: false,\n    };\n\n    this.createConsentBanner();\n  }\n}\n\n// Export singleton instance\nexport const consentManager = new ConsentManager();\n","/* eslint-disable no-console */\nimport {\n  i18nService,\n  SUPPORTED_LANGUAGES,\n  SupportedLanguage,\n  t,\n} from '../services/i18nService';\nimport { analyticsService } from '../services/analyticsService';\n\nexport interface LanguageSelectorConfig {\n  position?:\n    | 'top-left'\n    | 'top-right'\n    | 'bottom-left'\n    | 'bottom-right'\n    | 'center';\n  showFlags?: boolean;\n  showNames?: boolean;\n  compact?: boolean;\n  onLanguageChange?: (_language: SupportedLanguage) => void;\n}\n\nexport class LanguageSelector {\n  private container: HTMLElement | null = null;\n  private dropdown: HTMLElement | null = null;\n  private config: LanguageSelectorConfig;\n  private isOpen = false;\n  private currentLanguage: SupportedLanguage;\n\n  constructor(config: LanguageSelectorConfig = {}) {\n    this.config = {\n      position: 'top-right',\n      showFlags: true,\n      showNames: true,\n      compact: false,\n      ...config,\n    };\n\n    this.currentLanguage = i18nService.getCurrentLanguage();\n    this.create();\n    this.setupEventListeners();\n  }\n\n  /**\n   * Create the language selector UI\n   */\n  private create(): void {\n    // Create container\n    this.container = document.createElement('div');\n    this.container.className = `language-selector ${this.config.position} ${this.config.compact ? 'compact' : ''}`;\n\n    // Create current language button\n    const currentButton = document.createElement('button');\n    currentButton.className = 'current-language-btn';\n    currentButton.setAttribute('aria-haspopup', 'true');\n    currentButton.setAttribute('aria-expanded', 'false');\n    currentButton.setAttribute(\n      'aria-label',\n      t('accessibility.languageSelector'),\n    );\n\n    this.updateCurrentLanguageButton(currentButton);\n\n    // Create dropdown\n    this.dropdown = document.createElement('div');\n    this.dropdown.className = 'language-dropdown';\n    this.dropdown.setAttribute('role', 'menu');\n    this.dropdown.setAttribute('aria-label', t('settings.language'));\n\n    this.createDropdownItems();\n\n    // Assemble\n    this.container.appendChild(currentButton);\n    this.container.appendChild(this.dropdown);\n\n    // Add styles\n    this.addStyles();\n\n    // Add to DOM\n    document.body.appendChild(this.container);\n  }\n\n  /**\n   * Update the current language button content\n   */\n  private updateCurrentLanguageButton(button: HTMLElement): void {\n    const langConfig = SUPPORTED_LANGUAGES[this.currentLanguage];\n    const flagSpan = this.config.showFlags\n      ? `<span class=\"flag\">${langConfig.flag}</span>`\n      : '';\n    const nameSpan =\n      this.config.showNames && !this.config.compact\n        ? `<span class=\"name\">${langConfig.nativeName}</span>`\n        : '';\n    const chevron = '<span class=\"chevron\"></span>';\n\n    button.innerHTML = `${flagSpan}${nameSpan}${chevron}`;\n    button.setAttribute(\n      'title',\n      `${t('settings.language')}: ${langConfig.nativeName}`,\n    );\n  }\n\n  /**\n   * Create dropdown items for all supported languages\n   */\n  private createDropdownItems(): void {\n    if (!this.dropdown) return;\n\n    this.dropdown.innerHTML = '';\n\n    Object.values(SUPPORTED_LANGUAGES).forEach(langConfig => {\n      const item = document.createElement('button');\n      item.className = `language-item ${langConfig.code === this.currentLanguage ? 'active' : ''}`;\n      item.setAttribute('role', 'menuitem');\n      item.setAttribute('data-language', langConfig.code);\n      item.setAttribute(\n        'aria-label',\n        `${t('settings.language')}: ${langConfig.nativeName}`,\n      );\n\n      const flagSpan = this.config.showFlags\n        ? `<span class=\"flag\">${langConfig.flag}</span>`\n        : '';\n      const nameSpan = this.config.showNames\n        ? `<span class=\"name\">${langConfig.nativeName}</span>`\n        : '';\n      const checkmark =\n        langConfig.code === this.currentLanguage\n          ? '<span class=\"checkmark\"></span>'\n          : '';\n\n      item.innerHTML = `${flagSpan}${nameSpan}${checkmark}`;\n\n      // Add click handler\n      item.addEventListener('click', async e => {\n        e.preventDefault();\n        e.stopPropagation();\n        await this.selectLanguage(langConfig.code);\n      });\n\n      this.dropdown?.appendChild(item);\n    });\n  }\n\n  /**\n   * Setup event listeners\n   */\n  private setupEventListeners(): void {\n    if (!this.container) return;\n\n    const currentButton = this.container.querySelector(\n      '.current-language-btn',\n    ) as HTMLElement;\n\n    // Toggle dropdown on button click\n    currentButton?.addEventListener('click', e => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleDropdown();\n    });\n\n    // Close dropdown when clicking outside\n    document.addEventListener('click', e => {\n      if (!this.container?.contains(e.target as Node)) {\n        this.closeDropdown();\n      }\n    });\n\n    // Handle keyboard navigation\n    currentButton?.addEventListener('keydown', e => {\n      switch (e.key) {\n        case 'Enter':\n        case ' ':\n        case 'ArrowDown':\n          e.preventDefault();\n          this.openDropdown();\n          this.focusFirstItem();\n          break;\n        case 'Escape':\n          this.closeDropdown();\n          break;\n      }\n    });\n\n    // Handle dropdown keyboard navigation\n    this.dropdown?.addEventListener('keydown', e => {\n      this.handleDropdownKeydown(e);\n    });\n\n    // Listen for language changes from other sources\n    i18nService.onLanguageChange(language => {\n      this.currentLanguage = language;\n      this.updateCurrentLanguageButton(currentButton);\n      this.createDropdownItems();\n    });\n  }\n\n  /**\n   * Handle keyboard navigation in dropdown\n   */\n  private handleDropdownKeydown(e: KeyboardEvent): void {\n    if (!this.dropdown) return;\n\n    const items = Array.from(\n      this.dropdown.querySelectorAll('.language-item'),\n    ) as HTMLElement[];\n    const currentIndex = items.findIndex(\n      item => item === document.activeElement,\n    );\n\n    switch (e.key) {\n      case 'ArrowDown': {\n        e.preventDefault();\n        const nextIndex = (currentIndex + 1) % items.length;\n        items[nextIndex]?.focus();\n        break;\n      }\n\n      case 'ArrowUp': {\n        e.preventDefault();\n        const prevIndex =\n          currentIndex <= 0 ? items.length - 1 : currentIndex - 1;\n        items[prevIndex]?.focus();\n        break;\n      }\n\n      case 'Enter':\n      case ' ':\n        e.preventDefault();\n        (document.activeElement as HTMLElement)?.click();\n        break;\n\n      case 'Escape':\n        e.preventDefault();\n        this.closeDropdown();\n        (\n          this.container?.querySelector('.current-language-btn') as HTMLElement\n        )?.focus();\n        break;\n\n      case 'Home':\n        e.preventDefault();\n        items[0]?.focus();\n        break;\n\n      case 'End':\n        e.preventDefault();\n        items[items.length - 1]?.focus();\n        break;\n    }\n  }\n\n  /**\n   * Select a language\n   */\n  private async selectLanguage(language: SupportedLanguage): Promise<void> {\n    if (language === this.currentLanguage) {\n      this.closeDropdown();\n      return;\n    }\n\n    try {\n      // Track language change\n      analyticsService.trackUserInteraction({\n        event: 'settings_change',\n        element: 'language_selector',\n        value: language,\n      });\n\n      // Change language\n      await i18nService.changeLanguage(language);\n      this.currentLanguage = language;\n\n      // Update UI\n      const currentButton = this.container?.querySelector(\n        '.current-language-btn',\n      ) as HTMLElement;\n      this.updateCurrentLanguageButton(currentButton);\n      this.createDropdownItems();\n\n      // Close dropdown\n      this.closeDropdown();\n\n      // Notify callback\n      this.config.onLanguageChange?.(language);\n\n      // Dispatch custom event\n      document.dispatchEvent(\n        new CustomEvent('language-changed', {\n          detail: { language, config: SUPPORTED_LANGUAGES[language] },\n        }),\n      );\n    } catch (error) {\n      console.error('Failed to change language:', error);\n    }\n  }\n\n  /**\n   * Toggle dropdown open/closed\n   */\n  private toggleDropdown(): void {\n    if (this.isOpen) {\n      this.closeDropdown();\n    } else {\n      this.openDropdown();\n    }\n  }\n\n  /**\n   * Open dropdown\n   */\n  private openDropdown(): void {\n    if (!this.dropdown || !this.container) return;\n\n    this.isOpen = true;\n    this.dropdown.classList.add('open');\n    this.container.classList.add('open');\n\n    const currentButton = this.container.querySelector('.current-language-btn');\n    currentButton?.setAttribute('aria-expanded', 'true');\n  }\n\n  /**\n   * Close dropdown\n   */\n  private closeDropdown(): void {\n    if (!this.dropdown || !this.container) return;\n\n    this.isOpen = false;\n    this.dropdown.classList.remove('open');\n    this.container.classList.remove('open');\n\n    const currentButton = this.container.querySelector('.current-language-btn');\n    currentButton?.setAttribute('aria-expanded', 'false');\n  }\n\n  /**\n   * Focus first dropdown item\n   */\n  private focusFirstItem(): void {\n    const firstItem = this.dropdown?.querySelector(\n      '.language-item',\n    ) as HTMLElement;\n    firstItem?.focus();\n  }\n\n  /**\n   * Add CSS styles\n   */\n  private addStyles(): void {\n    const styleId = 'language-selector-styles';\n    if (document.getElementById(styleId)) return;\n\n    const style = document.createElement('style');\n    style.id = styleId;\n    style.textContent = `\n      .language-selector {\n        position: fixed;\n        z-index: 1000;\n        font-family: 'Press Start 2P', monospace;\n      }\n\n      .language-selector.top-left {\n        top: 1rem;\n        left: 1rem;\n      }\n\n      .language-selector.top-right {\n        top: 1rem;\n        right: 1rem;\n      }\n\n      .language-selector.bottom-left {\n        bottom: 1rem;\n        left: 1rem;\n      }\n\n      .language-selector.bottom-right {\n        bottom: 1rem;\n        right: 1rem;\n      }\n\n      .language-selector.center {\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n      }\n\n      .current-language-btn {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        padding: 0.5rem 0.75rem;\n        background: rgba(0, 0, 0, 0.8);\n        border: 2px solid #FF6A00;\n        border-radius: 6px;\n        color: white;\n        font-family: inherit;\n        font-size: 0.6rem;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        backdrop-filter: blur(10px);\n      }\n\n      .current-language-btn:hover {\n        background: rgba(255, 106, 0, 0.1);\n        border-color: #FF8A20;\n        transform: translateY(-1px);\n      }\n\n      .current-language-btn:focus {\n        outline: 2px solid #FF6A00;\n        outline-offset: 2px;\n      }\n\n      .language-selector.compact .current-language-btn {\n        padding: 0.4rem;\n        min-width: 2.5rem;\n        justify-content: center;\n      }\n\n      .language-dropdown {\n        position: absolute;\n        top: 100%;\n        right: 0;\n        margin-top: 0.5rem;\n        background: rgba(0, 0, 0, 0.95);\n        border: 2px solid #FF6A00;\n        border-radius: 6px;\n        backdrop-filter: blur(10px);\n        min-width: 200px;\n        max-height: 300px;\n        overflow-y: auto;\n        opacity: 0;\n        visibility: hidden;\n        transform: translateY(-10px);\n        transition: all 0.2s ease;\n      }\n\n      .language-dropdown.open {\n        opacity: 1;\n        visibility: visible;\n        transform: translateY(0);\n      }\n\n      .language-item {\n        display: flex;\n        align-items: center;\n        gap: 0.75rem;\n        width: 100%;\n        padding: 0.75rem 1rem;\n        background: transparent;\n        border: none;\n        color: white;\n        font-family: inherit;\n        font-size: 0.5rem;\n        text-align: left;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        position: relative;\n      }\n\n      .language-item:hover {\n        background: rgba(255, 106, 0, 0.2);\n      }\n\n      .language-item:focus {\n        background: rgba(255, 106, 0, 0.3);\n        outline: none;\n      }\n\n      .language-item.active {\n        background: rgba(255, 106, 0, 0.1);\n        color: #FF6A00;\n      }\n\n      .language-item .flag {\n        font-size: 0.8rem;\n        min-width: 1.2rem;\n      }\n\n      .language-item .name {\n        flex: 1;\n      }\n\n      .language-item .checkmark {\n        color: #4CAF50;\n        font-size: 0.6rem;\n      }\n\n      .current-language-btn .chevron {\n        transition: transform 0.2s ease;\n        font-size: 0.4rem;\n      }\n\n      .language-selector.open .current-language-btn .chevron {\n        transform: rotate(180deg);\n      }\n\n      /* RTL support */\n      .rtl .language-selector.top-right {\n        right: auto;\n        left: 1rem;\n      }\n\n      .rtl .language-selector.top-left {\n        left: auto;\n        right: 1rem;\n      }\n\n      .rtl .language-dropdown {\n        right: auto;\n        left: 0;\n      }\n\n      .rtl .language-item {\n        text-align: right;\n        flex-direction: row-reverse;\n      }\n\n      /* Mobile responsive */\n      @media (max-width: 768px) {\n        .language-selector {\n          position: fixed;\n        }\n        \n        .language-selector.top-right {\n          top: 0.5rem;\n          right: 0.5rem;\n        }\n\n        .current-language-btn {\n          font-size: 0.5rem;\n          padding: 0.4rem 0.6rem;\n        }\n\n        .language-dropdown {\n          min-width: 180px;\n          max-height: 250px;\n        }\n\n        .language-item {\n          padding: 0.6rem 0.8rem;\n          font-size: 0.45rem;\n        }\n      }\n\n      /* Dark/Light theme support */\n      @media (prefers-color-scheme: light) {\n        .current-language-btn {\n          background: rgba(255, 255, 255, 0.9);\n          color: #333;\n        }\n\n        .language-dropdown {\n          background: rgba(255, 255, 255, 0.95);\n        }\n\n        .language-item {\n          color: #333;\n        }\n\n        .language-item:hover {\n          background: rgba(255, 106, 0, 0.1);\n        }\n      }\n\n      /* Animation for dropdown scroll */\n      .language-dropdown::-webkit-scrollbar {\n        width: 4px;\n      }\n\n      .language-dropdown::-webkit-scrollbar-track {\n        background: rgba(255, 255, 255, 0.1);\n      }\n\n      .language-dropdown::-webkit-scrollbar-thumb {\n        background: #FF6A00;\n        border-radius: 2px;\n      }\n\n      .language-dropdown::-webkit-scrollbar-thumb:hover {\n        background: #FF8A20;\n      }\n    `;\n\n    document.head.appendChild(style);\n  }\n\n  /**\n   * Update configuration\n   */\n  public updateConfig(config: Partial<LanguageSelectorConfig>): void {\n    this.config = { ...this.config, ...config };\n\n    if (this.container) {\n      // Remove old position class\n      this.container.className = this.container.className.replace(\n        /(top-left|top-right|bottom-left|bottom-right|center)/g,\n        '',\n      );\n\n      // Add new classes\n      this.container.className += ` ${this.config.position} ${this.config.compact ? 'compact' : ''}`;\n\n      // Update button content\n      const currentButton = this.container.querySelector(\n        '.current-language-btn',\n      ) as HTMLElement;\n      this.updateCurrentLanguageButton(currentButton);\n      this.createDropdownItems();\n    }\n  }\n\n  /**\n   * Show the language selector\n   */\n  public show(): void {\n    if (this.container) {\n      this.container.style.display = 'block';\n    }\n  }\n\n  /**\n   * Hide the language selector\n   */\n  public hide(): void {\n    if (this.container) {\n      this.container.style.display = 'none';\n    }\n    this.closeDropdown();\n  }\n\n  /**\n   * Destroy the language selector\n   */\n  public destroy(): void {\n    if (this.container) {\n      this.container.remove();\n      this.container = null;\n      this.dropdown = null;\n    }\n  }\n\n  /**\n   * Get current selected language\n   */\n  public getCurrentLanguage(): SupportedLanguage {\n    return this.currentLanguage;\n  }\n}\n\n// Export singleton instance\nexport const languageSelector = new LanguageSelector();\n","import { character } from './character';\nimport {\n  updateObstacles,\n  drawObstacles,\n  checkCollisions,\n  generateWallWithTunnels,\n  clearObstacles,\n} from './obstacles';\nimport { questionState, triviaService } from './questions';\nimport { useGameStore, useGameActions } from './stores/gameStore';\nimport {\n  audioManager,\n  playJumpSound,\n  playScoreSound,\n  playGameOverSound,\n  playBackgroundMusic,\n  stopBackgroundMusic,\n} from './audio';\nimport {\n  updateParticles,\n  drawParticles,\n  createExplosion,\n  clearParticles,\n} from './particles';\nimport { loadGameAssets } from './assets';\nimport { analyticsService } from './services/analyticsService';\nimport './components/ConsentManager'; // Initialize consent manager\nimport { i18nService, t } from './services/i18nService';\nimport './components/LanguageSelector'; // Initialize language selector\n/* eslint-disable no-console */\nimport type { GameAssets, DisplayMessage, PerformanceMetrics } from './types';\n\n/**\n * Game engine class with modern architecture\n */\nclass GameEngine {\n  private readonly canvas: HTMLCanvasElement;\n  private readonly ctx: CanvasRenderingContext2D;\n\n  private assets: GameAssets | null = null;\n  private displayMessage: DisplayMessage = { text: '', ttl: 0, color: 'white' };\n  private collisionProcessed = false;\n  private roundJustStarted = true;\n  private animationId: number | null = null;\n  private lastFrameTime = 0;\n  private performanceMetrics: PerformanceMetrics = {\n    fps: 0,\n    frameTime: 0,\n    renderTime: 0,\n    updateTime: 0,\n  };\n\n  // Game state from Zustand store\n  private gameStore = useGameStore.getState();\n  private gameActions = useGameActions();\n\n  constructor(canvasId: string) {\n    const canvas = document.getElementById(canvasId) as HTMLCanvasElement;\n    if (!canvas) {\n      throw new Error(`Canvas with id '${canvasId}' not found`);\n    }\n\n    this.canvas = canvas;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Failed to get 2D context');\n    }\n    this.ctx = ctx;\n\n    this.setupCanvas();\n    this.setupEventListeners();\n\n    // Show loading screen immediately\n    this.showLoadingScreen();\n\n    // Subscribe to store changes\n    useGameStore.subscribe(state => {\n      this.gameStore = state;\n    });\n  }\n\n  /**\n   * Initialize the game engine\n   */\n  public async init(): Promise<void> {\n    try {\n      this.showLoadingScreen();\n\n      // Load assets\n      this.assets = await loadGameAssets();\n\n      // Initialize audio system\n      await audioManager.preloadAll();\n\n      // Initialize internationalization\n      await i18nService.initialize();\n\n      // Initialize analytics (will respect user consent)\n      await analyticsService.initialize();\n\n      // Track game initialization\n      analyticsService.trackCustomEvent('game_initialized', {\n        user_agent: navigator.userAgent,\n        screen_resolution: `${window.screen.width}x${window.screen.height}`,\n        viewport_size: `${window.innerWidth}x${window.innerHeight}`,\n        language: i18nService.getCurrentLanguage(),\n      });\n\n      // Start the game loop\n      this.gameActions.setGameState('menu');\n      this.startGameLoop();\n\n      console.log('Game engine initialized successfully');\n    } catch (error) {\n      console.error('Failed to initialize game engine:', error);\n      this.showErrorScreen(\n        'Failed to load game assets. Please refresh and try again.',\n      );\n\n      // Track initialization failure\n      analyticsService.trackCustomEvent('game_initialization_failed', {\n        error: error instanceof Error ? error.message : String(error),\n      });\n    }\n  }\n\n  /**\n   * Setup canvas properties\n   */\n  private setupCanvas(): void {\n    this.resizeCanvas();\n    window.addEventListener('resize', () => this.resizeCanvas());\n  }\n\n  /**\n   * Resize canvas to window size\n   */\n  private resizeCanvas(): void {\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n\n    // Reset character position after resize\n    if (this.gameStore.gameState === 'playing') {\n      character.reset(this.canvas.height);\n    }\n  }\n\n  /**\n   * Setup event listeners\n   */\n  private setupEventListeners(): void {\n    // Keyboard controls\n    document.addEventListener('keydown', event => this.handleKeyDown(event));\n\n    // Mouse/touch controls\n    this.canvas.addEventListener('click', event => this.handleClick(event));\n    this.canvas.addEventListener('touchstart', event =>\n      this.handleTouch(event),\n    );\n\n    // Window visibility changes\n    document.addEventListener('visibilitychange', () =>\n      this.handleVisibilityChange(),\n    );\n\n    // Prevent context menu on right click\n    this.canvas.addEventListener('contextmenu', e => e.preventDefault());\n  }\n\n  /**\n   * Handle keyboard input\n   */\n  private handleKeyDown(event: KeyboardEvent): void {\n    const { code } = event;\n\n    switch (code) {\n      case 'Space':\n      case 'ArrowUp':\n        if (this.gameStore.gameState === 'playing') {\n          this.handleJump();\n        }\n        event.preventDefault();\n        break;\n\n      case 'KeyP':\n        if (this.gameStore.gameState === 'playing') {\n          this.gameActions.setGameState('paused');\n        } else if (this.gameStore.gameState === 'paused') {\n          this.gameActions.setGameState('playing');\n        }\n        break;\n\n      case 'KeyM':\n        audioManager.toggleMute();\n        break;\n\n      case 'Escape':\n        if (this.gameStore.gameState === 'playing') {\n          this.gameActions.setGameState('paused');\n        }\n        break;\n    }\n  }\n\n  /**\n   * Handle mouse clicks\n   */\n  private handleClick(event: MouseEvent): void {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    switch (this.gameStore.gameState) {\n      case 'gameOver':\n        this.handleGameOverClick(x, y);\n        break;\n\n      case 'menu':\n        this.handleMenuClick(x, y);\n        break;\n\n      case 'playing':\n        this.handleJump();\n        break;\n    }\n  }\n\n  /**\n   * Handle touch events\n   */\n  private handleTouch(event: TouchEvent): void {\n    event.preventDefault();\n\n    if (this.gameStore.gameState === 'playing') {\n      this.handleJump();\n    }\n  }\n\n  /**\n   * Handle visibility changes (pause when tab is hidden)\n   */\n  private handleVisibilityChange(): void {\n    if (document.hidden && this.gameStore.gameState === 'playing') {\n      this.gameActions.setGameState('paused');\n    }\n  }\n\n  /**\n   * Handle jump action\n   */\n  private handleJump(): void {\n    if (this.roundJustStarted) {\n      (character as any).gravity = 0.5;\n      this.roundJustStarted = false;\n    }\n\n    character.jump();\n    playJumpSound();\n  }\n\n  /**\n   * Handle game over screen clicks\n   */\n  private handleGameOverClick(x: number, y: number): void {\n    const buttonX = this.canvas.width / 2 - 100;\n    const buttonY = this.canvas.height / 2 + 20;\n    const buttonWidth = 200;\n    const buttonHeight = 50;\n\n    if (\n      x >= buttonX &&\n      x <= buttonX + buttonWidth &&\n      y >= buttonY &&\n      y <= buttonY + buttonHeight\n    ) {\n      this.restartGame();\n    }\n  }\n\n  /**\n   * Handle menu screen clicks\n   */\n  private handleMenuClick(x: number, y: number): void {\n    const buttonX = this.canvas.width / 2 - 100;\n    const buttonY = this.canvas.height / 2 + 20;\n    const buttonWidth = 200;\n    const buttonHeight = 50;\n\n    if (\n      x >= buttonX &&\n      x <= buttonX + buttonWidth &&\n      y >= buttonY &&\n      y <= buttonY + buttonHeight\n    ) {\n      // Track menu interaction\n      analyticsService.trackUserInteraction({\n        event: 'menu_click',\n        element: 'start_game_button',\n      });\n\n      this.startGame();\n    }\n  }\n\n  /**\n   * Start a new game\n   */\n  private async startGame(): Promise<void> {\n    try {\n      this.gameActions.setGameState('playing');\n      this.gameActions.resetScore();\n\n      // Set default category if none selected\n      if (!this.gameStore.selectedCategoryId) {\n        this.gameActions.setSelectedCategory(9); // General Knowledge\n      }\n\n      // Track game start\n      analyticsService.trackGameplayEvent({\n        event: 'game_start',\n        category: this.gameStore.selectedCategoryId?.toString() || '9',\n        difficulty: 'normal',\n      });\n\n      playBackgroundMusic();\n      await this.resetForNewRound();\n    } catch (error) {\n      console.error('Failed to start game:', error);\n      this.showTemporaryMessage('Failed to start game', 120, 'red');\n    }\n  }\n\n  /**\n   * Restart the game\n   */\n  private restartGame(): void {\n    this.gameActions.resetGame();\n    clearObstacles();\n    clearParticles();\n    this.startGame();\n  }\n\n  /**\n   * Reset for a new round\n   */\n  private async resetForNewRound(): Promise<void> {\n    character.reset(this.canvas.height);\n\n    try {\n      await triviaService.fetchQuestion(this.gameStore.selectedCategoryId || 9);\n      generateWallWithTunnels(this.canvas, questionState);\n\n      this.collisionProcessed = false;\n      this.roundJustStarted = true;\n    } catch (error) {\n      console.error('Failed to reset for new round:', error);\n      this.showTemporaryMessage('Failed to load question', 120, 'red');\n    }\n  }\n\n  /**\n   * Handle game over\n   */\n  private gameOver(): void {\n    stopBackgroundMusic();\n    playGameOverSound();\n    createExplosion(character.x, character.y);\n\n    // Track game end\n    analyticsService.trackGameplayEvent({\n      event: 'game_end',\n      score: this.gameStore.score.value,\n      category: this.gameStore.selectedCategoryId?.toString() || '9',\n      difficulty: 'normal',\n      duration: Date.now() - Date.now(),\n    });\n\n    this.gameActions.setGameState('gameOver');\n  }\n\n  /**\n   * Show temporary message\n   */\n  private showTemporaryMessage(\n    text: string,\n    durationInFrames: number,\n    color = 'white',\n  ): void {\n    this.displayMessage = { text, ttl: durationInFrames, color };\n  }\n\n  /**\n   * Main game loop\n   */\n  private startGameLoop(): void {\n    const gameLoop = (currentTime: number): void => {\n      const deltaTime = currentTime - this.lastFrameTime;\n      this.lastFrameTime = currentTime;\n\n      // Calculate performance metrics\n      const updateStartTime = performance.now();\n      this.update(deltaTime);\n      const updateEndTime = performance.now();\n\n      const renderStartTime = performance.now();\n      this.render();\n      const renderEndTime = performance.now();\n\n      this.performanceMetrics = {\n        fps: 1000 / deltaTime,\n        frameTime: deltaTime,\n        updateTime: updateEndTime - updateStartTime,\n        renderTime: renderEndTime - renderStartTime,\n      };\n\n      // Track performance metrics periodically (every 5 seconds)\n      if (Math.random() < 0.01) {\n        // ~1% of frames at 60fps = ~every 1.6 seconds\n        analyticsService.trackPerformance({\n          event: 'performance_metric',\n          metric: 'fps',\n          value: this.performanceMetrics.fps,\n          context: this.gameStore.gameState,\n        });\n      }\n\n      this.animationId = requestAnimationFrame(gameLoop);\n    };\n\n    this.animationId = requestAnimationFrame(gameLoop);\n  }\n\n  /**\n   * Update game logic\n   */\n  private update(deltaTime: number): void {\n    // deltaTime parameter reserved for future use in frame-rate dependent calculations\n    void deltaTime; // Acknowledge parameter for future use\n    if (!this.assets) return;\n\n    switch (this.gameStore.gameState) {\n      case 'playing':\n        this.updateGameplay();\n        break;\n\n      case 'paused':\n        // Don't update gameplay when paused\n        break;\n\n      default:\n        // Update particles and other visual effects in all states\n        updateParticles();\n        break;\n    }\n\n    // Update display message timer\n    if (this.displayMessage.ttl > 0) {\n      this.displayMessage.ttl--;\n    }\n  }\n\n  /**\n   * Update gameplay logic\n   */\n  private updateGameplay(): void {\n    character.update();\n    updateObstacles(this.gameStore.gameSpeed);\n    updateParticles();\n\n    // Check collisions\n    if (!this.collisionProcessed) {\n      const collisionResult = checkCollisions(character, this.canvas);\n\n      if (collisionResult) {\n        this.handleCollision(collisionResult);\n      }\n    }\n\n    // Check if obstacle passed without collision (incorrect answer)\n    // This is a simplified check - in production, you'd want more sophisticated logic\n    // const currentObstacles = this.gameStore; // Get from store or obstacles module\n    // Implementation depends on obstacle system...\n  }\n\n  /**\n   * Handle collision results\n   */\n  private handleCollision(result: string): void {\n    this.collisionProcessed = true;\n\n    switch (result) {\n      case 'correct':\n        this.handleCorrectAnswer();\n        break;\n\n      case 'incorrect':\n        this.handleIncorrectAnswer();\n        break;\n\n      case 'wall':\n      case 'ceiling':\n      case 'floor':\n        this.handleWallCollision();\n        break;\n    }\n  }\n\n  /**\n   * Handle correct answer\n   */\n  private handleCorrectAnswer(): void {\n    playScoreSound();\n    this.gameActions.incrementScore();\n    this.gameActions.addExperience(10);\n    this.showTemporaryMessage(t('game.correct'), 60, 'green');\n\n    // Track correct answer\n    analyticsService.trackGameplayEvent({\n      event: 'question_answered',\n      correct: true,\n      category: this.gameStore.selectedCategoryId?.toString() || '9',\n      questionType: 'multiple',\n    });\n\n    // Increase difficulty\n    const newSpeed = Math.min(this.gameStore.gameSpeed + 0.2, 12);\n    this.gameActions.setGameSpeed(newSpeed);\n\n    setTimeout(() => {\n      this.resetForNewRound().catch(console.error);\n    }, 500);\n  }\n\n  /**\n   * Handle incorrect answer\n   */\n  private handleIncorrectAnswer(): void {\n    this.showTemporaryMessage(t('game.incorrect'), 60, 'red');\n    this.gameActions.decrementLives();\n\n    // Track incorrect answer\n    analyticsService.trackGameplayEvent({\n      event: 'question_answered',\n      correct: false,\n      category: this.gameStore.selectedCategoryId?.toString() || '9',\n      questionType: 'multiple',\n    });\n\n    if (this.gameStore.lives > 0) {\n      setTimeout(() => {\n        this.resetForNewRound().catch(console.error);\n      }, 500);\n    }\n  }\n\n  /**\n   * Handle wall collision\n   */\n  private handleWallCollision(): void {\n    if (this.gameStore.hasShield) {\n      this.gameActions.setShield(false);\n      this.showTemporaryMessage(t('game.shieldUsed'), 60, 'blue');\n      // Push obstacles back\n      setTimeout(() => {\n        this.collisionProcessed = false;\n      }, 100);\n    } else {\n      this.gameOver();\n    }\n  }\n\n  /**\n   * Render the game\n   */\n  private render(): void {\n    if (!this.assets) {\n      this.showLoadingScreen();\n      return;\n    }\n\n    // Clear canvas\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    // Draw background\n    this.ctx.drawImage(\n      this.assets.background,\n      0,\n      0,\n      this.canvas.width,\n      this.canvas.height,\n    );\n\n    // Render based on game state\n    switch (this.gameStore.gameState) {\n      case 'menu':\n        this.renderMenu();\n        break;\n\n      case 'playing':\n      case 'paused':\n        this.renderGameplay();\n        if (this.gameStore.gameState === 'paused') {\n          this.renderPauseOverlay();\n        }\n        break;\n\n      case 'gameOver':\n        this.renderGameplay();\n        this.renderGameOverScreen();\n        break;\n    }\n\n    // Always render particles\n    drawParticles(this.ctx);\n\n    // Render performance metrics in debug mode\n    if (process.env.NODE_ENV === 'development') {\n      this.renderDebugInfo();\n    }\n  }\n\n  /**\n   * Render menu screen\n   */\n  private renderMenu(): void {\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    this.ctx.font = '40px \"Press Start 2P\"';\n    this.ctx.fillStyle = 'white';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(\n      t('game.title'),\n      this.canvas.width / 2,\n      this.canvas.height / 2 - 80,\n    );\n\n    // Start button\n    this.ctx.fillStyle = '#FF6A00';\n    this.ctx.fillRect(\n      this.canvas.width / 2 - 100,\n      this.canvas.height / 2 + 20,\n      200,\n      50,\n    );\n    this.ctx.font = '20px \"Press Start 2P\"';\n    this.ctx.fillStyle = 'white';\n    this.ctx.fillText(\n      t('game.startGame'),\n      this.canvas.width / 2,\n      this.canvas.height / 2 + 55,\n    );\n\n    // Stats display\n    this.renderStats();\n  }\n\n  /**\n   * Render gameplay elements\n   */\n  private renderGameplay(): void {\n    // Draw character\n    character.draw(this.ctx, this.assets!.character);\n\n    // Draw obstacles\n    drawObstacles(this.ctx, this.assets!.obstacle);\n\n    // Draw UI elements\n    this.renderUI();\n  }\n\n  /**\n   * Render UI elements\n   */\n  private renderUI(): void {\n    // Score\n    this.ctx.font = '20px \"Press Start 2P\"';\n    this.ctx.fillStyle = 'white';\n    this.ctx.textAlign = 'left';\n    this.ctx.fillText(\n      `${t('game.score')}: ${this.gameStore.score.value}`,\n      10,\n      30,\n    );\n\n    // Lives\n    this.ctx.fillText(`${t('game.lives')}: ${this.gameStore.lives}`, 10, 60);\n\n    // Level\n    this.ctx.fillText(`${t('game.level')}: ${this.gameStore.level}`, 10, 90);\n\n    // Shield indicator\n    if (this.gameStore.hasShield) {\n      this.ctx.fillStyle = 'blue';\n      this.ctx.fillText('', 10, 120);\n    }\n\n    // Question\n    if (questionState.display) {\n      this.renderQuestion();\n    }\n\n    // Temporary messages\n    if (this.displayMessage.ttl > 0) {\n      this.renderMessage(this.displayMessage);\n    }\n  }\n\n  /**\n   * Render question\n   */\n  private renderQuestion(): void {\n    this.ctx.font = '18px \"Press Start 2P\"';\n    this.ctx.fillStyle = 'white';\n    this.ctx.textAlign = 'center';\n\n    // const maxWidth = this.canvas.width * 0.8;\n    const x = this.canvas.width / 2;\n    const y = 50;\n\n    // Simple text rendering - could be improved with word wrapping\n    this.ctx.fillText(questionState.text, x, y);\n  }\n\n  /**\n   * Render temporary message\n   */\n  private renderMessage(message: DisplayMessage): void {\n    this.ctx.font = '30px \"Press Start 2P\"';\n    this.ctx.fillStyle = message.color;\n    this.ctx.textAlign = 'center';\n\n    // Background\n    const textWidth = this.ctx.measureText(message.text).width;\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n    this.ctx.fillRect(\n      this.canvas.width / 2 - textWidth / 2 - 20,\n      this.canvas.height / 2 - 40,\n      textWidth + 40,\n      70,\n    );\n\n    // Text\n    this.ctx.fillStyle = message.color;\n    this.ctx.fillText(\n      message.text,\n      this.canvas.width / 2,\n      this.canvas.height / 2 + 10,\n    );\n  }\n\n  /**\n   * Render game over screen\n   */\n  private renderGameOverScreen(): void {\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    this.ctx.font = '40px \"Press Start 2P\"';\n    this.ctx.fillStyle = 'white';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(\n      t('game.gameOver'),\n      this.canvas.width / 2,\n      this.canvas.height / 2 - 80,\n    );\n\n    this.ctx.font = '20px \"Press Start 2P\"';\n    this.ctx.fillText(\n      `${t('game.score')}: ${this.gameStore.score.value}`,\n      this.canvas.width / 2,\n      this.canvas.height / 2 - 20,\n    );\n\n    // Play Again button\n    this.ctx.fillStyle = '#FF6A00';\n    this.ctx.fillRect(\n      this.canvas.width / 2 - 100,\n      this.canvas.height / 2 + 20,\n      200,\n      50,\n    );\n    this.ctx.fillStyle = 'white';\n    this.ctx.fillText(\n      t('game.playAgain'),\n      this.canvas.width / 2,\n      this.canvas.height / 2 + 55,\n    );\n  }\n\n  /**\n   * Render pause overlay\n   */\n  private renderPauseOverlay(): void {\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    this.ctx.font = '40px \"Press Start 2P\"';\n    this.ctx.fillStyle = 'white';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(\n      t('game.paused'),\n      this.canvas.width / 2,\n      this.canvas.height / 2,\n    );\n\n    this.ctx.font = '16px \"Press Start 2P\"';\n    this.ctx.fillText(\n      t('game.pressToContinue'),\n      this.canvas.width / 2,\n      this.canvas.height / 2 + 50,\n    );\n  }\n\n  /**\n   * Render statistics\n   */\n  private renderStats(): void {\n    const stats = this.gameStore.statistics;\n    const y = this.canvas.height - 100;\n\n    this.ctx.font = '12px \"Press Start 2P\"';\n    this.ctx.fillStyle = 'white';\n    this.ctx.textAlign = 'center';\n\n    this.ctx.fillText(\n      `Best Score: ${stats.bestScore}`,\n      this.canvas.width / 2,\n      y,\n    );\n    this.ctx.fillText(\n      `Games Played: ${stats.totalGamesPlayed}`,\n      this.canvas.width / 2,\n      y + 20,\n    );\n  }\n\n  /**\n   * Render debug information\n   */\n  private renderDebugInfo(): void {\n    const metrics = this.performanceMetrics;\n\n    this.ctx.font = '12px monospace';\n    this.ctx.fillStyle = 'yellow';\n    this.ctx.textAlign = 'left';\n\n    this.ctx.fillText(\n      `FPS: ${Math.round(metrics.fps)}`,\n      10,\n      this.canvas.height - 60,\n    );\n    this.ctx.fillText(\n      `Frame: ${metrics.frameTime.toFixed(1)}ms`,\n      10,\n      this.canvas.height - 45,\n    );\n    this.ctx.fillText(\n      `Update: ${metrics.updateTime.toFixed(1)}ms`,\n      10,\n      this.canvas.height - 30,\n    );\n    this.ctx.fillText(\n      `Render: ${metrics.renderTime.toFixed(1)}ms`,\n      10,\n      this.canvas.height - 15,\n    );\n  }\n\n  /**\n   * Show loading screen\n   */\n  private showLoadingScreen(): void {\n    this.ctx.fillStyle = 'black';\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    // Use fallback fonts and text for better compatibility\n    this.ctx.font = '20px \"Press Start 2P\", monospace, sans-serif';\n    this.ctx.fillStyle = 'white';\n    this.ctx.textAlign = 'center';\n\n    // Use fallback text if i18n is not ready\n    const loadingText =\n      typeof t === 'function' ? t('common.loading') : 'Loading...';\n    this.ctx.fillText(\n      loadingText,\n      this.canvas.width / 2,\n      this.canvas.height / 2,\n    );\n\n    // Add SprintSolve title\n    this.ctx.font = '32px \"Press Start 2P\", monospace, sans-serif';\n    this.ctx.fillStyle = '#FF6A00';\n    this.ctx.fillText(\n      'SprintSolve',\n      this.canvas.width / 2,\n      this.canvas.height / 2 - 60,\n    );\n  }\n\n  /**\n   * Show error screen\n   */\n  private showErrorScreen(message: string): void {\n    this.ctx.fillStyle = 'darkred';\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    this.ctx.font = '16px \"Press Start 2P\"';\n    this.ctx.fillStyle = 'white';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(\n      t('common.error'),\n      this.canvas.width / 2,\n      this.canvas.height / 2 - 20,\n    );\n    this.ctx.fillText(\n      message,\n      this.canvas.width / 2,\n      this.canvas.height / 2 + 20,\n    );\n  }\n\n  /**\n   * Destroy the game engine\n   */\n  public destroy(): void {\n    if (this.animationId) {\n      cancelAnimationFrame(this.animationId);\n    }\n\n    stopBackgroundMusic();\n    clearObstacles();\n    clearParticles();\n\n    // Remove event listeners\n    window.removeEventListener('resize', this.resizeCanvas);\n    document.removeEventListener('keydown', this.handleKeyDown);\n    document.removeEventListener(\n      'visibilitychange',\n      this.handleVisibilityChange,\n    );\n  }\n}\n\n// Initialize the game when the DOM is loaded\nlet gameEngine: GameEngine | null = null;\n\nasync function initGame(): Promise<void> {\n  try {\n    gameEngine = new GameEngine('gameCanvas');\n    await gameEngine.init();\n  } catch (error) {\n    console.error('Failed to initialize game:', error);\n  }\n}\n\n// Auto-start when DOM is ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initGame);\n} else {\n  initGame().catch(console.error);\n}\n\n// Handle page unload\nwindow.addEventListener('beforeunload', () => {\n  if (gameEngine) {\n    gameEngine.destroy();\n  }\n});\n\n// Export for potential external access\nexport { GameEngine, gameEngine };\n"],"names":["CharacterImpl","ctx","characterImage","angle","canvasHeight","halfSize","character","wrapText","context","text","x","y","maxWidth","lineHeight","words","line","currentY","lines","word","testLine","i","randomBetween","min","max","randomIntBetween","ObstacleImpl","width","height","image","wallColor","gameSpeed","TunnelImpl","isCorrect","answerText","textColor","ObstaclePool","obstacle","tunnel","wallImage","obstaclePool","WallGenerator","canvas","question","characterSize","wallWidth","numberOfTunnels","tunnelHeight","totalTunnelHeight","totalWallHeight","wallSegmentHeight","tunnelY","tunnels","amplitude","frequency","index","offset","CollisionDetector","characterHalfSize","obstacles","wallX","charRight","charLeft","charHalfSize","wallGenerator","collisionDetector","generateWallWithTunnels","questionState","checkCollisions","updateObstacles","drawObstacles","clearObstacles","QuestionState","TriviaService","html","txt","array","shuffled","j","apiQuestion","incorrectAnswers","answer","correctAnswer","allAnswers","correctIndex","url","cacheKey","cached","response","data","error","categoryId","difficulty","difficultyParam","transformed","fallbackQuestion","amount","selectedIndex","categories","questions","key","triviaService","subscribeWithSelectorImpl","fn","set","get","api","origSubscribe","selector","optListener","options","listener","equalityFn","currentSlice","state","nextSlice","previousSlice","subscribeWithSelector","createJSONStorage","getStorage","storage","name","_a","parse","str2","str","newValue","toThenable","input","result","onFulfilled","_onRejected","e","_onFulfilled","onRejected","oldImpl","config","baseOptions","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","args","thenableSerialize","setItem","errorInSync","thenable","serializedValue","savedSetState","replace","configResult","stateFromStorage","hydrate","cb","postRehydrationCallback","storageValue","deserializedStorageValue","migratedState","_a2","newOptions","newImpl","_b","migrationResult","migrated","persistImpl","__vite_import_meta_env__","persist","defaultSettings","defaultStatistics","useGameStore","create","stats","newScore","newXP","newLevel","hasShield","speed","categoriesPlayed","lives","newLives","level","xp","achievement","achievements","settings","useGameActions","statistics","previousStatistics","previousAchievements","newAchievements","AUDIO_ASSETS","AudioManagerImpl","Howler","preloadPromises","loadingPromise","resolve","sound","Howl","volume","volumeMultiplier","finalVolume","bgMusic","allKeys","audioManager","playJumpSound","playScoreSound","playGameOverSound","playBackgroundMusic","stopBackgroundMusic","ParticleImpl","alpha","ParticlePool","particle","particlePool","createExplosion","particleCount","offsetX","offsetY","updateParticles","drawParticles","clearParticles","loadImage","src","reject","img","ASSET_PATHS","loadGameAssets","background","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","arr","randomUUID","native","v4","buf","rnds","AnalyticsService","event","eventData","eventName","properties","page","title","sessionDuration","totalSessions","averageSessionDuration","bounceRate","consent","define_process_env_default","existingSession","session","newSession","uuidv4","totalSessionTime","shortSessions","script","eventType","events","list","entry","navEntry","lastTime","frames","measureFPS","currentTime","fps","analyticsService","isString","obj","defer","res","rej","promise","makeString","object","copy","a","s","m","lastOfPathSeparatorRegExp","cleanKey","canNotTraverseDeeper","getLastOfPath","path","Empty","stack","stackIndex","setPath","k","p","last","pushPath","concat","getPath","getPathWithDefaults","defaultData","value","deepExtend","target","source","overwrite","prop","regexEscape","_entityMap","escape","RegExpCache","capacity","pattern","regExpFromCache","regExpNew","chars","looksLikeObjectPathRegExpCache","looksLikeObjectPath","nsSeparator","keySeparator","possibleChars","c","r","matched","ki","deepFind","tokens","current","next","nextPath","getCleanedCode","code","consoleLogger","type","Logger","concreteLogger","_len","_key","_len2","_key2","_len3","_key3","_len4","_key4","lvl","prefix","debugOnly","moduleName","baseLogger","EventEmitter","numListeners","_ref","observer","numTimesAdded","_ref2","ResourceStore","ns","lng","ignoreJSONStructure","resources","deep","pack","v","postProcessor","module","processors","translator","processor","checkedLoadedFor","Translator","services","resolved","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","parts","keys","lastKey","returnDetails","namespace","appendNamespaceToCIMode","resUsedKey","resExactUsedKey","resType","noObject","joinArrays","handleAsObjectInI18nFormat","handleAsObject","resTypeIsArray","newKeyToUse","deepKey","usedDefault","usedKey","needsPluralHandling","hasDefaultValue","defaultValueSuffix","defaultValueSuffixOrdinalFallback","needsZeroSuffixLookup","defaultValue","resForMissing","updateMissing","fk","lngs","fallbackLngs","send","l","specificDefaultValue","defaultForMissing","language","suffixes","suffix","_this","skipOnVariables","nestBef","nb","na","nestAft","postProcess","postProcessorNames","found","exactUsedKey","usedLng","usedNS","extracted","needsContextHandling","codes","finalKeys","pluralSuffix","zeroSuffix","ordinalPrefix","contextKey","possibleKey","optionsKeys","useOptionsReplaceForData","option","capitalize","string","LanguageUtil","formattedCode","specialCases","part","cleanedLng","lngOnly","supportedLng","fallbacks","fallbackCode","fallbackCodes","addCode","fc","sets","_rulesPluralsTypes","n","nonIntlVersions","intlVersions","suffixesOrder","createRules","rules","PluralResolver","languageUtils","cleanedCode","rule","lngPart","pluralCategory1","pluralCategory2","pluralCategory","number","count","idx","returnSuffix","deepFindWithDefaults","regexSafe","val","Interpolator","escape$1","escapeValue","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapeSuffix","unescapePrefix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","getOrResetRegExp","existingRegExp","match","replaces","handleFormat","f","missingInterpolationHandler","todo","matchedVar","temp","safeValue","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","matchedSingleQuotes","matchedDoubleQuotes","formatters","doReduce","elem","parseFormatStr","formatStr","formatName","formatOptions","optStr","opt","rest","trimmedKey","createCachedFormatter","cache","optForCache","formatter","Formatter","format","formats","lastIndex","mem","formatted","valOptions","removePending","q","Connector","backend","store","languages","callback","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","err","loaded","loadedKeys","fcName","tried","wait","resolver","fallbackValue","isUpdate","clb","opts","ret","transformOptions","noop","bindMemberFunctions","inst","I18n","defOpts","createClassOnDemand","ClassOrObject","lu","deferred","load","finish","t","usedCallback","append","li","lngInLngs","_this2","setLngProps","done","setLng","keyPrefix","_this3","fixedT","resultKey","fallbackLng","lastLng","loadNotPending","loadState","preResult","preloaded","newLngs","rtlLngs","forkResourceStore","mergedOptions","clone","instance","_typeof","o","hasXMLHttpRequest","isPromise","maybePromise","makePromise","__global__","global","__globalThis__","F","globalThis","exports","support","isDataView","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","items","iterator","Headers","headers","header","oldValue","thisArg","consumed","body","fileReaderReady","reader","readBlobAsArrayBuffer","blob","readBlobAsText","readArrayBufferAsText","view","bufferClone","Body","rejected","isConsumed","decode","methods","normalizeMethod","method","upcased","Request","reParamSearch","reQueryString","form","bytes","split","parseHeaders","rawHeaders","preProcessedHeaders","Response","bodyInit","redirectStatuses","status","message","fetch","init","request","xhr","abortXhr","fixUrl","fetchApi","require","require$$0","ownKeys","_objectSpread","_defineProperty","_toPropertyKey","_toPrimitive","XmlHttpRequestApi","ActiveXObjectApi","fetchNode","fetchNode.default","addQueryString","params","queryString","paramName","fetchIt","fetchOptions","altFetch","altResponse","omitFetchOptions","requestWithFetch","payload","reqOptions","requestWithXmlHttpRequest","h","_classCallCheck","_defineProperties","_createClass","getDefaults","Backend","allOptions","timer","loadUrlLanguages","loadUrlNamespaces","loadPath","resolvedLoadPath","errorMessage","isNetworkError","term","parseErr","_this4","finished","dataArray","resArray","addPath","_this5","_this$services","backendConnector","logger","currentLanguage","toPrimitive","toPropertyKey","each","slice","defaults","fieldContentRegExp","serializeCookie","maxAge","sameSite","cookie","minutes","domain","cookieOptions","nameEQ","ca","cookie$1","querystring","search","query","pos","hasLocalStorageSupport","localStorageAvailable","testKey","localStorage","hasSessionStorageSupport","sessionStorageAvailable","sessionStorage","navigator$1","htmlTag","subdomain","lookupFromSubdomainIndex","canCookies","order","Browser","i18nOptions","detector","detectionOrder","detected","detectorName","lookup","d","caches","cacheName","SUPPORTED_LANGUAGES","DEFAULT_TRANSLATIONS","I18nService","fallbackLanguage","debug","i18n","LanguageDetector","date","saved","browserLang","lang","langCode","isRTL","htmlElement","i18nService","ConsentManager","hasConsent","consentVersion","preferences","enabled","acceptAllBtn","acceptNecessaryBtn","preferencesBtn","closeBtn","saveBtn","cancelBtn","overlay","closeModal","analyticsCheckbox","marketingCheckbox","preferencesCheckbox","styleId","style","LanguageSelector","currentButton","button","langConfig","flagSpan","nameSpan","chevron","item","checkmark","currentIndex","nextIndex","prevIndex","GameEngine","canvasId","rect","buttonX","buttonY","durationInFrames","color","gameLoop","deltaTime","updateStartTime","updateEndTime","renderStartTime","renderEndTime","collisionResult","newSpeed","textWidth","metrics","loadingText","gameEngine","initGame"],"mappings":"+lCAEA,MAAMA,EAAoC,CACxB,KAAO,GACP,QAAU,GACV,cAAgB,IAEzB,EAAI,IACJ,EAAI,EACJ,WAAa,EAEb,MAAa,CAClB,KAAK,WAAa,KAAK,aACzB,CAEO,KACLC,EACAC,EACM,CACN,GAAI,CAACA,EAAgB,OAErBD,EAAI,KAAA,EACJA,EAAI,UAAU,KAAK,EAAG,KAAK,CAAC,EAG5B,MAAME,EAAQ,KAAK,MAAM,KAAK,WAAY,EAAE,EAAI,GAChDF,EAAI,OAAOE,CAAK,EAGhBF,EAAI,UACFC,EACA,CAAC,KAAK,KAAO,EACb,CAAC,KAAK,KAAO,EACb,KAAK,KACL,KAAK,IAAA,EAGPD,EAAI,QAAA,CACN,CAEO,QAAe,CACpB,KAAK,YAAc,KAAK,QACxB,KAAK,GAAK,KAAK,UACjB,CAEO,MAAMG,EAA4B,CACvC,KAAK,EAAIA,EAAe,EACxB,KAAK,WAAa,CACpB,CAEO,WAKL,CACA,MAAMC,EAAW,KAAK,KAAO,EAC7B,MAAO,CACL,IAAK,KAAK,EAAIA,EACd,OAAQ,KAAK,EAAIA,EACjB,KAAM,KAAK,EAAIA,EACf,MAAO,KAAK,EAAIA,CAAA,CAEpB,CACF,CAEO,MAAMC,EAAY,IAAIN,GC/DtB,SAASO,GACdC,EACAC,EACAC,EACAC,EACAC,EACAC,EACM,CACN,MAAMC,EAAQL,EAAK,MAAM,GAAG,EAC5B,IAAIM,EAAO,GACPC,EAAWL,EAGf,MAAMM,EAAkB,CAAA,EAExB,UAAWC,KAAQJ,EAAO,CACxB,MAAMK,EAAWJ,EAAOG,EAAO,IACfV,EAAQ,YAAYW,CAAQ,EAEhC,MAAQP,GAAYG,EAAK,OAAS,GAC5CE,EAAM,KAAKF,CAAI,EACfA,EAAOG,EAAO,KAEdH,EAAOI,CAEX,CACAF,EAAM,KAAKF,CAAI,EAGfC,IAAcC,EAAM,OAAS,GAAKJ,EAAc,EAEhD,QAASO,EAAI,EAAGA,EAAIH,EAAM,OAAQG,IAChCZ,EAAQ,SAASS,EAAMG,CAAC,EAAG,OAAQV,EAAGM,EAAWI,EAAIP,CAAU,CAEnE,CAgCO,SAASQ,GAAcC,EAAaC,EAAqB,CAC9D,OAAO,KAAK,OAAA,GAAYA,EAAMD,GAAOA,CACvC,CAKO,SAASE,GAAiBF,EAAaC,EAAqB,CACjE,OAAO,KAAK,MAAM,KAAK,OAAA,GAAYA,EAAMD,EAAM,EAAE,EAAIA,CACvD,CCjEA,MAAMG,EAAiC,CAC9B,EACA,EACS,MACA,OACA,OAAS,GAEzB,YAAYf,EAAWC,EAAWe,EAAeC,EAAgB,CAC/D,KAAK,EAAIjB,EACT,KAAK,EAAIC,EACT,KAAK,MAAQe,EACb,KAAK,OAASC,CAChB,CAEO,KAAK1B,EAA+B2B,EAAgC,CACzE,MAAMC,EAAY,UAElB5B,EAAI,UAAY4B,EAChB5B,EAAI,SAAS,KAAK,EAAG,KAAK,EAAG,KAAK,MAAO,KAAK,MAAM,EAGpDA,EAAI,YAAc,UAClBA,EAAI,UAAY,EAChBA,EAAI,WAAW,KAAK,EAAG,KAAK,EAAG,KAAK,MAAO,KAAK,MAAM,EAGlD2B,GACF3B,EAAI,UAAU2B,EAAO,KAAK,EAAG,KAAK,EAAG,KAAK,MAAO,KAAK,MAAM,CAEhE,CAEO,OAAOE,EAAyB,CACrC,KAAK,GAAKA,CACZ,CAEO,WAAqE,CAC1E,MAAO,CACL,EAAG,KAAK,EACR,EAAG,KAAK,EACR,MAAO,KAAK,MACZ,OAAQ,KAAK,MAAA,CAEjB,CAEO,MAAMpB,EAAWC,EAAWe,EAAeC,EAAsB,CACtE,KAAK,EAAIjB,EACT,KAAK,EAAIC,EACT,OAAO,OAAO,KAAM,CAAE,MAAAe,EAAO,OAAAC,EAAQ,CACvC,CACF,CAKA,MAAMI,EAA6B,CAC1B,EACA,EACS,MACA,OACA,UACA,WACA,KAAO,SAEvB,YACErB,EACAC,EACAe,EACAC,EACAK,EACAC,EACA,CACA,KAAK,EAAIvB,EACT,KAAK,EAAIC,EACT,KAAK,MAAQe,EACb,KAAK,OAASC,EACd,KAAK,UAAYK,EACjB,KAAK,WAAaC,CACpB,CAEO,KAAKhC,EAAqC,CAE/C,MAAMiC,EAAY,KAAK,UAAY,UAAY,UAE/CjC,EAAI,UAAYiC,EAChBjC,EAAI,KAAO,wBACXA,EAAI,UAAY,SAEhB,MAAMW,EAAW,KAAK,MAAQ,GACxBC,EAAa,GACbH,EAAI,KAAK,EAAI,KAAK,MAAQ,EAC1BC,EAAI,KAAK,EAAI,KAAK,OAAS,EAEjCJ,GAASN,EAAK,KAAK,WAAYS,EAAGC,EAAGC,EAAUC,CAAU,EACzDZ,EAAI,UAAY,MAClB,CAEO,OAAO6B,EAAyB,CACrC,KAAK,GAAKA,CACZ,CAEO,WAAqE,CAC1E,MAAO,CACL,EAAG,KAAK,EACR,EAAG,KAAK,EACR,MAAO,KAAK,MACZ,OAAQ,KAAK,MAAA,CAEjB,CAEO,MACLpB,EACAC,EACAe,EACAC,EACAK,EACAC,EACM,CACN,KAAK,EAAIvB,EACT,KAAK,EAAIC,EACT,OAAO,OAAO,KAAM,CAAE,MAAAe,EAAO,OAAAC,EAAQ,UAAAK,EAAW,WAAAC,EAAY,CAC9D,CACF,CAKA,MAAME,EAAa,CACA,aAA+B,CAAA,EAC/B,WAA2B,CAAA,EAC3B,gBAAkC,CAAA,EAClC,cAA8B,CAAA,EAC9B,YAAc,GAExB,eACLzB,EACAC,EACAe,EACAC,EACc,CACd,IAAIS,EAEJ,OAAI,KAAK,aAAa,OAAS,GAC7BA,EAAW,KAAK,aAAa,IAAA,EAC7BA,EAAS,MAAM1B,EAAGC,EAAGe,EAAOC,CAAM,GAElCS,EAAW,IAAIX,GAAaf,EAAGC,EAAGe,EAAOC,CAAM,EAGjD,KAAK,gBAAgB,KAAKS,CAAQ,EAC3BA,CACT,CAEO,aACL1B,EACAC,EACAe,EACAC,EACAK,EACAC,EACY,CACZ,IAAII,EAEJ,OAAI,KAAK,WAAW,OAAS,GAC3BA,EAAS,KAAK,WAAW,IAAA,EACzBA,EAAO,MAAM3B,EAAGC,EAAGe,EAAOC,EAAQK,EAAWC,CAAU,GAEvDI,EAAS,IAAIN,GAAWrB,EAAGC,EAAGe,EAAOC,EAAQK,EAAWC,CAAU,EAGpE,KAAK,cAAc,KAAKI,CAAM,EACvBA,CACT,CAEO,OAAOP,EAAyB,CAErC,QAASV,EAAI,KAAK,gBAAgB,OAAS,EAAGA,GAAK,EAAGA,IAAK,CACzD,MAAMgB,EAAW,KAAK,gBAAgBhB,CAAC,EACvCgB,EAAS,OAAON,CAAS,EAGrBM,EAAS,EAAIA,EAAS,MAAQ,IAChC,KAAK,gBAAgB,OAAOhB,EAAG,CAAC,EAC5B,KAAK,aAAa,OAAS,KAAK,aAClC,KAAK,aAAa,KAAKgB,CAAQ,EAGrC,CAGA,QAAShB,EAAI,KAAK,cAAc,OAAS,EAAGA,GAAK,EAAGA,IAAK,CACvD,MAAMiB,EAAS,KAAK,cAAcjB,CAAC,EACnCiB,EAAO,OAAOP,CAAS,EAGnBO,EAAO,EAAIA,EAAO,MAAQ,IAC5B,KAAK,cAAc,OAAOjB,EAAG,CAAC,EAC1B,KAAK,WAAW,OAAS,KAAK,aAChC,KAAK,WAAW,KAAKiB,CAAM,EAGjC,CACF,CAEO,KACLpC,EACAqC,EACM,CAEN,UAAWF,KAAY,KAAK,gBAC1BA,EAAS,KAAKnC,EAAKqC,CAAS,EAI9B,UAAWD,KAAU,KAAK,cACxBA,EAAO,KAAKpC,CAAG,CAEnB,CAEO,OAAc,CAEnB,UAAWmC,KAAY,KAAK,gBACtB,KAAK,aAAa,OAAS,KAAK,aAClC,KAAK,aAAa,KAAKA,CAAQ,EAInC,UAAWC,KAAU,KAAK,cACpB,KAAK,WAAW,OAAS,KAAK,aAChC,KAAK,WAAW,KAAKA,CAAM,EAI/B,KAAK,gBAAgB,OAAS,EAC9B,KAAK,cAAc,OAAS,CAC9B,CAEO,oBAA8C,CACnD,OAAO,KAAK,eACd,CAEO,kBAA0C,CAC/C,OAAO,KAAK,aACd,CAEO,UAKL,CACA,MAAO,CACL,gBAAiB,KAAK,gBAAgB,OACtC,cAAe,KAAK,cAAc,OAClC,gBAAiB,KAAK,aAAa,OACnC,cAAe,KAAK,WAAW,MAAA,CAEnC,CACF,CAGA,MAAME,EAAe,IAAIJ,GAKlB,MAAMK,EAAc,CACR,iBAAmB,IACnB,mBAAqB,EACrB,gBAAkB,IAE5B,wBACLC,EACAC,EACAC,EAAwB,GAClB,CACN,MAAMC,EAAY,KAAK,iBACjBC,EAAkB,KAAK,IAC3B,KAAK,mBACLH,EAAS,QAAQ,MAAA,EAEbI,EAAe,KAAK,IAAI,KAAK,gBAAiBH,EAAgB,CAAC,EAG/DI,EAAoBF,EAAkBC,EACtCE,EAAkBP,EAAO,OAASM,EAExC,GAAIC,EAAkB,EAAG,CACvB,QAAQ,MACN,0EAAA,EAEF,MACF,CAGA,MAAMC,EAAoBD,GAAmBH,EAAkB,GAC/D,IAAI7B,EAAW,EAGf,QAASI,EAAI,EAAGA,EAAIyB,EAAkB,EAAGzB,IAUvC,GARAmB,EAAa,eACXE,EAAO,MACPzB,EACA4B,EACAK,CAAA,EAIE7B,EAAIyB,GAAmBzB,EAAIsB,EAAS,QAAQ,OAAQ,CACtD,MAAMQ,EAAUlC,EAAWiC,EACrBjB,EAAYZ,IAAMsB,EAAS,cAC3BT,EAAaS,EAAS,QAAQtB,CAAC,GAAK,GAE1CmB,EAAa,aACXE,EAAO,MACPS,EACAN,EACAE,EACAd,EACAC,CAAA,EAGFjB,GAAYiC,EAAoBH,CAClC,CAEJ,CAEO,mBACLL,EACAC,EACAC,EAAwB,GAClB,CAEN,KAAK,wBAAwBF,EAAQC,EAAUC,CAAa,EAG5D,MAAMQ,EAAUZ,EAAa,iBAAA,EACvBa,EAAY,GACZC,EAAY,IAElBF,EAAQ,QAAQ,CAACd,EAAQiB,IAAU,CACjC,MAAMC,EAAS,KAAK,IAAI,KAAK,MAAQF,EAAYC,CAAK,EAAIF,EAC1Df,EAAO,GAAKkB,CACd,CAAC,CACH,CACF,CAKO,MAAMC,EAAkB,CACtB,gBACLlD,EACAmC,EACiB,CAEjB,MAAMgB,EAAoBnD,EAAU,KAAO,EAE3C,GAAIA,EAAU,EAAImD,GAAqB,EACrC,MAAO,UAET,GAAInD,EAAU,EAAImD,GAAqBhB,EAAO,OAC5C,MAAO,QAIT,MAAMiB,EAAYnB,EAAa,mBAAA,EACzBY,EAAUZ,EAAa,iBAAA,EAE7B,GAAImB,EAAU,SAAW,EACvB,OAAO,KAIT,MAAMC,EAAQD,EAAU,CAAC,EAAG,EACtBd,EAAYc,EAAU,CAAC,EAAG,MAC1BE,EAAYtD,EAAU,EAAImD,EAC1BI,EAAWvD,EAAU,EAAImD,EAG/B,GAAIG,EAAYD,GAASE,EAAWF,EAAQf,EAC1C,OAAO,KAIT,UAAWR,KAAYsB,EACrB,GAAI,KAAK,gBAAgBpD,EAAW8B,CAAQ,EAC1C,MAAO,OAKX,UAAWC,KAAUc,EACnB,GAAI,KAAK,oBAAoB7C,EAAW+B,CAAM,EAC5C,OAAOA,EAAO,UAAY,UAAY,YAK1C,MAAO,MACT,CAEQ,gBAAgB/B,EAAsB8B,EAA6B,CACzE,MAAM0B,EAAexD,EAAU,KAAO,EAEtC,OACEA,EAAU,EAAIwD,EAAe1B,EAAS,GACtC9B,EAAU,EAAIwD,EAAe1B,EAAS,EAAIA,EAAS,OACnD9B,EAAU,EAAIwD,EAAe1B,EAAS,GACtC9B,EAAU,EAAIwD,EAAe1B,EAAS,EAAIA,EAAS,MAEvD,CAEQ,oBAAoB9B,EAAsB+B,EAAyB,CACzE,OAAO/B,EAAU,GAAK+B,EAAO,GAAK/B,EAAU,GAAK+B,EAAO,EAAIA,EAAO,MACrE,CACF,CAGO,MAAM0B,GAAgB,IAAIvB,GACpBwB,GAAoB,IAAIR,GAGxBE,GAA4B,CAAA,EAC5BP,GAAwB,CAAA,EAE9B,SAASc,GACdxB,EACAyB,EACM,CACN3B,EAAa,MAAA,EACbwB,GAAc,wBAAwBtB,EAAQyB,CAAa,CAC7D,CAEO,SAASC,GACd7D,EACAmC,EACiB,CACjB,OAAOuB,GAAkB,gBAAgB1D,EAAWmC,CAAM,CAC5D,CAKO,SAAS2B,GAAgBtC,EAAyB,CACvDS,EAAa,OAAOT,CAAS,EAG7B4B,GAAU,OAAS,EACnBP,GAAQ,OAAS,EAEjBO,GAAU,KAAK,GAAGnB,EAAa,mBAAA,CAAoB,EACnDY,GAAQ,KAAK,GAAGZ,EAAa,iBAAA,CAAkB,CACjD,CAKO,SAAS8B,GACdpE,EACAqC,EACM,CACNC,EAAa,KAAKtC,EAAKqC,CAAS,CAClC,CAKO,SAASgC,IAAuB,CACrC/B,EAAa,MAAA,CACf,CCzdA,MAAMgC,EAAkC,CAC/B,KAAO,GACP,cAA+B,KAC/B,QAA6B,CAAA,EAC7B,QAAU,GAEV,OAAO7B,EAAmC,CAC3CA,EAAS,OAAS,SAAW,KAAK,KAAOA,EAAS,MAClDA,EAAS,gBAAkB,SAC7B,KAAK,cAAgBA,EAAS,eAC5BA,EAAS,UAAY,SAAW,KAAK,QAAU,CAAC,GAAGA,EAAS,OAAO,GACnEA,EAAS,UAAY,SAAW,KAAK,QAAUA,EAAS,QAC9D,CAEO,OAAc,CACnB,KAAK,KAAO,GACZ,KAAK,cAAgB,KACrB,KAAK,QAAU,CAAA,EACf,KAAK,QAAU,EACjB,CACF,CAEO,MAAMwB,GAAgB,IAAIK,GAK1B,MAAMC,EAAc,CACR,QAAU,sBACV,UAAY,IACZ,aAAe,IAAS,IAKjC,WAAWC,EAAsB,CACvC,MAAMC,EAAM,SAAS,cAAc,UAAU,EAC7C,OAAAA,EAAI,UAAYD,EACTC,EAAI,KACb,CAKQ,aAAgBC,EAAiB,CACvC,MAAMC,EAAW,CAAC,GAAGD,CAAK,EAC1B,QAASvD,EAAIwD,EAAS,OAAS,EAAGxD,EAAI,EAAGA,IAAK,CAC5C,MAAMyD,EAAI,KAAK,MAAM,KAAK,UAAYzD,EAAI,EAAE,EAC5C,CAACwD,EAASxD,CAAC,EAAGwD,EAASC,CAAC,CAAC,EAAI,CAACD,EAASC,CAAC,EAAID,EAASxD,CAAC,CAAE,CAC1D,CACA,OAAOwD,CACT,CAKQ,kBAAkBE,EAIxB,CACA,MAAMC,EAAmBD,EAAY,kBAAkB,IAAIE,GACzD,KAAK,WAAWA,CAAM,CAAA,EAElBC,EAAgB,KAAK,WAAWH,EAAY,cAAc,EAE1DI,EAAa,KAAK,aAAa,CAAC,GAAGH,EAAkBE,CAAa,CAAC,EACnEE,EAAeD,EAAW,QAAQD,CAAa,EAErD,MAAO,CACL,SAAU,KAAK,WAAWH,EAAY,QAAQ,EAC9C,QAASI,EACT,eAAgBC,CAAA,CAEpB,CAKA,MAAc,eAAkBC,EAAaC,EAA8B,CAEzE,MAAMC,EAAS,KAAK,MAAM,IAAID,CAAQ,EACtC,GAAIC,GAAU,KAAK,IAAA,EAAQA,EAAO,UAAY,KAAK,aACjD,OAAOA,EAAO,KAGhB,GAAI,CACF,MAAMC,EAAW,MAAM,MAAMH,CAAG,EAEhC,GAAI,CAACG,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,MAAMC,EAAQ,MAAMD,EAAS,KAAA,EAG7B,YAAK,MAAM,IAAIF,EAAU,CAAE,KAAAG,EAAM,UAAW,KAAK,IAAA,EAAO,EAEjDA,CACT,OAASC,EAAO,CAEd,cAAQ,MAAM,wBAAwBL,CAAG,IAAKK,CAAK,EAC7C,IAAI,MACR,yBAAyBA,aAAiB,MAAQA,EAAM,QAAU,eAAe,EAAA,CAErF,CACF,CAKA,MAAa,gBAA4C,CACvD,GAAI,CAKF,OAJiB,MAAM,KAAK,eAEzB,GAAG,KAAK,OAAO,oBAAqB,YAAY,GAEnC,iBAClB,OAASA,EAAO,CAEd,eAAQ,MAAM,4BAA6BA,CAAK,EAEzC,CACL,CAAE,GAAI,EAAG,KAAM,mBAAA,EACf,CAAE,GAAI,GAAI,KAAM,kBAAA,EAChB,CAAE,GAAI,GAAI,KAAM,QAAA,CAAS,CAE7B,CACF,CAKA,MAAa,cACXC,EACAC,EACmB,CACnB,GAAI,CACF,MAAMC,EAAkBD,EAAa,eAAeA,CAAU,GAAK,GAC7DP,EAAM,GAAG,KAAK,OAAO,8BAA8BM,CAAU,iBAAiBE,CAAe,GAE7FL,EAAW,MAAM,KAAK,eAC1BH,EACA,YAAYM,CAAU,IAAIC,GAAc,KAAK,EAAA,EAG/C,GAAIJ,EAAS,gBAAkB,EAC7B,MAAM,IAAI,MACR,+BAA+BA,EAAS,aAAa,EAAA,EAIzD,GAAIA,EAAS,QAAQ,SAAW,EAC9B,MAAM,IAAI,MAAM,gCAAgC,EAGlD,MAAMM,EAAc,KAAK,kBAAkBN,EAAS,QAAQ,CAAC,CAAE,EAEzD7C,EAAqB,CACzB,KAAMmD,EAAY,SAClB,cAAeA,EAAY,eAC3B,QAASA,EAAY,QACrB,QAAS,EAAA,EAIX,OAAA3B,GAAc,OAAOxB,CAAQ,EAEtBA,CACT,OAAS+C,EAAO,CAEd,QAAQ,MAAM,2BAA4BA,CAAK,EAG/C,MAAMK,EAA6B,CACjC,KAAM,4CACN,cAAe,KACf,QAAS,CAAC,YAAa,eAAgB,mBAAoB,UAAU,EACrE,QAAS,EAAA,EAGX,OAAA5B,GAAc,OAAO4B,CAAgB,EAC9BA,CACT,CACF,CAKA,MAAa,uBACXJ,EACAK,EAAiB,EACjBJ,EACqB,CACrB,GAAI,CACF,MAAMC,EAAkBD,EAAa,eAAeA,CAAU,GAAK,GAC7DP,EAAM,GAAG,KAAK,OAAO,mBAAmBW,CAAM,aAAaL,CAAU,iBAAiBE,CAAe,GAErGL,EAAW,MAAM,KAAK,eAC1BH,EACA,aAAaM,CAAU,IAAIK,CAAM,IAAIJ,GAAc,KAAK,EAAA,EAG1D,GAAIJ,EAAS,gBAAkB,EAC7B,MAAM,IAAI,MACR,+BAA+BA,EAAS,aAAa,EAAA,EAIzD,OAAOA,EAAS,QAAQ,IAAIT,GAAe,CACzC,MAAMe,EAAc,KAAK,kBAAkBf,CAAW,EACtD,MAAO,CACL,KAAMe,EAAY,SAClB,cAAeA,EAAY,eAC3B,QAASA,EAAY,QACrB,QAAS,EAAA,CAEb,CAAC,CACH,OAASJ,EAAO,CAEd,eAAQ,MAAM,qCAAsCA,CAAK,EAClD,CAAA,CACT,CACF,CAKO,eAAeO,EAAuBtD,EAA6B,CACxE,OAAIA,EAAS,gBAAkB,KAAa,GACrCsD,IAAkBtD,EAAS,aACpC,CAKO,UAIL,CACA,IAAIuD,EAAa,EACbC,EAAY,EAEhB,SAAW,CAACC,CAAG,IAAK,KAAK,MAAM,UACzBA,IAAQ,cAAcF,IACtBE,EAAI,WAAW,WAAW,GAAGD,IAGnC,MAAO,CACL,UAAW,KAAK,MAAM,KACtB,WAAAD,EACA,UAAAC,CAAA,CAEJ,CAKO,YAAmB,CACxB,KAAK,MAAM,MAAA,CACb,CAKA,MAAa,iBACXR,EACAK,EAAiB,GACF,CACf,GAAI,CACF,MAAM,KAAK,uBAAuBL,EAAYK,CAAM,CACtD,OAASN,EAAO,CAEd,QAAQ,KAAK,+BAAgCA,CAAK,CACpD,CACF,CACF,CAGO,MAAMW,GAAgB,IAAI5B,SCtE3B6B,GAA6BC,GAAO,CAACC,EAAKC,EAAKC,IAAQ,CAC3D,MAAMC,EAAgBD,EAAI,UAC1B,OAAAA,EAAI,UAAY,CAACE,EAAUC,EAAaC,IAAY,CAClD,IAAIC,EAAWH,EACf,GAAIC,EAAa,CACf,MAAMG,EAAyCF,GAAQ,YAAe,OAAO,GAC7E,IAAIG,EAAeL,EAASF,EAAI,SAAA,CAAU,EAC1CK,EAAYG,GAAU,CACpB,MAAMC,EAAYP,EAASM,CAAK,EAChC,GAAI,CAACF,EAAWC,EAAcE,CAAS,EAAG,CACxC,MAAMC,EAAgBH,EACtBJ,EAAYI,EAAeE,EAAWC,CAAa,CACrD,CACF,EAC+BN,GAAQ,iBACrCD,EAAYI,EAAcA,CAAY,CAE1C,CACA,OAAON,EAAcI,CAAQ,CAC/B,EACqBR,EAAGC,EAAKC,EAAKC,CAAG,CAEvC,EACMW,GAAwBf,GAI9B,SAASgB,GAAkBC,EAAYT,EAAS,CAC9C,IAAIU,EACJ,GAAI,CACFA,EAAUD,EAAA,CACZ,MAAa,CACX,MACF,CAsBA,MArBuB,CACrB,QAAUE,GAAS,CACjB,IAAIC,EACJ,MAAMC,EAASC,GACTA,IAAS,KACJ,KAEF,KAAK,MAAMA,EAAwB,MAAwB,EAE9DC,GAAOH,EAAKF,EAAQ,QAAQC,CAAI,IAAM,KAAOC,EAAK,KACxD,OAAIG,aAAe,QACVA,EAAI,KAAKF,CAAK,EAEhBA,EAAME,CAAG,CAClB,EACA,QAAS,CAACJ,EAAMK,IAAaN,EAAQ,QACnCC,EACA,KAAK,UAAUK,EAA4B,MAAyB,CAAA,EAEtE,WAAaL,GAASD,EAAQ,WAAWC,CAAI,CAAA,CAGjD,CACA,MAAMM,GAAcxB,GAAQyB,GAAU,CACpC,GAAI,CACF,MAAMC,EAAS1B,EAAGyB,CAAK,EACvB,OAAIC,aAAkB,QACbA,EAEF,CACL,KAAKC,EAAa,CAChB,OAAOH,GAAWG,CAAW,EAAED,CAAM,CACvC,EACA,MAAME,EAAa,CACjB,OAAO,IACT,CAAA,CAEJ,OAASC,EAAG,CACV,MAAO,CACL,KAAKC,EAAc,CACjB,OAAO,IACT,EACA,MAAMC,EAAY,CAChB,OAAOP,GAAWO,CAAU,EAAEF,CAAC,CACjC,CAAA,CAEJ,CACF,EACMG,GAAU,CAACC,EAAQC,IAAgB,CAACjC,EAAKC,EAAKC,IAAQ,CAC1D,IAAII,EAAU,CACZ,WAAY,IAAM,aAClB,UAAW,KAAK,UAChB,YAAa,KAAK,MAClB,WAAaI,GAAUA,EACvB,QAAS,EACT,MAAO,CAACwB,EAAgBC,KAAkB,CACxC,GAAGA,EACH,GAAGD,CAAA,GAEL,GAAGD,CAAA,EAEDG,EAAc,GAClB,MAAMC,MAAyC,IACzCC,MAA+C,IACrD,IAAItB,EACJ,GAAI,CACFA,EAAUV,EAAQ,WAAA,CACpB,MAAa,CACb,CACA,GAAI,CAACU,EACH,OAAOgB,EACL,IAAIO,IAAS,CACX,QAAQ,KACN,uDAAuDjC,EAAQ,IAAI,gDAAA,EAErEN,EAAI,GAAGuC,CAAI,CACb,EACAtC,EACAC,CAAA,EAGJ,MAAMsC,EAAoBjB,GAAWjB,EAAQ,SAAS,EAChDmC,EAAU,IAAM,CACpB,MAAM/B,EAAQJ,EAAQ,WAAW,CAAE,GAAGL,EAAA,EAAO,EAC7C,IAAIyC,EACJ,MAAMC,EAAWH,EAAkB,CAAE,MAAA9B,EAAO,QAASJ,EAAQ,OAAA,CAAS,EAAE,KACrEsC,GAAoB5B,EAAQ,QAAQV,EAAQ,KAAMsC,CAAe,CAAA,EAClE,MAAOhB,GAAM,CACbc,EAAcd,CAChB,CAAC,EACD,GAAIc,EACF,MAAMA,EAER,OAAOC,CACT,EACME,EAAgB3C,EAAI,SAC1BA,EAAI,SAAW,CAACQ,EAAOoC,IAAY,CACjCD,EAAcnC,EAAOoC,CAAO,EACvBL,EAAA,CACP,EACA,MAAMM,EAAef,EACnB,IAAIO,IAAS,CACXvC,EAAI,GAAGuC,CAAI,EACNE,EAAA,CACP,EACAxC,EACAC,CAAA,EAEF,IAAI8C,EACJ,MAAMC,EAAU,IAAM,CACpB,IAAI/B,EACJ,GAAI,CAACF,EAAS,OACdoB,EAAc,GACdC,EAAmB,QAASa,GAAOA,EAAGjD,EAAA,CAAK,CAAC,EAC5C,MAAMkD,IAA4BjC,EAAKZ,EAAQ,qBAAuB,KAAO,OAASY,EAAG,KAAKZ,EAASL,EAAA,CAAK,IAAM,OAClH,OAAOsB,GAAWP,EAAQ,QAAQ,KAAKA,CAAO,CAAC,EAAEV,EAAQ,IAAI,EAAE,KAAM8C,GAAiB,CACpF,GAAIA,EACF,OAAO9C,EAAQ,YAAY8C,CAAY,CAE3C,CAAC,EAAE,KAAMC,GAA6B,CACpC,GAAIA,EACF,GAAI,OAAOA,EAAyB,SAAY,UAAYA,EAAyB,UAAY/C,EAAQ,QAAS,CAChH,GAAIA,EAAQ,QACV,OAAOA,EAAQ,QACb+C,EAAyB,MACzBA,EAAyB,OAAA,EAG7B,QAAQ,MACN,uFAAA,CAEJ,KACE,QAAOA,EAAyB,KAGtC,CAAC,EAAE,KAAMC,GAAkB,CACzB,IAAIC,EACJ,OAAAP,EAAmB1C,EAAQ,MACzBgD,GACCC,EAAMtD,MAAU,KAAOsD,EAAMR,CAAA,EAEhC/C,EAAIgD,EAAkB,EAAI,EACnBP,EAAA,CACT,CAAC,EAAE,KAAK,IAAM,CAC+BU,IAAwBH,EAAkB,MAAM,EAC3FZ,EAAc,GACdE,EAAyB,QAASY,GAAOA,EAAGF,CAAgB,CAAC,CAC/D,CAAC,EAAE,MAAOpB,GAAM,CAC6BuB,IAAwB,OAAQvB,CAAC,CAC9E,CAAC,CACH,EACA,OAAA1B,EAAI,QAAU,CACZ,WAAasD,GAAe,CAC1BlD,EAAU,CACR,GAAGA,EACH,GAAGkD,CAAA,EAEDA,EAAW,aACbxC,EAAUwC,EAAW,WAAA,EAEzB,EACA,aAAc,IAAM,CACSxC,GAAQ,WAAWV,EAAQ,IAAI,CAC5D,EACA,WAAY,IAAMA,EAClB,UAAW,IAAM2C,EAAA,EACjB,YAAa,IAAMb,EACnB,UAAYc,IACVb,EAAmB,IAAIa,CAAE,EAClB,IAAM,CACXb,EAAmB,OAAOa,CAAE,CAC9B,GAEF,kBAAoBA,IAClBZ,EAAyB,IAAIY,CAAE,EACxB,IAAM,CACXZ,EAAyB,OAAOY,CAAE,CACpC,EACF,EAEFD,EAAA,EACOD,GAAoBD,CAC7B,EACMU,GAAU,CAACzB,EAAQC,IAAgB,CAACjC,EAAKC,EAAKC,IAAQ,CAC1D,IAAII,EAAU,CACZ,QAASQ,GAAkB,IAAM,YAAY,EAC7C,WAAaJ,GAAUA,EACvB,QAAS,EACT,MAAO,CAACwB,EAAgBC,KAAkB,CACxC,GAAGA,EACH,GAAGD,CAAA,GAEL,GAAGD,CAAA,EAEDG,EAAc,GAClB,MAAMC,MAAyC,IACzCC,MAA+C,IACrD,IAAItB,EAAUV,EAAQ,QACtB,GAAI,CAACU,EACH,OAAOgB,EACL,IAAIO,IAAS,CACX,QAAQ,KACN,uDAAuDjC,EAAQ,IAAI,gDAAA,EAErEN,EAAI,GAAGuC,CAAI,CACb,EACAtC,EACAC,CAAA,EAGJ,MAAMuC,EAAU,IAAM,CACpB,MAAM/B,EAAQJ,EAAQ,WAAW,CAAE,GAAGL,EAAA,EAAO,EAC7C,OAAOe,EAAQ,QAAQV,EAAQ,KAAM,CACnC,MAAAI,EACA,QAASJ,EAAQ,OAAA,CAClB,CACH,EACMuC,EAAgB3C,EAAI,SAC1BA,EAAI,SAAW,CAACQ,EAAOoC,IAAY,CACjCD,EAAcnC,EAAOoC,CAAO,EACvBL,EAAA,CACP,EACA,MAAMM,EAAef,EACnB,IAAIO,IAAS,CACXvC,EAAI,GAAGuC,CAAI,EACNE,EAAA,CACP,EACAxC,EACAC,CAAA,EAEFA,EAAI,gBAAkB,IAAM6C,EAC5B,IAAIC,EACJ,MAAMC,EAAU,IAAM,CACpB,IAAI/B,EAAIwC,EACR,GAAI,CAAC1C,EAAS,OACdoB,EAAc,GACdC,EAAmB,QAASa,GAAO,CACjC,IAAIK,EACJ,OAAOL,GAAIK,EAAMtD,EAAA,IAAU,KAAOsD,EAAMR,CAAY,CACtD,CAAC,EACD,MAAMI,IAA4BO,EAAKpD,EAAQ,qBAAuB,KAAO,OAASoD,EAAG,KAAKpD,GAAUY,EAAKjB,EAAA,IAAU,KAAOiB,EAAK6B,CAAY,IAAM,OACrJ,OAAOxB,GAAWP,EAAQ,QAAQ,KAAKA,CAAO,CAAC,EAAEV,EAAQ,IAAI,EAAE,KAAM+C,GAA6B,CAChG,GAAIA,EACF,GAAI,OAAOA,EAAyB,SAAY,UAAYA,EAAyB,UAAY/C,EAAQ,QAAS,CAChH,GAAIA,EAAQ,QACV,MAAO,CACL,GACAA,EAAQ,QACN+C,EAAyB,MACzBA,EAAyB,OAAA,CAC3B,EAGJ,QAAQ,MACN,uFAAA,CAEJ,KACE,OAAO,CAAC,GAAOA,EAAyB,KAAK,EAGjD,MAAO,CAAC,GAAO,MAAM,CACvB,CAAC,EAAE,KAAMM,GAAoB,CAC3B,IAAIJ,EACJ,KAAM,CAACK,EAAUN,CAAa,EAAIK,EAMlC,GALAX,EAAmB1C,EAAQ,MACzBgD,GACCC,EAAMtD,MAAU,KAAOsD,EAAMR,CAAA,EAEhC/C,EAAIgD,EAAkB,EAAI,EACtBY,EACF,OAAOnB,EAAA,CAEX,CAAC,EAAE,KAAK,IAAM,CAC+BU,IAAwBH,EAAkB,MAAM,EAC3FA,EAAmB/C,EAAA,EACnBmC,EAAc,GACdE,EAAyB,QAASY,GAAOA,EAAGF,CAAgB,CAAC,CAC/D,CAAC,EAAE,MAAOpB,GAAM,CAC6BuB,IAAwB,OAAQvB,CAAC,CAC9E,CAAC,CACH,EACA,OAAA1B,EAAI,QAAU,CACZ,WAAasD,GAAe,CAC1BlD,EAAU,CACR,GAAGA,EACH,GAAGkD,CAAA,EAEDA,EAAW,UACbxC,EAAUwC,EAAW,QAEzB,EACA,aAAc,IAAM,CACSxC,GAAQ,WAAWV,EAAQ,IAAI,CAC5D,EACA,WAAY,IAAMA,EAClB,UAAW,IAAM2C,EAAA,EACjB,YAAa,IAAMb,EACnB,UAAYc,IACVb,EAAmB,IAAIa,CAAE,EAClB,IAAM,CACXb,EAAmB,OAAOa,CAAE,CAC9B,GAEF,kBAAoBA,IAClBZ,EAAyB,IAAIY,CAAE,EACxB,IAAM,CACXZ,EAAyB,OAAOY,CAAE,CACpC,EACF,EAEG5C,EAAQ,eACX2C,EAAA,EAEKD,GAAoBD,CAC7B,EACMc,GAAc,CAAC7B,EAAQC,IACvB,eAAgBA,GAAe,cAAeA,GAAe,gBAAiBA,IAC3E6B,GAAkB,aAAuB,UAAY,cACxD,QAAQ,KACN,gHAAA,EAGG/B,GAAQC,EAAQC,CAAW,GAE7BwB,GAAQzB,EAAQC,CAAW,EAE9B8B,GAAUF,GCthBVG,GAA8C,CAClD,OAAQ,GACR,UAAW,GACX,YAAa,GACb,WAAY,SACZ,MAAO,OACP,aAAc,GACd,cAAe,GACf,SAAU,EACZ,EAEMC,GAAkD,CACtD,iBAAkB,EAClB,WAAY,EACZ,UAAW,EACX,uBAAwB,EACxB,eAAgB,EAChB,aAAc,EACd,SAAU,EACV,iBAAkB,CAAA,EAClB,WAAY,CACd,EAEaC,GAAeC,GAAA,EAC1BtD,GACEkD,GACE,CAAC/D,EAAKC,KAAS,CAEb,UAAW,OACX,MAAO,CAAE,MAAO,CAAA,EAChB,UAAW,GACX,UAAW,EACX,mBAAoB,KACpB,MAAO,EACP,MAAO,EACP,WAAY,EACZ,aAAc,CAAA,EACd,SAAU+D,GACV,WAAYC,GAGZ,aAAevD,GAAqB,CAIlC,GAHAV,EAAI,CAAE,UAAWU,EAAO,EAGpBA,IAAU,UAAW,CACvB,MAAM0D,EAAQnE,IAAM,WACpBD,EAAI,CACF,WAAY,CACV,GAAGoE,EACH,iBAAkBA,EAAM,iBAAmB,EAC3C,WAAY,KAAK,IAAA,CAAI,CACvB,CACD,CACH,CACF,EAEA,eAAgB,IAAM,CAEpB,MAAMC,EADepE,IAAM,MAAM,MACD,EAEhCD,EAAI,CACF,MAAO,CAAE,MAAOqE,CAAA,EAChB,WAAYpE,EAAA,EAAM,WAAa,EAAA,CAChC,EAGD,MAAMmE,EAAQnE,IAAM,WACpBD,EAAI,CACF,WAAY,CACV,GAAGoE,EACH,WAAYA,EAAM,WAAa,EAC/B,UAAW,KAAK,IAAIA,EAAM,UAAWC,CAAQ,EAC7C,eAAgBD,EAAM,eAAiB,EACvC,cACGA,EAAM,WAAa,GACpB,KAAK,IAAIA,EAAM,uBAAwB,CAAC,CAAA,CAC5C,CACD,EAGD,MAAME,EAAQrE,IAAM,WACdsE,EAAW,KAAK,MAAMD,EAAQ,GAAG,EAAI,EACvCC,EAAWtE,EAAA,EAAM,QACnBD,EAAI,CAAE,MAAOuE,EAAU,EACvBtE,EAAA,EAAM,kBAAkB,SAASsE,CAAQ,EAAE,EAE/C,EAEA,WAAY,IAAM,CAChBvE,EAAI,CAAE,MAAO,CAAE,MAAO,CAAA,EAAK,CAC7B,EAEA,UAAYwE,GAAuB,CACjCxE,EAAI,CAAE,UAAAwE,EAAW,CACnB,EAEA,aAAeC,GAAkB,CAC/BzE,EAAI,CAAE,UAAWyE,EAAO,CAC1B,EAEA,oBAAsBtF,GAAuB,CAC3Ca,EAAI,CAAE,mBAAoBb,EAAY,EAGtC,MAAMiF,EAAQnE,IAAM,WACdyE,EAAmBN,EAAM,iBAAiB,SAASjF,CAAU,EAC/DiF,EAAM,iBACN,CAAC,GAAGA,EAAM,iBAAkBjF,CAAU,EAE1Ca,EAAI,CACF,WAAY,CACV,GAAGoE,EACH,iBAAAM,CAAA,CACF,CACD,CACH,EAEA,UAAW,IAAM,CACf1E,EAAI,CACF,UAAW,OACX,MAAO,CAAE,MAAO,CAAA,EAChB,UAAW,GACX,UAAW,EACX,MAAO,CAAA,CACR,CACH,EAGA,SAAW2E,GAAkB,CAC3B3E,EAAI,CAAE,MAAO,KAAK,IAAI,EAAG2E,CAAK,EAAG,CACnC,EAEA,eAAgB,IAAM,CACpB,MAAMC,EAAW,KAAK,IAAI,EAAG3E,EAAA,EAAM,MAAQ,CAAC,EAC5CD,EAAI,CAAE,MAAO4E,EAAU,EAEnBA,IAAa,GACf3E,EAAA,EAAM,aAAa,UAAU,CAEjC,EAEA,SAAW4E,GAAkB,CAC3B7E,EAAI,CAAE,MAAO,KAAK,IAAI,EAAG6E,CAAK,EAAG,CACnC,EAEA,eAAgB,IAAM,CACpB,MAAMN,EAAWtE,IAAM,MAAQ,EAC/BD,EAAI,CAAE,MAAOuE,EAAU,EACvBtE,EAAA,EAAM,kBAAkB,SAASsE,CAAQ,EAAE,CAC7C,EAEA,cAAgBO,GAAe,CAC7B,MAAMR,EAAQrE,IAAM,WAAa6E,EACjC9E,EAAI,CAAE,WAAYsE,EAAO,EAGzB,MAAMC,EAAW,KAAK,MAAMD,EAAQ,GAAG,EAAI,EACvCC,EAAWtE,EAAA,EAAM,OACnBA,EAAA,EAAM,SAASsE,CAAQ,CAE3B,EAEA,kBAAoBQ,GAAwB,CAC1C,MAAMC,EAAe/E,IAAM,aACtB+E,EAAa,SAASD,CAAW,GACpC/E,EAAI,CAAE,aAAc,CAAC,GAAGgF,EAAcD,CAAW,EAAG,CAExD,EAEA,eAAiBE,GAAkD,CACjEjF,EAAI,CACF,SAAU,CACR,GAAGC,IAAM,SACT,GAAGgF,CAAA,CACL,CACD,CACH,EAEA,iBAAmBb,GAAiD,CAClEpE,EAAI,CACF,WAAY,CACV,GAAGC,IAAM,WACT,GAAGmE,CAAA,CACL,CACD,CACH,EAEA,gBAAiB,IAAM,CACrBpE,EAAI,CAAE,WAAYiE,GAAmB,CACvC,CAAA,GAEF,CACE,KAAM,2BACN,QAASnD,GAAkB,IAAM,YAAY,EAC7C,WAAYJ,IAAU,CAEpB,SAAUA,EAAM,SAChB,WAAYA,EAAM,WAClB,aAAcA,EAAM,aACpB,MAAOA,EAAM,MACb,WAAYA,EAAM,UAAA,EACpB,CACF,CACF,CAEJ,EAiBawE,GAAiB,IAC5BhB,GAAaxD,IAAU,CACrB,aAAcA,EAAM,aACpB,eAAgBA,EAAM,eACtB,WAAYA,EAAM,WAClB,UAAWA,EAAM,UACjB,aAAcA,EAAM,aACpB,oBAAqBA,EAAM,oBAC3B,UAAWA,EAAM,UACjB,SAAUA,EAAM,SAChB,eAAgBA,EAAM,eACtB,cAAeA,EAAM,cACrB,kBAAmBA,EAAM,kBACzB,eAAgBA,EAAM,eACtB,iBAAkBA,EAAM,gBAC1B,EAAE,EAGJwD,GAAa,aACFxD,EAAM,WACf,CAACyE,EAAYC,IAAuB,CAE9BD,EAAW,iBAAmBC,EAAmB,kBAEnD,QAAQ,MAAM,gBAAiBD,EAAW,gBAAgB,EAGxDA,EAAW,UAAYC,EAAmB,WAE5C,QAAQ,MAAM,kBAAmBD,EAAW,SAAS,CAEzD,CACF,EAGAjB,GAAa,aACFxD,EAAM,aACf,CAACsE,EAAcK,IAAyB,CACtC,MAAMC,EAAkBN,EAAa,OACnCD,GAAe,CAACM,EAAqB,SAASN,CAAW,CAAA,EAG3D,UAAWA,KAAeO,EAExB,QAAQ,MAAM,wBAAyBP,CAAW,CAEtD,CACF,aCtTA,MAAMQ,GAAe,CACnB,KAAM,CACJ,IAAK,CAAC,+DAA+D,EACrE,OAAQ,GACR,QAAS,EAAA,EAEX,MAAO,CACL,IAAK,CAAC,+DAA+D,EACrE,OAAQ,GACR,QAAS,EAAA,EAEX,SAAU,CACR,IAAK,CAAC,+DAA+D,EACrE,OAAQ,GACR,QAAS,EAAA,EAEX,WAAY,CACV,IAAK,CAAC,+DAA+D,EACrE,OAAQ,GACR,KAAM,GACN,QAAS,EAAA,EAEX,QAAS,CACP,IAAK,CAAC,+DAA+D,EACrE,OAAQ,GACR,QAAS,EAAA,EAEX,OAAQ,CACN,IAAK,CAAC,+DAA+D,EACrE,OAAQ,GACR,QAAS,EAAA,EAEX,UAAW,CACT,IAAK,CAAC,+DAA+D,EACrE,OAAQ,GACR,QAAS,EAAA,CAEb,EAOO,MAAMC,EAAyC,CACnC,WAAa,IACb,oBAAsB,IAC/B,aAAe,EACf,UAAY,EACZ,YAAc,EACd,MAAQ,GACR,YAAc,GAEtB,aAAc,CACZ,KAAK,KAAA,CACP,CAKA,MAAc,MAAsB,CAClC,GAAI,CAEFC,SAAO,OAAO,KAAK,YAAY,EAC9BA,EAAAA,OAAe,cAAc,EAAE,EAGhC,MAAM,KAAK,uBAAA,EAEX,KAAK,YAAc,GAEnB,QAAQ,MAAM,0BAA0B,CAC1C,OAASvG,EAAO,CAEd,QAAQ,KAAK,qCAAsCA,CAAK,CAC1D,CACF,CAKA,MAAc,wBAAwC,CACpD,MAAMwG,EAAkB,OAAO,QAAQH,EAAY,EAChD,OAAO,CAAC,CAAA,CAAGvD,CAAM,IAAMA,EAAO,OAAO,EACrC,IAAI,CAAC,CAACpC,CAAG,IAAM,KAAK,UAAUA,CAAoB,CAAC,EAEtD,MAAM,QAAQ,WAAW8F,CAAe,CAC1C,CAKA,MAAc,UAAU9F,EAAmC,CAEzD,GAAI,KAAK,gBAAgB,IAAIA,CAAG,EAC9B,OAAO,KAAK,gBAAgB,IAAIA,CAAG,EAIrC,GAAI,KAAK,OAAO,IAAIA,CAAG,EACrB,OAAO,QAAQ,QAAA,EAGjB,MAAMoC,EAASuD,GAAa3F,CAAG,EAEzB+F,EAAiB,IAAI,QAAcC,GAAW,CAClD,MAAMC,EAAQ,IAAIC,OAAK,CACrB,GAAI9D,EACJ,OAAQ,IAAM,CACZ,KAAK,OAAO,IAAIpC,EAAKiG,CAAK,EAC1B,KAAK,gBAAgB,OAAOjG,CAAG,EAC/BgG,EAAA,CACF,EACA,YAAa,IAAM,CAEjB,QAAQ,KAAK,yBAAyBhG,CAAG,EAAE,EAC3C,KAAK,gBAAgB,OAAOA,CAAG,EAE/BgG,EAAA,CACF,EACA,YAAa,IAAM,CAEjB,QAAQ,KAAK,yBAAyBhG,CAAG,EAAE,CAC7C,CAAA,CACD,CACH,CAAC,EAED,YAAK,gBAAgB,IAAIA,EAAK+F,CAAc,EACrCA,CACT,CAKA,MAAc,UACZ/F,EACAmG,EACAzF,EACe,CACf,GAAI,MAAK,MAET,GAAI,CACF,MAAM,KAAK,UAAUV,CAAG,EACxB,MAAMiG,EAAQ,KAAK,OAAO,IAAIjG,CAAG,EACjC,GAAI,CAACiG,EAAO,OAEZ,MAAM7D,EAASuD,GAAa3F,CAAG,EAEzBoG,EADepG,IAAQ,aACW,KAAK,YAAc,KAAK,UAC1DqG,GACHF,GAAU/D,EAAO,QAAUgE,EAAmB,KAAK,aAEtDH,EAAM,OAAO,KAAK,IAAI,EAAG,KAAK,IAAI,EAAGI,CAAW,CAAC,CAAC,EAE9C3F,GAAS,MAAMuF,EAAM,KAAKvF,EAAQ,IAAI,EACtCA,GAAS,OAAS,QAAWuF,EAAM,KAAKvF,EAAQ,IAAI,EAExDuF,EAAM,KAAA,CACR,OAAS3G,EAAO,CAEd,QAAQ,KAAK,yBAAyBU,CAAG,GAAIV,CAAK,CACpD,CACF,CAKQ,UAAUU,EAA0B,CAC1C,MAAMiG,EAAQ,KAAK,OAAO,IAAIjG,CAAG,EAC7BiG,GACFA,EAAM,KAAA,CAEV,CAGA,MAAa,UAA0B,CACrC,MAAM,KAAK,UAAU,MAAM,CAC7B,CAEA,MAAa,WAA2B,CACtC,MAAM,KAAK,UAAU,OAAO,CAC9B,CAEA,MAAa,cAA8B,CACzC,MAAM,KAAK,UAAU,UAAU,CACjC,CAEA,MAAa,qBAAqC,CAChD,MAAM,KAAK,UAAU,YAAY,CACnC,CAEO,qBAA4B,CACjC,KAAK,UAAU,YAAY,CAC7B,CAGA,MAAa,aAA6B,CACxC,MAAM,KAAK,UAAU,SAAS,CAChC,CAEA,MAAa,YAA4B,CACvC,MAAM,KAAK,UAAU,QAAQ,CAC/B,CAEA,MAAa,eAA+B,CAC1C,MAAM,KAAK,UAAU,WAAW,CAClC,CAKO,UAAUE,EAAsB,CACrC,KAAK,aAAe,KAAK,IAAI,EAAG,KAAK,IAAI,EAAGA,CAAM,CAAC,EACnDN,SAAO,OAAO,KAAK,YAAY,CACjC,CAKO,aAAaM,EAAsB,CACxC,KAAK,UAAY,KAAK,IAAI,EAAG,KAAK,IAAI,EAAGA,CAAM,CAAC,CAClD,CAKO,eAAeA,EAAsB,CAC1C,KAAK,YAAc,KAAK,IAAI,EAAG,KAAK,IAAI,EAAGA,CAAM,CAAC,EAGlD,MAAMG,EAAU,KAAK,OAAO,IAAI,YAAY,EAC5C,GAAIA,EAAS,CACX,MAAMlE,EAASuD,GAAa,WAC5BW,EAAQ,OAAOlE,EAAO,OAAS,KAAK,YAAc,KAAK,YAAY,CACrE,CACF,CAKO,MAAa,CAClB,KAAK,MAAQ,GACbyD,EAAAA,OAAO,KAAK,EAAI,CAClB,CAKO,QAAe,CACpB,KAAK,MAAQ,GACbA,EAAAA,OAAO,KAAK,EAAK,CACnB,CAKO,YAAsB,CAC3B,OAAI,KAAK,MACP,KAAK,OAAA,EAEL,KAAK,KAAA,EAEA,KAAK,KACd,CAKO,UAAiB,CACtB,UAAWI,KAAS,KAAK,OAAO,OAAA,EAC9BA,EAAM,MAAA,CAEV,CAKO,WAAkB,CACvB,UAAWA,KAAS,KAAK,OAAO,OAAA,EAC1BA,EAAM,WACRA,EAAM,KAAA,CAGZ,CAKO,SAAgB,CACrB,UAAWA,KAAS,KAAK,OAAO,OAAA,EAC9BA,EAAM,KAAA,CAEV,CAKO,UAQL,CACA,MAAO,CACL,YAAa,KAAK,YAClB,aAAc,KAAK,OAAO,KAC1B,cAAe,KAAK,gBAAgB,KACpC,aAAc,KAAK,aACnB,UAAW,KAAK,UAChB,YAAa,KAAK,YAClB,MAAO,KAAK,KAAA,CAEhB,CAKA,MAAa,YAA4B,CACvC,MAAMM,EAAU,OAAO,KAAKZ,EAAY,EACxC,MAAM,QAAQ,WAAWY,EAAQ,OAAW,KAAK,UAAUvG,CAAG,CAAC,CAAC,CAClE,CAKO,YAAmB,CACxB,KAAK,QAAA,EACL,UAAWiG,KAAS,KAAK,OAAO,OAAA,EAC9BA,EAAM,OAAA,EAER,KAAK,OAAO,MAAA,EACZ,KAAK,gBAAgB,MAAA,CACvB,CACF,CAGO,MAAMO,EAAe,IAAIZ,GAGzB,SAASa,IAAsB,CAEpCD,EAAa,SAAA,EAAW,MAAM,QAAQ,IAAI,CAC5C,CAEO,SAASE,IAAuB,CAErCF,EAAa,UAAA,EAAY,MAAM,QAAQ,IAAI,CAC7C,CAEO,SAASG,IAA0B,CAExCH,EAAa,aAAA,EAAe,MAAM,QAAQ,IAAI,CAChD,CAEO,SAASI,IAA4B,CAE1CJ,EAAa,oBAAA,EAAsB,MAAM,QAAQ,IAAI,CACvD,CAEO,SAASK,IAA4B,CAC1CL,EAAa,oBAAA,CACf,CC/WA,MAAMM,EAAkC,CAC/B,EACA,EACS,KACA,OACA,OACA,MACT,IAEP,YAAYvM,EAAWC,EAAW,CAChC,KAAK,EAAID,EACT,KAAK,EAAIC,EACT,KAAK,KAAOU,GAAc,EAAG,CAAC,EAC9B,KAAK,OAASA,GAAc,GAAI,CAAC,EACjC,KAAK,OAASA,GAAc,GAAI,CAAC,EACjC,KAAK,MAAQ,OAAOG,GAAiB,EAAG,EAAE,CAAC,eAC3C,KAAK,IAAMA,GAAiB,GAAI,GAAG,CACrC,CAEO,QAAe,CACpB,KAAK,GAAK,KAAK,OACf,KAAK,GAAK,KAAK,OACf,KAAK,KACP,CAEO,KAAKvB,EAAqC,CAE/C,MAAMiN,EAAQ,KAAK,IAAI,EAAG,KAAK,IAAM,GAAG,EAExCjN,EAAI,KAAA,EACJA,EAAI,YAAciN,EAClBjN,EAAI,UAAY,KAAK,MACrBA,EAAI,UAAA,EACJA,EAAI,IAAI,KAAK,EAAG,KAAK,EAAG,KAAK,KAAM,EAAG,KAAK,GAAK,CAAC,EACjDA,EAAI,KAAA,EACJA,EAAI,QAAA,CACN,CAEO,MAAMS,EAAWC,EAAiB,CACvC,KAAK,EAAID,EACT,KAAK,EAAIC,EACT,KAAK,IAAMa,GAAiB,GAAI,GAAG,CACrC,CAEA,IAAW,SAAmB,CAC5B,OAAO,KAAK,IAAM,CACpB,CACF,CAKA,MAAM2L,EAAa,CACA,KAAuB,CAAA,EACvB,gBAAkC,CAAA,EAClC,YAAc,IAExB,OAAOzM,EAAWC,EAAiB,CACxC,IAAIyM,EAGA,KAAK,KAAK,OAAS,GACrBA,EAAW,KAAK,KAAK,IAAA,EACrBA,EAAS,MAAM1M,EAAGC,CAAC,GAEnByM,EAAW,IAAIH,GAAavM,EAAGC,CAAC,EAGlC,KAAK,gBAAgB,KAAKyM,CAAQ,CACpC,CAEO,QAAe,CACpB,QAAShM,EAAI,KAAK,gBAAgB,OAAS,EAAGA,GAAK,EAAGA,IAAK,CACzD,MAAMgM,EAAW,KAAK,gBAAgBhM,CAAC,EACvCgM,EAAS,OAAA,EAEJA,EAAS,UAEZ,KAAK,gBAAgB,OAAOhM,EAAG,CAAC,EAE5B,KAAK,KAAK,OAAS,KAAK,aAC1B,KAAK,KAAK,KAAKgM,CAAQ,EAG7B,CACF,CAEO,KAAKnN,EAAqC,CAC/C,UAAWmN,KAAY,KAAK,gBAC1BA,EAAS,KAAKnN,CAAG,CAErB,CAEO,OAAc,CAEnB,UAAWmN,KAAY,KAAK,gBACtB,KAAK,KAAK,OAAS,KAAK,aAC1B,KAAK,KAAK,KAAKA,CAAQ,EAG3B,KAAK,gBAAgB,OAAS,CAChC,CAEA,IAAW,OAAgB,CACzB,OAAO,KAAK,gBAAgB,MAC9B,CAEO,UAA+C,CACpD,MAAO,CACL,OAAQ,KAAK,gBAAgB,OAC7B,OAAQ,KAAK,KAAK,MAAA,CAEtB,CACF,CAGA,MAAMC,GAAe,IAAIF,GAKlB,SAASG,GACd5M,EACAC,EACA4M,EAAwB,GAClB,CACN,QAASnM,EAAI,EAAGA,EAAImM,EAAenM,IAAK,CAEtC,MAAMoM,EAAUnM,GAAc,IAAK,EAAE,EAC/BoM,EAAUpM,GAAc,IAAK,EAAE,EACrCgM,GAAa,OAAO3M,EAAI8M,EAAS7M,EAAI8M,CAAO,CAC9C,CACF,CA2BO,SAASC,IAAwB,CACtCL,GAAa,OAAA,CACf,CAKO,SAASM,GAAc1N,EAAqC,CACjEoN,GAAa,KAAKpN,CAAG,CACvB,CAKO,SAAS2N,IAAuB,CACrCP,GAAa,MAAA,CACf,CC7KA,SAASQ,GAAUC,EAAwC,CACzD,OAAO,IAAI,QAAQ,CAAC3B,EAAS4B,IAAW,CACtC,MAAMC,EAAM,IAAI,MAEhBA,EAAI,OAAS,IAAM7B,EAAQ6B,CAAG,EAC9BA,EAAI,QAAUvI,GAAS,CAErB,QAAQ,MAAM,yBAAyBqI,CAAG,GAAIrI,CAAK,EACnDsI,EAAO,IAAI,MAAM,yBAAyBD,CAAG,EAAE,CAAC,CAClD,EAEAE,EAAI,IAAMF,CACZ,CAAC,CACH,CAKA,MAAMG,GAAc,CAClB,WAAY,mBACZ,UAAW,kBACX,SAAU,gBACZ,EAKA,eAAsBC,IAAsC,CAC1D,GAAI,CACF,KAAM,CAACC,EAAY7N,EAAW8B,CAAQ,EAAI,MAAM,QAAQ,IAAI,CAC1DyL,GAAUI,GAAY,UAAU,EAChCJ,GAAUI,GAAY,SAAS,EAC/BJ,GAAUI,GAAY,QAAQ,CAAA,CAC/B,EAED,MAAO,CAAE,WAAAE,EAAY,UAAA7N,EAAW,SAAA8B,CAAA,CAClC,OAASqD,EAAO,CAEd,cAAQ,MAAM,8BAA+BA,CAAK,EAC5C,IAAI,MACR,2DAAA,CAEJ,CACF,CC7CA,IAAI2I,GACJ,MAAMC,GAAQ,IAAI,WAAW,EAAE,EAChB,SAASC,IAAM,CAE5B,GAAI,CAACF,KAEHA,GAAkB,OAAO,OAAW,KAAe,OAAO,iBAAmB,OAAO,gBAAgB,KAAK,MAAM,EAE3G,CAACA,IACH,MAAM,IAAI,MAAM,0GAA0G,EAI9H,OAAOA,GAAgBC,EAAK,CAC9B,CCXA,MAAME,EAAY,CAAA,EAElB,QAASnN,EAAI,EAAGA,EAAI,IAAK,EAAEA,EACzBmN,EAAU,MAAMnN,EAAI,KAAO,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC,EAG3C,SAASoN,GAAgBC,EAAKlL,EAAS,EAAG,CAG/C,OAAOgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAI,IAAMgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAI,IAAMgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAI,IAAMgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,CAAC,CAAC,EAAI,IAAMgL,EAAUE,EAAIlL,EAAS,EAAE,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,EAAE,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,EAAE,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,EAAE,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,EAAE,CAAC,EAAIgL,EAAUE,EAAIlL,EAAS,EAAE,CAAC,CACnf,CChBA,MAAMmL,GAAa,OAAO,OAAW,KAAe,OAAO,YAAc,OAAO,WAAW,KAAK,MAAM,EACtGC,GAAe,CACb,WAAAD,EACF,ECCA,SAASE,GAAG/H,EAASgI,EAAKtL,EAAQ,CAChC,GAAIoL,GAAO,YAAsB,CAAC9H,EAChC,OAAO8H,GAAO,WAAU,EAG1B9H,EAAUA,GAAW,CAAA,EACrB,MAAMiI,EAAOjI,EAAQ,SAAWA,EAAQ,KAAOyH,MAE/C,OAAAQ,EAAK,CAAC,EAAIA,EAAK,CAAC,EAAI,GAAO,GAC3BA,EAAK,CAAC,EAAIA,EAAK,CAAC,EAAI,GAAO,IAYpBN,GAAgBM,CAAI,CAC7B,WC4BA,MAAMC,EAAiB,CACb,OACA,YACA,WAAyB,CAAA,EACzB,cAAgB,GAChB,oBAER,aAAc,CACZ,KAAK,OAAS,KAAK,WAAA,EACnB,KAAK,YAAc,KAAK,kBAAA,EACxB,KAAK,2BAAA,CACP,CAKA,MAAa,WACXxG,EAAmC,GACpB,CAGf,GAFA,KAAK,OAAS,CAAE,GAAG,KAAK,OAAQ,GAAGA,CAAA,EAE/B,CAAC,KAAK,OAAO,YAAa,CAC5B,QAAQ,IAAI,qCAAqC,EACjD,MACF,CAEA,GAAI,CAEE,KAAK,OAAO,MAAQ,OAAO,OAAW,KACxC,MAAM,KAAK,oBAAA,EAIb,KAAK,aAAA,EAGL,KAAK,kBAAA,EAEL,KAAK,cAAgB,GACrB,QAAQ,IAAI,qCAAqC,CACnD,OAAS9C,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,CACzD,CACF,CAKO,mBAAmBuJ,EAA4B,CACpD,MAAMC,EAAY,CAChB,GAAGD,EACH,UAAW,KAAK,IAAA,EAChB,UAAW,KAAK,YAAY,UAC5B,OAAQ,KAAK,YAAY,MAAA,EAI3B,KAAK,kBAAkBA,CAAK,EAG5B,KAAK,UAAU,iBAAkBC,CAAS,EAGtC,KAAK,OAAO,WACd,QAAQ,IAAI,oCAAqCA,CAAS,CAE9D,CAKO,qBAAqBD,EAAmC,CAC7D,MAAMC,EAAY,CAChB,GAAGD,EACH,UAAW,KAAK,IAAA,EAChB,UAAW,KAAK,YAAY,SAAA,EAG9B,KAAK,UAAU,mBAAoBC,CAAS,EAExC,KAAK,OAAO,WACd,QAAQ,IAAI,sCAAuCA,CAAS,CAEhE,CAKO,iBAAiBD,EAA+B,CACrD,MAAMC,EAAY,CAChB,GAAGD,EACH,UAAW,KAAK,IAAA,EAChB,UAAW,KAAK,YAAY,SAAA,EAG9B,KAAK,UAAU,qBAAsBC,CAAS,EAE1C,KAAK,OAAO,WACd,QAAQ,IAAI,wCAAyCA,CAAS,CAElE,CAKO,iBACLC,EACAC,EAAkC,GAC5B,CACN,MAAMF,EAAY,CAChB,MAAOC,EACP,GAAGC,EACH,UAAW,KAAK,IAAA,EAChB,UAAW,KAAK,YAAY,SAAA,EAG9B,KAAK,UAAU,eAAgBF,CAAS,CAC1C,CAKO,kBAAkBE,EAAuC,CAC1D,OAAO,KAAS,KAClB,KAAK,SAAU,KAAK,OAAO,KAAO,CAChC,gBAAiBA,CAAA,CAClB,CAEL,CAKO,cAAcC,EAAcC,EAAsB,CACnD,OAAO,KAAS,KAClB,KAAK,SAAU,KAAK,OAAO,KAAO,CAChC,WAAYA,GAASD,EACrB,cAAe,OAAO,SAAS,IAAA,CAChC,CAEL,CAKO,gBAAkC,CACvC,MAAO,CAAE,GAAG,KAAK,WAAA,CACnB,CAKO,sBAKL,CACA,MAAME,EAAkB,KAAK,IAAA,EAAQ,KAAK,YAAY,UAChDC,EAAgB,SACpB,aAAa,QAAQ,0BAA0B,GAAK,GAAA,EAKhDC,GAFJ,SAAS,aAAa,QAAQ,8BAA8B,GAAK,GAAG,EACpEF,GACgDC,EAM5CE,EAHgB,SACpB,aAAa,QAAQ,0BAA0B,GAAK,GAAA,EAElBF,EAAiB,IAErD,MAAO,CACL,gBAAAD,EACA,uBAAAE,EACA,cAAAD,EACA,WAAAE,CAAA,CAEJ,CAKO,qBAA8B,CACnC,MAAMjK,EAAO,CACX,YAAa,KAAK,YAClB,OAAQ,KAAK,OACb,kBAAmB,KAAK,qBAAA,EACxB,UAAW,KAAK,IAAA,CAAI,EAGtB,OAAO,KAAK,UAAUA,EAAM,KAAM,CAAC,CACrC,CAKO,oBAA2B,CAEV,OAAO,KAAK,YAAY,EAAE,OAAOW,GACrDA,EAAI,WAAW,YAAY,CAAA,EAEf,QAAQA,GAAO,aAAa,WAAWA,CAAG,CAAC,EAGzD,KAAK,YAAc,KAAK,kBAAA,EAGxB,KAAK,WAAa,CAAA,EAElB,QAAQ,IAAI,6BAA6B,CAC3C,CAKO,cAAcuJ,EAAwB,CAC3C,KAAK,OAAO,YAAcA,EAC1B,aAAa,QAAQ,oBAAqBA,EAAQ,SAAA,CAAU,EAExDA,GAAW,CAAC,KAAK,cACnB,KAAK,WAAA,EACKA,GACV,KAAK,mBAAA,CAET,CAIQ,YAA8B,CACpC,MAAO,CACL,KAAMC,GAAY,aAClB,UAAW,GACX,YAAa,aAAa,QAAQ,mBAAmB,IAAM,OAC3D,eAAgB,KAAU,GAAA,CAE9B,CAEQ,mBAAqC,CAC3C,MAAMC,EAAkB,aAAa,QAAQ,mBAAmB,EAEhE,GAAIA,EAAiB,CACnB,MAAMC,EAAU,KAAK,MAAMD,CAAe,EAE1C,GACE,KAAK,MAAQC,EAAQ,cACpB,KAAK,OAAO,gBAAkB,KAAU,KAEzC,OAAAA,EAAQ,aAAe,KAAK,IAAA,EACrBA,CAEX,CAGA,MAAMC,EAA8B,CAClC,UAAWC,GAAA,EACX,OAAQ,aAAa,QAAQ,mBAAmB,GAAKA,GAAA,EACrD,UAAW,KAAK,IAAA,EAChB,aAAc,KAAK,IAAA,EACnB,cAAe,EACf,YAAa,EACb,WAAY,EACZ,aAAc,EACd,mBAAoB,CAAA,EACpB,iBAAkB,CAAA,EAClB,qBAAsB,CAAA,CAAC,EAIzB,oBAAa,QAAQ,oBAAqBD,EAAW,MAAM,EAEpDA,CACT,CAEQ,cAAqB,CAE3B,KAAK,iBAAiB,gBAAiB,CACrC,QAAS,KAAK,YAAY,OAC1B,WAAY,KAAK,YAAY,SAAA,CAC9B,EAGD,YAAY,IAAM,CAChB,KAAK,cAAA,CACP,EAAG,GAAK,EAGR,OAAO,iBAAiB,eAAgB,IAAM,CAC5C,KAAK,WAAA,CACP,CAAC,CACH,CAEQ,eAAsB,CAC5B,KAAK,YAAY,aAAe,KAAK,IAAA,EACrC,KAAK,YAAA,CACP,CAEQ,YAAmB,CACzB,MAAMR,EAAkB,KAAK,IAAA,EAAQ,KAAK,YAAY,UAGhDC,EACJ,SAAS,aAAa,QAAQ,0BAA0B,GAAK,GAAG,EAAI,EAChES,EACJ,SAAS,aAAa,QAAQ,8BAA8B,GAAK,GAAG,EACpEV,EASF,GAPA,aAAa,QAAQ,2BAA4BC,EAAc,SAAA,CAAU,EACzE,aAAa,QACX,+BACAS,EAAiB,SAAA,CAAS,EAIxBV,EAAkB,IAAO,CAC3B,MAAMW,EACJ,SAAS,aAAa,QAAQ,0BAA0B,GAAK,GAAG,EAAI,EACtE,aAAa,QACX,2BACAA,EAAc,SAAA,CAAS,CAE3B,CAGA,KAAK,iBAAiB,cAAe,CACnC,iBAAkBX,EAClB,aAAc,KAAK,YAAY,YAC/B,YAAa,KAAK,YAAY,UAAA,CAC/B,CACH,CAEQ,aAAoB,CAC1B,aAAa,QAAQ,oBAAqB,KAAK,UAAU,KAAK,WAAW,CAAC,CAC5E,CAEQ,kBAAkBN,EAA4B,CACpD,OAAQA,EAAM,MAAA,CACZ,IAAK,aACH,KAAK,YAAY,cAEfA,EAAM,UACN,CAAC,KAAK,YAAY,iBAAiB,SAASA,EAAM,QAAQ,GAE1D,KAAK,YAAY,iBAAiB,KAAKA,EAAM,QAAQ,EAGrDA,EAAM,YACN,CAAC,KAAK,YAAY,mBAAmB,SAASA,EAAM,UAAU,GAE9D,KAAK,YAAY,mBAAmB,KAAKA,EAAM,UAAU,EAE3D,MAEF,IAAK,WACCA,EAAM,QACR,KAAK,YAAY,YAAcA,EAAM,MACrC,KAAK,YAAY,aACf,KAAK,YAAY,WAAa,KAAK,YAAY,aAE/CA,EAAM,WACR,KAAK,YAAY,eAAiBA,EAAM,UAE1C,MAEF,IAAK,uBAEDA,EAAM,UACN,CAAC,KAAK,YAAY,qBAAqB,SAASA,EAAM,QAAQ,GAE9D,KAAK,YAAY,qBAAqB,KAAKA,EAAM,QAAQ,EAE3D,KAAA,CAGJ,KAAK,YAAA,CACP,CAEA,MAAc,qBAAqC,CACjD,OAAO,IAAI,QAAQ,CAAC7C,EAAS4B,IAAW,CACtC,GAAI,OAAO,KAAS,IAAa,CAC/B5B,EAAA,EACA,MACF,CAEA,GAAI,CAEF,MAAM+D,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQ,GACfA,EAAO,IAAM,+CAA+C,KAAK,OAAO,IAAI,GAC5E,SAAS,KAAK,YAAYA,CAAM,EAGhCA,EAAO,OAAS,IAAM,CACnB,OAAe,UAAa,OAAe,WAAa,CAAA,EACxD,OAAe,KAAO,UAAY,CAChC,OAAe,UAAU,KAAK,SAAS,CAC1C,EAEA,KAAK,KAAM,IAAI,IAAM,EACrB,KAAK,SAAU,KAAK,OAAO,KAAO,CAChC,aAAc,uBACd,aAAc,EAAA,CACf,EAED/D,EAAA,CACF,EAEA+D,EAAO,QAAUnC,CACnB,OAAStI,EAAO,CACdsI,EAAOtI,CAAK,CACd,CACF,CAAC,CACH,CAEQ,UAAU0K,EAAmBlB,EAAsB,CACzD,GAAI,CAAC,KAAK,cAAe,CAEvB,KAAK,WAAW,KAAK,CAAE,UAAAkB,EAAW,UAAAlB,EAAW,EAC7C,MACF,CAEI,OAAO,KAAS,KAClB,KAAK,QAASkB,EAAWlB,CAAS,EAIpC,KAAK,kBAAkBkB,EAAWlB,CAAS,CAC7C,CAEQ,mBAA0B,CAChC,KAAO,KAAK,WAAW,OAAS,GAAG,CACjC,KAAM,CAAE,UAAAkB,EAAW,UAAAlB,CAAA,EAAc,KAAK,WAAW,MAAA,EACjD,KAAK,UAAUkB,EAAWlB,CAAS,CACrC,CACF,CAEQ,kBAAkBkB,EAAmBlB,EAAsB,CACjE,MAAMmB,EAAS,KAAK,MAAM,aAAa,QAAQ,kBAAkB,GAAK,IAAI,EAC1EA,EAAO,KAAK,CAAE,UAAAD,EAAW,UAAAlB,EAAW,UAAW,KAAK,IAAA,EAAO,EAGvDmB,EAAO,OAAS,KAClBA,EAAO,OAAO,EAAGA,EAAO,OAAS,GAAI,EAGvC,aAAa,QAAQ,mBAAoB,KAAK,UAAUA,CAAM,CAAC,CACjE,CAEQ,4BAAmC,CACrC,wBAAyB,SAE3B,KAAK,oBAAsB,IAAI,oBAAoBC,GAAQ,CACzCA,EAAK,WAAA,EACb,QAAQC,GAAS,CACvB,GAAIA,EAAM,YAAc,aAAc,CACpC,MAAMC,EAAWD,EACjB,KAAK,iBAAiB,CACpB,MAAO,qBACP,OAAQ,YACR,MAAOC,EAAS,aAAeA,EAAS,eACxC,QAAS,YAAA,CACV,CACH,CACF,CAAC,CACH,CAAC,EAED,KAAK,oBAAoB,QAAQ,CAC/B,WAAY,CAAC,aAAc,UAAU,CAAA,CACtC,GAIH,IAAIC,EAAW,YAAY,IAAA,EACvBC,EAAS,EAEb,MAAMC,EAAa,IAAM,CACvBD,IACA,MAAME,EAAc,YAAY,IAAA,EAEhC,GAAIA,GAAeH,EAAW,IAAM,CAClC,MAAMI,EAAM,KAAK,MAAOH,EAAS,KAASE,EAAcH,EAAS,EACjE,KAAK,iBAAiB,CACpB,MAAO,qBACP,OAAQ,MACR,MAAOI,EACP,QAAS,UAAA,CACV,EAEDH,EAAS,EACTD,EAAWG,CACb,CAEA,sBAAsBD,CAAU,CAClC,EAEA,sBAAsBA,CAAU,CAClC,CACF,CAGO,MAAMG,EAAmB,IAAI9B,GC3iB9B+B,EAAWC,GAAO,OAAOA,GAAQ,SACjCC,GAAQ,IAAM,CAClB,IAAIC,EACAC,EACJ,MAAMC,EAAU,IAAI,QAAQ,CAAChF,EAAS4B,IAAW,CAC/CkD,EAAM9E,EACN+E,EAAMnD,CACR,CAAC,EACD,OAAAoD,EAAQ,QAAUF,EAClBE,EAAQ,OAASD,EACVC,CACT,EACMC,GAAaC,GACbA,GAAU,KAAa,GACpB,GAAKA,EAERC,GAAO,CAACC,EAAGC,EAAG,IAAM,CACxBD,EAAE,QAAQE,GAAK,CACTD,EAAEC,CAAC,IAAG,EAAEA,CAAC,EAAID,EAAEC,CAAC,EACtB,CAAC,CACH,EACMC,GAA4B,OAC5BC,GAAWxL,GAAOA,GAAOA,EAAI,QAAQ,KAAK,EAAI,GAAKA,EAAI,QAAQuL,GAA2B,GAAG,EAAIvL,EACjGyL,GAAuBP,GAAU,CAACA,GAAUP,EAASO,CAAM,EAC3DQ,GAAgB,CAACR,EAAQS,EAAMC,IAAU,CAC7C,MAAMC,EAASlB,EAASgB,CAAI,EAAWA,EAAK,MAAM,GAAG,EAArBA,EAChC,IAAIG,EAAa,EACjB,KAAOA,EAAaD,EAAM,OAAS,GAAG,CACpC,GAAIJ,GAAqBP,CAAM,EAAG,MAAO,CAAA,EACzC,MAAMlL,EAAMwL,GAASK,EAAMC,CAAU,CAAC,EAClC,CAACZ,EAAOlL,CAAG,GAAK4L,IAAOV,EAAOlL,CAAG,EAAI,IAAI4L,GACzC,OAAO,UAAU,eAAe,KAAKV,EAAQlL,CAAG,EAClDkL,EAASA,EAAOlL,CAAG,EAEnBkL,EAAS,CAAA,EAEX,EAAEY,CACJ,CACA,OAAIL,GAAqBP,CAAM,EAAU,CAAA,EAClC,CACL,IAAKA,EACL,EAAGM,GAASK,EAAMC,CAAU,CAAC,CACjC,CACA,EACMC,GAAU,CAACb,EAAQS,EAAMjK,IAAa,CAC1C,KAAM,CACJ,IAAAkJ,EACA,EAAAoB,CACJ,EAAMN,GAAcR,EAAQS,EAAM,MAAM,EACtC,GAAIf,IAAQ,QAAae,EAAK,SAAW,EAAG,CAC1Cf,EAAIoB,CAAC,EAAItK,EACT,MACF,CACA,IAAIM,EAAI2J,EAAKA,EAAK,OAAS,CAAC,EACxBM,EAAIN,EAAK,MAAM,EAAGA,EAAK,OAAS,CAAC,EACjCO,EAAOR,GAAcR,EAAQe,EAAG,MAAM,EAC1C,KAAOC,EAAK,MAAQ,QAAaD,EAAE,QACjCjK,EAAI,GAAGiK,EAAEA,EAAE,OAAS,CAAC,CAAC,IAAIjK,CAAC,GAC3BiK,EAAIA,EAAE,MAAM,EAAGA,EAAE,OAAS,CAAC,EAC3BC,EAAOR,GAAcR,EAAQe,EAAG,MAAM,EAClCC,GAAQA,EAAK,KAAO,OAAOA,EAAK,IAAI,GAAGA,EAAK,CAAC,IAAIlK,CAAC,EAAE,EAAM,MAC5DkK,EAAK,IAAM,QAGfA,EAAK,IAAI,GAAGA,EAAK,CAAC,IAAIlK,CAAC,EAAE,EAAIN,CAC/B,EACMyK,GAAW,CAACjB,EAAQS,EAAMjK,EAAU0K,IAAW,CACnD,KAAM,CACJ,IAAAxB,EACA,EAAAoB,CACJ,EAAMN,GAAcR,EAAQS,EAAM,MAAM,EACtCf,EAAIoB,CAAC,EAAIpB,EAAIoB,CAAC,GAAK,CAAA,EACnBpB,EAAIoB,CAAC,EAAE,KAAKtK,CAAQ,CACtB,EACM2K,GAAU,CAACnB,EAAQS,IAAS,CAChC,KAAM,CACJ,IAAAf,EACA,EAAAoB,CACJ,EAAMN,GAAcR,EAAQS,CAAI,EAC9B,GAAKf,EACL,OAAOA,EAAIoB,CAAC,CACd,EACMM,GAAsB,CAACjN,EAAMkN,EAAavM,IAAQ,CACtD,MAAMwM,EAAQH,GAAQhN,EAAMW,CAAG,EAC/B,OAAIwM,IAAU,OACLA,EAEFH,GAAQE,EAAavM,CAAG,CACjC,EACMyM,GAAa,CAACC,EAAQC,EAAQC,IAAc,CAChD,UAAWC,KAAQF,EACbE,IAAS,aAAeA,IAAS,gBAC/BA,KAAQH,EACN/B,EAAS+B,EAAOG,CAAI,CAAC,GAAKH,EAAOG,CAAI,YAAa,QAAUlC,EAASgC,EAAOE,CAAI,CAAC,GAAKF,EAAOE,CAAI,YAAa,OAC5GD,IAAWF,EAAOG,CAAI,EAAIF,EAAOE,CAAI,GAEzCJ,GAAWC,EAAOG,CAAI,EAAGF,EAAOE,CAAI,EAAGD,CAAS,EAGlDF,EAAOG,CAAI,EAAIF,EAAOE,CAAI,GAIhC,OAAOH,CACT,EACMI,EAAcrL,GAAOA,EAAI,QAAQ,sCAAuC,MAAM,EACpF,IAAIsL,GAAa,CACf,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,QACP,EACA,MAAMC,GAAS3N,GACTsL,EAAStL,CAAI,EACRA,EAAK,QAAQ,aAAcgM,GAAK0B,GAAW1B,CAAC,CAAC,EAE/ChM,EAET,MAAM4N,EAAY,CAChB,YAAYC,EAAU,CACpB,KAAK,SAAWA,EAChB,KAAK,UAAY,IAAI,IACrB,KAAK,YAAc,CAAA,CACrB,CACA,UAAUC,EAAS,CACjB,MAAMC,EAAkB,KAAK,UAAU,IAAID,CAAO,EAClD,GAAIC,IAAoB,OACtB,OAAOA,EAET,MAAMC,EAAY,IAAI,OAAOF,CAAO,EACpC,OAAI,KAAK,YAAY,SAAW,KAAK,UACnC,KAAK,UAAU,OAAO,KAAK,YAAY,MAAK,CAAE,EAEhD,KAAK,UAAU,IAAIA,EAASE,CAAS,EACrC,KAAK,YAAY,KAAKF,CAAO,EACtBE,CACT,CACF,CACA,MAAMC,GAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,GAAG,EAChCC,GAAiC,IAAIN,GAAY,EAAE,EACnDO,GAAsB,CAACxN,EAAKyN,EAAaC,IAAiB,CAC9DD,EAAcA,GAAe,GAC7BC,EAAeA,GAAgB,GAC/B,MAAMC,EAAgBL,GAAM,OAAOM,GAAKH,EAAY,QAAQG,CAAC,EAAI,GAAKF,EAAa,QAAQE,CAAC,EAAI,CAAC,EACjG,GAAID,EAAc,SAAW,EAAG,MAAO,GACvC,MAAME,EAAIN,GAA+B,UAAU,IAAII,EAAc,IAAIC,GAAKA,IAAM,IAAM,MAAQA,CAAC,EAAE,KAAK,GAAG,CAAC,GAAG,EACjH,IAAIE,EAAU,CAACD,EAAE,KAAK7N,CAAG,EACzB,GAAI,CAAC8N,EAAS,CACZ,MAAMC,EAAK/N,EAAI,QAAQ0N,CAAY,EAC/BK,EAAK,GAAK,CAACF,EAAE,KAAK7N,EAAI,UAAU,EAAG+N,CAAE,CAAC,IACxCD,EAAU,GAEd,CACA,OAAOA,CACT,EACME,GAAW,SAAUpD,EAAKe,EAAM,CACpC,IAAI+B,EAAe,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,IACvF,GAAI,CAAC9C,EAAK,OACV,GAAIA,EAAIe,CAAI,EAAG,OAAOf,EAAIe,CAAI,EAC9B,MAAMsC,EAAStC,EAAK,MAAM+B,CAAY,EACtC,IAAIQ,EAAUtD,EACd,QAAS,EAAI,EAAG,EAAIqD,EAAO,QAAS,CAClC,GAAI,CAACC,GAAW,OAAOA,GAAY,SACjC,OAEF,IAAIC,EACAC,EAAW,GACf,QAAS1P,EAAI,EAAGA,EAAIuP,EAAO,OAAQ,EAAEvP,EAMnC,GALIA,IAAM,IACR0P,GAAYV,GAEdU,GAAYH,EAAOvP,CAAC,EACpByP,EAAOD,EAAQE,CAAQ,EACnBD,IAAS,OAAW,CACtB,GAAI,CAAC,SAAU,SAAU,SAAS,EAAE,QAAQ,OAAOA,CAAI,EAAI,IAAMzP,EAAIuP,EAAO,OAAS,EACnF,SAEF,GAAKvP,EAAI,EAAI,EACb,KACF,CAEFwP,EAAUC,CACZ,CACA,OAAOD,CACT,EACMG,GAAiBC,GAAQA,GAAQA,EAAK,QAAQ,IAAK,GAAG,EAEtDC,GAAgB,CACpB,KAAM,SACN,IAAI5L,EAAM,CACR,KAAK,OAAO,MAAOA,CAAI,CACzB,EACA,KAAKA,EAAM,CACT,KAAK,OAAO,OAAQA,CAAI,CAC1B,EACA,MAAMA,EAAM,CACV,KAAK,OAAO,QAASA,CAAI,CAC3B,EACA,OAAO6L,EAAM7L,EAAM,CACb,SAAW,QAAQ6L,CAAI,GAAG,QAAQA,CAAI,EAAE,MAAM,QAAS7L,CAAI,CACjE,CACF,EACA,MAAM8L,EAAO,CACX,YAAYC,EAAgB,CAC1B,IAAIhO,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,KAAK,KAAKgO,EAAgBhO,CAAO,CACnC,CACA,KAAKgO,EAAgB,CACnB,IAAIhO,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,KAAK,OAASA,EAAQ,QAAU,WAChC,KAAK,OAASgO,GAAkBH,GAChC,KAAK,QAAU7N,EACf,KAAK,MAAQA,EAAQ,KACvB,CACA,KAAM,CACJ,QAASiO,EAAO,UAAU,OAAQhM,EAAO,IAAI,MAAMgM,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAC/EjM,EAAKiM,CAAI,EAAI,UAAUA,CAAI,EAE7B,OAAO,KAAK,QAAQjM,EAAM,MAAO,GAAI,EAAI,CAC3C,CACA,MAAO,CACL,QAASkM,EAAQ,UAAU,OAAQlM,EAAO,IAAI,MAAMkM,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFnM,EAAKmM,CAAK,EAAI,UAAUA,CAAK,EAE/B,OAAO,KAAK,QAAQnM,EAAM,OAAQ,GAAI,EAAI,CAC5C,CACA,OAAQ,CACN,QAASoM,EAAQ,UAAU,OAAQpM,EAAO,IAAI,MAAMoM,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFrM,EAAKqM,CAAK,EAAI,UAAUA,CAAK,EAE/B,OAAO,KAAK,QAAQrM,EAAM,QAAS,EAAE,CACvC,CACA,WAAY,CACV,QAASsM,EAAQ,UAAU,OAAQtM,EAAO,IAAI,MAAMsM,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFvM,EAAKuM,CAAK,EAAI,UAAUA,CAAK,EAE/B,OAAO,KAAK,QAAQvM,EAAM,OAAQ,uBAAwB,EAAI,CAChE,CACA,QAAQA,EAAMwM,EAAKC,EAAQC,EAAW,CACpC,OAAIA,GAAa,CAAC,KAAK,MAAc,MACjC1E,EAAShI,EAAK,CAAC,CAAC,IAAGA,EAAK,CAAC,EAAI,GAAGyM,CAAM,GAAG,KAAK,MAAM,IAAIzM,EAAK,CAAC,CAAC,IAC5D,KAAK,OAAOwM,CAAG,EAAExM,CAAI,EAC9B,CACA,OAAO2M,EAAY,CACjB,OAAO,IAAIb,GAAO,KAAK,OAAQ,CAE3B,OAAQ,GAAG,KAAK,MAAM,IAAIa,CAAU,IAEtC,GAAG,KAAK,OACd,CAAK,CACH,CACA,MAAM5O,EAAS,CACb,OAAAA,EAAUA,GAAW,KAAK,QAC1BA,EAAQ,OAASA,EAAQ,QAAU,KAAK,OACjC,IAAI+N,GAAO,KAAK,OAAQ/N,CAAO,CACxC,CACF,CACA,IAAI6O,EAAa,IAAId,GAErB,MAAMe,EAAa,CACjB,aAAc,CACZ,KAAK,UAAY,CAAA,CACnB,CACA,GAAGvF,EAAQtJ,EAAU,CACnB,OAAAsJ,EAAO,MAAM,GAAG,EAAE,QAAQpB,GAAS,CAC5B,KAAK,UAAUA,CAAK,IAAG,KAAK,UAAUA,CAAK,EAAI,IAAI,KACxD,MAAM4G,EAAe,KAAK,UAAU5G,CAAK,EAAE,IAAIlI,CAAQ,GAAK,EAC5D,KAAK,UAAUkI,CAAK,EAAE,IAAIlI,EAAU8O,EAAe,CAAC,CACtD,CAAC,EACM,IACT,CACA,IAAI5G,EAAOlI,EAAU,CACnB,GAAK,KAAK,UAAUkI,CAAK,EACzB,IAAI,CAAClI,EAAU,CACb,OAAO,KAAK,UAAUkI,CAAK,EAC3B,MACF,CACA,KAAK,UAAUA,CAAK,EAAE,OAAOlI,CAAQ,EACvC,CACA,KAAKkI,EAAO,CACV,QAAS8F,EAAO,UAAU,OAAQhM,EAAO,IAAI,MAAMgM,EAAO,EAAIA,EAAO,EAAI,CAAC,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAClGjM,EAAKiM,EAAO,CAAC,EAAI,UAAUA,CAAI,EAE7B,KAAK,UAAU/F,CAAK,GACP,MAAM,KAAK,KAAK,UAAUA,CAAK,EAAE,SAAS,EAClD,QAAQ6G,GAAQ,CACrB,GAAI,CAACC,EAAUC,CAAa,EAAIF,EAChC,QAASzU,EAAI,EAAGA,EAAI2U,EAAe3U,IACjC0U,EAAS,GAAGhN,CAAI,CAEpB,CAAC,EAEC,KAAK,UAAU,GAAG,GACL,MAAM,KAAK,KAAK,UAAU,GAAG,EAAE,SAAS,EAChD,QAAQkN,GAAS,CACtB,GAAI,CAACF,EAAUC,CAAa,EAAIC,EAChC,QAAS5U,EAAI,EAAGA,EAAI2U,EAAe3U,IACjC0U,EAAS,MAAMA,EAAU,CAAC9G,EAAO,GAAGlG,CAAI,CAAC,CAE7C,CAAC,CAEL,CACF,CAEA,MAAMmN,WAAsBN,EAAa,CACvC,YAAYnQ,EAAM,CAChB,IAAIqB,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,GAAI,CAAC,aAAa,EAClB,UAAW,aACjB,EACI,MAAK,EACL,KAAK,KAAOrB,GAAQ,CAAA,EACpB,KAAK,QAAUqB,EACX,KAAK,QAAQ,eAAiB,SAChC,KAAK,QAAQ,aAAe,KAE1B,KAAK,QAAQ,sBAAwB,SACvC,KAAK,QAAQ,oBAAsB,GAEvC,CACA,cAAcqP,EAAI,CACZ,KAAK,QAAQ,GAAG,QAAQA,CAAE,EAAI,GAChC,KAAK,QAAQ,GAAG,KAAKA,CAAE,CAE3B,CACA,iBAAiBA,EAAI,CACnB,MAAM5S,EAAQ,KAAK,QAAQ,GAAG,QAAQ4S,CAAE,EACpC5S,EAAQ,IACV,KAAK,QAAQ,GAAG,OAAOA,EAAO,CAAC,CAEnC,CACA,YAAY6S,EAAKD,EAAI/P,EAAK,CACxB,IAAIU,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,MAAMgN,EAAehN,EAAQ,eAAiB,OAAYA,EAAQ,aAAe,KAAK,QAAQ,aACxFuP,EAAsBvP,EAAQ,sBAAwB,OAAYA,EAAQ,oBAAsB,KAAK,QAAQ,oBACnH,IAAIiL,EACAqE,EAAI,QAAQ,GAAG,EAAI,GACrBrE,EAAOqE,EAAI,MAAM,GAAG,GAEpBrE,EAAO,CAACqE,EAAKD,CAAE,EACX/P,IACE,MAAM,QAAQA,CAAG,EACnB2L,EAAK,KAAK,GAAG3L,CAAG,EACP2K,EAAS3K,CAAG,GAAK0N,EAC1B/B,EAAK,KAAK,GAAG3L,EAAI,MAAM0N,CAAY,CAAC,EAEpC/B,EAAK,KAAK3L,CAAG,IAInB,MAAM6B,EAASwK,GAAQ,KAAK,KAAMV,CAAI,EAMtC,MALI,CAAC9J,GAAU,CAACkO,GAAM,CAAC/P,GAAOgQ,EAAI,QAAQ,GAAG,EAAI,KAC/CA,EAAMrE,EAAK,CAAC,EACZoE,EAAKpE,EAAK,CAAC,EACX3L,EAAM2L,EAAK,MAAM,CAAC,EAAE,KAAK,GAAG,GAE1B9J,GAAU,CAACoO,GAAuB,CAACtF,EAAS3K,CAAG,EAAU6B,EACtDmM,GAAS,KAAK,MAAQ,KAAK,KAAKgC,CAAG,GAAK,KAAK,KAAKA,CAAG,EAAED,CAAE,EAAG/P,EAAK0N,CAAY,CACtF,CACA,YAAYsC,EAAKD,EAAI/P,EAAKwM,EAAO,CAC/B,IAAI9L,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,OAAQ,EACd,EACI,MAAMgN,EAAehN,EAAQ,eAAiB,OAAYA,EAAQ,aAAe,KAAK,QAAQ,aAC9F,IAAIiL,EAAO,CAACqE,EAAKD,CAAE,EACf/P,IAAK2L,EAAOA,EAAK,OAAO+B,EAAe1N,EAAI,MAAM0N,CAAY,EAAI1N,CAAG,GACpEgQ,EAAI,QAAQ,GAAG,EAAI,KACrBrE,EAAOqE,EAAI,MAAM,GAAG,EACpBxD,EAAQuD,EACRA,EAAKpE,EAAK,CAAC,GAEb,KAAK,cAAcoE,CAAE,EACrBhE,GAAQ,KAAK,KAAMJ,EAAMa,CAAK,EACzB9L,EAAQ,QAAQ,KAAK,KAAK,QAASsP,EAAKD,EAAI/P,EAAKwM,CAAK,CAC7D,CACA,aAAawD,EAAKD,EAAIG,EAAW,CAC/B,IAAIxP,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,OAAQ,EACd,EACI,UAAW4K,KAAK4E,GACVvF,EAASuF,EAAU5E,CAAC,CAAC,GAAK,MAAM,QAAQ4E,EAAU5E,CAAC,CAAC,IAAG,KAAK,YAAY0E,EAAKD,EAAIzE,EAAG4E,EAAU5E,CAAC,EAAG,CACpG,OAAQ,EAChB,CAAO,EAEE5K,EAAQ,QAAQ,KAAK,KAAK,QAASsP,EAAKD,EAAIG,CAAS,CAC5D,CACA,kBAAkBF,EAAKD,EAAIG,EAAWC,EAAMvD,EAAW,CACrD,IAAIlM,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,OAAQ,GACR,SAAU,EAChB,EACQiL,EAAO,CAACqE,EAAKD,CAAE,EACfC,EAAI,QAAQ,GAAG,EAAI,KACrBrE,EAAOqE,EAAI,MAAM,GAAG,EACpBG,EAAOD,EACPA,EAAYH,EACZA,EAAKpE,EAAK,CAAC,GAEb,KAAK,cAAcoE,CAAE,EACrB,IAAIK,EAAO/D,GAAQ,KAAK,KAAMV,CAAI,GAAK,CAAA,EAClCjL,EAAQ,WAAUwP,EAAY,KAAK,MAAM,KAAK,UAAUA,CAAS,CAAC,GACnEC,EACF1D,GAAW2D,EAAMF,EAAWtD,CAAS,EAErCwD,EAAO,CACL,GAAGA,EACH,GAAGF,CACX,EAEInE,GAAQ,KAAK,KAAMJ,EAAMyE,CAAI,EACxB1P,EAAQ,QAAQ,KAAK,KAAK,QAASsP,EAAKD,EAAIG,CAAS,CAC5D,CACA,qBAAqBF,EAAKD,EAAI,CACxB,KAAK,kBAAkBC,EAAKD,CAAE,GAChC,OAAO,KAAK,KAAKC,CAAG,EAAED,CAAE,EAE1B,KAAK,iBAAiBA,CAAE,EACxB,KAAK,KAAK,UAAWC,EAAKD,CAAE,CAC9B,CACA,kBAAkBC,EAAKD,EAAI,CACzB,OAAO,KAAK,YAAYC,EAAKD,CAAE,IAAM,MACvC,CACA,kBAAkBC,EAAKD,EAAI,CAEzB,OADKA,IAAIA,EAAK,KAAK,QAAQ,WACvB,KAAK,QAAQ,mBAAqB,KAAa,CAEjD,GAAG,KAAK,YAAYC,EAAKD,CAAE,CACjC,EACW,KAAK,YAAYC,EAAKD,CAAE,CACjC,CACA,kBAAkBC,EAAK,CACrB,OAAO,KAAK,KAAKA,CAAG,CACtB,CACA,4BAA4BA,EAAK,CAC/B,MAAM3Q,EAAO,KAAK,kBAAkB2Q,CAAG,EAEvC,MAAO,CAAC,EADE3Q,GAAQ,OAAO,KAAKA,CAAI,GAAK,CAAA,GAC5B,KAAKgR,GAAKhR,EAAKgR,CAAC,GAAK,OAAO,KAAKhR,EAAKgR,CAAC,CAAC,EAAE,OAAS,CAAC,CACjE,CACA,QAAS,CACP,OAAO,KAAK,IACd,CACF,CAEA,IAAIC,GAAgB,CAClB,WAAY,CAAA,EACZ,iBAAiBC,EAAQ,CACvB,KAAK,WAAWA,EAAO,IAAI,EAAIA,CACjC,EACA,OAAOC,EAAYhE,EAAOxM,EAAKU,EAAS+P,EAAY,CAClD,OAAAD,EAAW,QAAQE,GAAa,CAC1B,KAAK,WAAWA,CAAS,IAAGlE,EAAQ,KAAK,WAAWkE,CAAS,EAAE,QAAQlE,EAAOxM,EAAKU,EAAS+P,CAAU,EAC5G,CAAC,EACMjE,CACT,CACF,EAEA,MAAMmE,GAAmB,CAAA,EACzB,MAAMC,WAAmBpB,EAAa,CACpC,YAAYqB,EAAU,CACpB,IAAInQ,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,MAAK,EACLyK,GAAK,CAAC,gBAAiB,gBAAiB,iBAAkB,eAAgB,mBAAoB,aAAc,OAAO,EAAG0F,EAAU,IAAI,EACpI,KAAK,QAAUnQ,EACX,KAAK,QAAQ,eAAiB,SAChC,KAAK,QAAQ,aAAe,KAE9B,KAAK,OAAS6O,EAAW,OAAO,YAAY,CAC9C,CACA,eAAeS,EAAK,CACdA,IAAK,KAAK,SAAWA,EAC3B,CACA,OAAOhQ,EAAK,CACV,IAAIU,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,cAAe,CAAA,CACrB,EACI,GAAyBV,GAAQ,KAC/B,MAAO,GAET,MAAM8Q,EAAW,KAAK,QAAQ9Q,EAAKU,CAAO,EAC1C,OAAOoQ,GAAYA,EAAS,MAAQ,MACtC,CACA,eAAe9Q,EAAKU,EAAS,CAC3B,IAAI+M,EAAc/M,EAAQ,cAAgB,OAAYA,EAAQ,YAAc,KAAK,QAAQ,YACrF+M,IAAgB,SAAWA,EAAc,KAC7C,MAAMC,EAAehN,EAAQ,eAAiB,OAAYA,EAAQ,aAAe,KAAK,QAAQ,aAC9F,IAAIqQ,EAAarQ,EAAQ,IAAM,KAAK,QAAQ,WAAa,CAAA,EACzD,MAAMsQ,EAAuBvD,GAAezN,EAAI,QAAQyN,CAAW,EAAI,GACjEwD,EAAuB,CAAC,KAAK,QAAQ,yBAA2B,CAACvQ,EAAQ,cAAgB,CAAC,KAAK,QAAQ,wBAA0B,CAACA,EAAQ,aAAe,CAAC8M,GAAoBxN,EAAKyN,EAAaC,CAAY,EAClN,GAAIsD,GAAwB,CAACC,EAAsB,CACjD,MAAM3F,EAAItL,EAAI,MAAM,KAAK,aAAa,aAAa,EACnD,GAAIsL,GAAKA,EAAE,OAAS,EAClB,MAAO,CACL,IAAAtL,EACA,WAAY2K,EAASoG,CAAU,EAAI,CAACA,CAAU,EAAIA,CAC5D,EAEM,MAAMG,EAAQlR,EAAI,MAAMyN,CAAW,GAC/BA,IAAgBC,GAAgBD,IAAgBC,GAAgB,KAAK,QAAQ,GAAG,QAAQwD,EAAM,CAAC,CAAC,EAAI,MAAIH,EAAaG,EAAM,MAAK,GACpIlR,EAAMkR,EAAM,KAAKxD,CAAY,CAC/B,CACA,MAAO,CACL,IAAA1N,EACA,WAAY2K,EAASoG,CAAU,EAAI,CAACA,CAAU,EAAIA,CACxD,CACE,CACA,UAAUI,EAAMzQ,EAAS0Q,EAAS,CAQhC,GAPI,OAAO1Q,GAAY,UAAY,KAAK,QAAQ,mCAC9CA,EAAU,KAAK,QAAQ,iCAAiC,SAAS,GAE/D,OAAOA,GAAY,WAAUA,EAAU,CACzC,GAAGA,CACT,GACSA,IAASA,EAAU,CAAA,GACEyQ,GAAS,KAAM,MAAO,GAC3C,MAAM,QAAQA,CAAI,IAAGA,EAAO,CAAC,OAAOA,CAAI,CAAC,GAC9C,MAAME,EAAgB3Q,EAAQ,gBAAkB,OAAYA,EAAQ,cAAgB,KAAK,QAAQ,cAC3FgN,EAAehN,EAAQ,eAAiB,OAAYA,EAAQ,aAAe,KAAK,QAAQ,aACxF,CACJ,IAAAV,EACA,WAAA+Q,CACN,EAAQ,KAAK,eAAeI,EAAKA,EAAK,OAAS,CAAC,EAAGzQ,CAAO,EAChD4Q,EAAYP,EAAWA,EAAW,OAAS,CAAC,EAC5Cf,EAAMtP,EAAQ,KAAO,KAAK,SAC1B6Q,EAA0B7Q,EAAQ,yBAA2B,KAAK,QAAQ,wBAChF,GAAIsP,GAAOA,EAAI,YAAW,IAAO,SAAU,CACzC,GAAIuB,EAAyB,CAC3B,MAAM9D,EAAc/M,EAAQ,aAAe,KAAK,QAAQ,YACxD,OAAI2Q,EACK,CACL,IAAK,GAAGC,CAAS,GAAG7D,CAAW,GAAGzN,CAAG,GACrC,QAASA,EACT,aAAcA,EACd,QAASgQ,EACT,OAAQsB,EACR,WAAY,KAAK,qBAAqB5Q,CAAO,CACzD,EAEe,GAAG4Q,CAAS,GAAG7D,CAAW,GAAGzN,CAAG,EACzC,CACA,OAAIqR,EACK,CACL,IAAKrR,EACL,QAASA,EACT,aAAcA,EACd,QAASgQ,EACT,OAAQsB,EACR,WAAY,KAAK,qBAAqB5Q,CAAO,CACvD,EAEaV,CACT,CACA,MAAM8Q,EAAW,KAAK,QAAQK,EAAMzQ,CAAO,EAC3C,IAAIoK,EAAMgG,GAAYA,EAAS,IAC/B,MAAMU,EAAaV,GAAYA,EAAS,SAAW9Q,EAC7CyR,EAAkBX,GAAYA,EAAS,cAAgB9Q,EACvD0R,EAAU,OAAO,UAAU,SAAS,MAAM5G,CAAG,EAC7C6G,EAAW,CAAC,kBAAmB,oBAAqB,iBAAiB,EACrEC,EAAalR,EAAQ,aAAe,OAAYA,EAAQ,WAAa,KAAK,QAAQ,WAClFmR,EAA6B,CAAC,KAAK,YAAc,KAAK,WAAW,eACjEC,EAAiB,CAACnH,EAASG,CAAG,GAAK,OAAOA,GAAQ,WAAa,OAAOA,GAAQ,SACpF,GAAI+G,GAA8B/G,GAAOgH,GAAkBH,EAAS,QAAQD,CAAO,EAAI,GAAK,EAAE/G,EAASiH,CAAU,GAAK,MAAM,QAAQ9G,CAAG,GAAI,CACzI,GAAI,CAACpK,EAAQ,eAAiB,CAAC,KAAK,QAAQ,cAAe,CACpD,KAAK,QAAQ,uBAChB,KAAK,OAAO,KAAK,iEAAiE,EAEpF,MAAMmN,EAAI,KAAK,QAAQ,sBAAwB,KAAK,QAAQ,sBAAsB2D,EAAY1G,EAAK,CACjG,GAAGpK,EACH,GAAIqQ,CACd,CAAS,EAAI,QAAQ/Q,CAAG,KAAK,KAAK,QAAQ,2CAClC,OAAIqR,GACFP,EAAS,IAAMjD,EACfiD,EAAS,WAAa,KAAK,qBAAqBpQ,CAAO,EAChDoQ,GAEFjD,CACT,CACA,GAAIH,EAAc,CAChB,MAAMqE,EAAiB,MAAM,QAAQjH,CAAG,EAClCK,EAAO4G,EAAiB,CAAA,EAAK,CAAA,EAC7BC,EAAcD,EAAiBN,EAAkBD,EACvD,UAAWlG,KAAKR,EACd,GAAI,OAAO,UAAU,eAAe,KAAKA,EAAKQ,CAAC,EAAG,CAChD,MAAM2G,EAAU,GAAGD,CAAW,GAAGtE,CAAY,GAAGpC,CAAC,GACjDH,EAAKG,CAAC,EAAI,KAAK,UAAU2G,EAAS,CAChC,GAAGvR,EAED,WAAY,GACZ,GAAIqQ,CAEpB,CAAa,EACG5F,EAAKG,CAAC,IAAM2G,IAAS9G,EAAKG,CAAC,EAAIR,EAAIQ,CAAC,EAC1C,CAEFR,EAAMK,CACR,CACF,SAAW0G,GAA8BlH,EAASiH,CAAU,GAAK,MAAM,QAAQ9G,CAAG,EAChFA,EAAMA,EAAI,KAAK8G,CAAU,EACrB9G,IAAKA,EAAM,KAAK,kBAAkBA,EAAKqG,EAAMzQ,EAAS0Q,CAAO,OAC5D,CACL,IAAIc,EAAc,GACdC,EAAU,GACd,MAAMC,EAAsB1R,EAAQ,QAAU,QAAa,CAACiK,EAASjK,EAAQ,KAAK,EAC5E2R,EAAkBzB,GAAW,gBAAgBlQ,CAAO,EACpD4R,EAAqBF,EAAsB,KAAK,eAAe,UAAUpC,EAAKtP,EAAQ,MAAOA,CAAO,EAAI,GACxG6R,EAAoC7R,EAAQ,SAAW0R,EAAsB,KAAK,eAAe,UAAUpC,EAAKtP,EAAQ,MAAO,CACnI,QAAS,EACjB,CAAO,EAAI,GACC8R,GAAwBJ,GAAuB,CAAC1R,EAAQ,SAAWA,EAAQ,QAAU,GAAK,KAAK,eAAe,iBAAgB,EAC9H+R,EAAeD,IAAyB9R,EAAQ,eAAe,KAAK,QAAQ,eAAe,MAAM,GAAKA,EAAQ,eAAe4R,CAAkB,EAAE,GAAK5R,EAAQ,eAAe6R,CAAiC,EAAE,GAAK7R,EAAQ,aAC/N,CAAC,KAAK,cAAcoK,CAAG,GAAKuH,IAC9BH,EAAc,GACdpH,EAAM2H,GAEH,KAAK,cAAc3H,CAAG,IACzBqH,EAAU,GACVrH,EAAM9K,GAGR,MAAM0S,IADiChS,EAAQ,gCAAkC,KAAK,QAAQ,iCACtCyR,EAAU,OAAYrH,EACxE6H,EAAgBN,GAAmBI,IAAiB3H,GAAO,KAAK,QAAQ,cAC9E,GAAIqH,GAAWD,GAAeS,EAAe,CAE3C,GADA,KAAK,OAAO,IAAIA,EAAgB,YAAc,aAAc3C,EAAKsB,EAAWtR,EAAK2S,EAAgBF,EAAe3H,CAAG,EAC/G4C,EAAc,CAChB,MAAMkF,EAAK,KAAK,QAAQ5S,EAAK,CAC3B,GAAGU,EACH,aAAc,EAC1B,CAAW,EACGkS,GAAMA,EAAG,KAAK,KAAK,OAAO,KAAK,iLAAiL,CACtN,CACA,IAAIC,EAAO,CAAA,EACX,MAAMC,EAAe,KAAK,cAAc,iBAAiB,KAAK,QAAQ,YAAapS,EAAQ,KAAO,KAAK,QAAQ,EAC/G,GAAI,KAAK,QAAQ,gBAAkB,YAAcoS,GAAgBA,EAAa,CAAC,EAC7E,QAAS7X,EAAI,EAAGA,EAAI6X,EAAa,OAAQ7X,IACvC4X,EAAK,KAAKC,EAAa7X,CAAC,CAAC,OAElB,KAAK,QAAQ,gBAAkB,MACxC4X,EAAO,KAAK,cAAc,mBAAmBnS,EAAQ,KAAO,KAAK,QAAQ,EAEzEmS,EAAK,KAAKnS,EAAQ,KAAO,KAAK,QAAQ,EAExC,MAAMqS,EAAO,CAACC,EAAGhH,EAAGiH,IAAyB,CAC3C,MAAMC,EAAoBb,GAAmBY,IAAyBnI,EAAMmI,EAAuBP,GAC/F,KAAK,QAAQ,kBACf,KAAK,QAAQ,kBAAkBM,EAAG1B,EAAWtF,EAAGkH,EAAmBP,EAAejS,CAAO,EAChF,KAAK,kBAAoB,KAAK,iBAAiB,aACxD,KAAK,iBAAiB,YAAYsS,EAAG1B,EAAWtF,EAAGkH,EAAmBP,EAAejS,CAAO,EAE9F,KAAK,KAAK,aAAcsS,EAAG1B,EAAWtF,EAAGlB,CAAG,CAC9C,EACI,KAAK,QAAQ,cACX,KAAK,QAAQ,oBAAsBsH,EACrCS,EAAK,QAAQM,GAAY,CACvB,MAAMC,EAAW,KAAK,eAAe,YAAYD,EAAUzS,CAAO,EAC9D8R,IAAyB9R,EAAQ,eAAe,KAAK,QAAQ,eAAe,MAAM,GAAK0S,EAAS,QAAQ,GAAG,KAAK,QAAQ,eAAe,MAAM,EAAI,GACnJA,EAAS,KAAK,GAAG,KAAK,QAAQ,eAAe,MAAM,EAErDA,EAAS,QAAQC,GAAU,CACzBN,EAAK,CAACI,CAAQ,EAAGnT,EAAMqT,EAAQ3S,EAAQ,eAAe2S,CAAM,EAAE,GAAKZ,CAAY,CACjF,CAAC,CACH,CAAC,EAEDM,EAAKF,EAAM7S,EAAKyS,CAAY,EAGlC,CACA3H,EAAM,KAAK,kBAAkBA,EAAKqG,EAAMzQ,EAASoQ,EAAUM,CAAO,EAC9De,GAAWrH,IAAQ9K,GAAO,KAAK,QAAQ,8BAA6B8K,EAAM,GAAGwG,CAAS,IAAItR,CAAG,KAC5FmS,GAAWD,IAAgB,KAAK,QAAQ,yBACvC,KAAK,QAAQ,mBAAqB,KACpCpH,EAAM,KAAK,QAAQ,uBAAuB,KAAK,QAAQ,4BAA8B,GAAGwG,CAAS,IAAItR,CAAG,GAAKA,EAAKkS,EAAcpH,EAAM,MAAS,EAE/IA,EAAM,KAAK,QAAQ,uBAAuBA,CAAG,EAGnD,CACA,OAAIuG,GACFP,EAAS,IAAMhG,EACfgG,EAAS,WAAa,KAAK,qBAAqBpQ,CAAO,EAChDoQ,GAEFhG,CACT,CACA,kBAAkBA,EAAK9K,EAAKU,EAASoQ,EAAUM,EAAS,CACtD,IAAIkC,EAAQ,KACZ,GAAI,KAAK,YAAc,KAAK,WAAW,MACrCxI,EAAM,KAAK,WAAW,MAAMA,EAAK,CAC/B,GAAG,KAAK,QAAQ,cAAc,iBAC9B,GAAGpK,CACX,EAASA,EAAQ,KAAO,KAAK,UAAYoQ,EAAS,QAASA,EAAS,OAAQA,EAAS,QAAS,CACtF,SAAAA,CACR,CAAO,UACQ,CAACpQ,EAAQ,kBAAmB,CACjCA,EAAQ,eAAe,KAAK,aAAa,KAAK,CAChD,GAAGA,EAED,cAAe,CACb,GAAG,KAAK,QAAQ,cAChB,GAAGA,EAAQ,aACvB,CAEA,CAAO,EACD,MAAM6S,EAAkB5I,EAASG,CAAG,IAAMpK,GAAWA,EAAQ,eAAiBA,EAAQ,cAAc,kBAAoB,OAAYA,EAAQ,cAAc,gBAAkB,KAAK,QAAQ,cAAc,iBACvM,IAAI8S,EACJ,GAAID,EAAiB,CACnB,MAAME,EAAK3I,EAAI,MAAM,KAAK,aAAa,aAAa,EACpD0I,EAAUC,GAAMA,EAAG,MACrB,CACA,IAAIpU,EAAOqB,EAAQ,SAAW,CAACiK,EAASjK,EAAQ,OAAO,EAAIA,EAAQ,QAAUA,EAM7E,GALI,KAAK,QAAQ,cAAc,mBAAkBrB,EAAO,CACtD,GAAG,KAAK,QAAQ,cAAc,iBAC9B,GAAGA,CACX,GACMyL,EAAM,KAAK,aAAa,YAAYA,EAAKzL,EAAMqB,EAAQ,KAAO,KAAK,UAAYoQ,EAAS,QAASpQ,CAAO,EACpG6S,EAAiB,CACnB,MAAMG,EAAK5I,EAAI,MAAM,KAAK,aAAa,aAAa,EAC9C6I,EAAUD,GAAMA,EAAG,OACrBF,EAAUG,IAASjT,EAAQ,KAAO,GACxC,CACI,CAACA,EAAQ,KAAO,KAAK,QAAQ,mBAAqB,MAAQoQ,GAAYA,EAAS,MAAKpQ,EAAQ,IAAM,KAAK,UAAYoQ,EAAS,SAC5HpQ,EAAQ,OAAS,KAAOoK,EAAM,KAAK,aAAa,KAAKA,EAAK,UAAY,CACxE,QAAS6D,EAAO,UAAU,OAAQhM,EAAO,IAAI,MAAMgM,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAC/EjM,EAAKiM,CAAI,EAAI,UAAUA,CAAI,EAE7B,OAAIwC,GAAWA,EAAQ,CAAC,IAAMzO,EAAK,CAAC,GAAK,CAACjC,EAAQ,SAChD4S,EAAM,OAAO,KAAK,6CAA6C3Q,EAAK,CAAC,CAAC,YAAY3C,EAAI,CAAC,CAAC,EAAE,EACnF,MAEFsT,EAAM,UAAU,GAAG3Q,EAAM3C,CAAG,CACrC,EAAGU,CAAO,GACNA,EAAQ,eAAe,KAAK,aAAa,MAAK,CACpD,CACA,MAAMkT,EAAclT,EAAQ,aAAe,KAAK,QAAQ,YAClDmT,EAAqBlJ,EAASiJ,CAAW,EAAI,CAACA,CAAW,EAAIA,EACnE,OAAyB9I,GAAQ,MAAQ+I,GAAsBA,EAAmB,QAAUnT,EAAQ,qBAAuB,KACzHoK,EAAMwF,GAAc,OAAOuD,EAAoB/I,EAAK9K,EAAK,KAAK,SAAW,KAAK,QAAQ,wBAA0B,CAC9G,aAAc,CACZ,GAAG8Q,EACH,WAAY,KAAK,qBAAqBpQ,CAAO,CACvD,EACQ,GAAGA,CACX,EAAUA,EAAS,IAAI,GAEZoK,CACT,CACA,QAAQqG,EAAM,CACZ,IAAIzQ,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9EoT,EACA3B,EACA4B,EACAC,EACAC,EACJ,OAAItJ,EAASwG,CAAI,IAAGA,EAAO,CAACA,CAAI,GAChCA,EAAK,QAAQnF,GAAK,CAChB,GAAI,KAAK,cAAc8H,CAAK,EAAG,OAC/B,MAAMI,EAAY,KAAK,eAAelI,EAAGtL,CAAO,EAC1CV,EAAMkU,EAAU,IACtB/B,EAAUnS,EACV,IAAI+Q,EAAamD,EAAU,WACvB,KAAK,QAAQ,aAAYnD,EAAaA,EAAW,OAAO,KAAK,QAAQ,UAAU,GACnF,MAAMqB,EAAsB1R,EAAQ,QAAU,QAAa,CAACiK,EAASjK,EAAQ,KAAK,EAC5E8R,EAAwBJ,GAAuB,CAAC1R,EAAQ,SAAWA,EAAQ,QAAU,GAAK,KAAK,eAAe,iBAAgB,EAC9HyT,EAAuBzT,EAAQ,UAAY,SAAciK,EAASjK,EAAQ,OAAO,GAAK,OAAOA,EAAQ,SAAY,WAAaA,EAAQ,UAAY,GAClJ0T,EAAQ1T,EAAQ,KAAOA,EAAQ,KAAO,KAAK,cAAc,mBAAmBA,EAAQ,KAAO,KAAK,SAAUA,EAAQ,WAAW,EACnIqQ,EAAW,QAAQhB,GAAM,CACnB,KAAK,cAAc+D,CAAK,IAC5BG,EAASlE,EACL,CAACY,GAAiB,GAAGyD,EAAM,CAAC,CAAC,IAAIrE,CAAE,EAAE,GAAK,KAAK,OAAS,KAAK,MAAM,oBAAsB,CAAC,KAAK,MAAM,mBAAmBkE,CAAM,IAChItD,GAAiB,GAAGyD,EAAM,CAAC,CAAC,IAAIrE,CAAE,EAAE,EAAI,GACxC,KAAK,OAAO,KAAK,QAAQoC,CAAO,oBAAoBiC,EAAM,KAAK,IAAI,CAAC,sCAAsCH,CAAM,uBAAwB,0NAA0N,GAEpWG,EAAM,QAAQ9F,GAAQ,CACpB,GAAI,KAAK,cAAcwF,CAAK,EAAG,OAC/BE,EAAU1F,EACV,MAAM+F,EAAY,CAACrU,CAAG,EACtB,GAAI,KAAK,YAAc,KAAK,WAAW,cACrC,KAAK,WAAW,cAAcqU,EAAWrU,EAAKsO,EAAMyB,EAAIrP,CAAO,MAC1D,CACL,IAAI4T,EACAlC,IAAqBkC,EAAe,KAAK,eAAe,UAAUhG,EAAM5N,EAAQ,MAAOA,CAAO,GAClG,MAAM6T,EAAa,GAAG,KAAK,QAAQ,eAAe,OAC5CC,EAAgB,GAAG,KAAK,QAAQ,eAAe,UAAU,KAAK,QAAQ,eAAe,GAU3F,GATIpC,IACFiC,EAAU,KAAKrU,EAAMsU,CAAY,EAC7B5T,EAAQ,SAAW4T,EAAa,QAAQE,CAAa,IAAM,GAC7DH,EAAU,KAAKrU,EAAMsU,EAAa,QAAQE,EAAe,KAAK,QAAQ,eAAe,CAAC,EAEpFhC,GACF6B,EAAU,KAAKrU,EAAMuU,CAAU,GAG/BJ,EAAsB,CACxB,MAAMM,EAAa,GAAGzU,CAAG,GAAG,KAAK,QAAQ,gBAAgB,GAAGU,EAAQ,OAAO,GAC3E2T,EAAU,KAAKI,CAAU,EACrBrC,IACFiC,EAAU,KAAKI,EAAaH,CAAY,EACpC5T,EAAQ,SAAW4T,EAAa,QAAQE,CAAa,IAAM,GAC7DH,EAAU,KAAKI,EAAaH,EAAa,QAAQE,EAAe,KAAK,QAAQ,eAAe,CAAC,EAE3FhC,GACF6B,EAAU,KAAKI,EAAaF,CAAU,EAG5C,CACF,CACA,IAAIG,EACJ,KAAOA,EAAcL,EAAU,OACxB,KAAK,cAAcP,CAAK,IAC3BC,EAAeW,EACfZ,EAAQ,KAAK,YAAYxF,EAAMyB,EAAI2E,EAAahU,CAAO,EAG7D,CAAC,EACH,CAAC,CACH,CAAC,EACM,CACL,IAAKoT,EACL,QAAA3B,EACA,aAAA4B,EACA,QAAAC,EACA,OAAAC,CACN,CACE,CACA,cAAcnJ,EAAK,CACjB,OAAOA,IAAQ,QAAa,EAAE,CAAC,KAAK,QAAQ,YAAcA,IAAQ,OAAS,EAAE,CAAC,KAAK,QAAQ,mBAAqBA,IAAQ,GAC1H,CACA,YAAYwD,EAAMyB,EAAI/P,EAAK,CACzB,IAAIU,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,OAAI,KAAK,YAAc,KAAK,WAAW,YAAoB,KAAK,WAAW,YAAY4N,EAAMyB,EAAI/P,EAAKU,CAAO,EACtG,KAAK,cAAc,YAAY4N,EAAMyB,EAAI/P,EAAKU,CAAO,CAC9D,CACA,sBAAuB,CACrB,IAAIA,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,MAAMiU,EAAc,CAAC,eAAgB,UAAW,UAAW,UAAW,MAAO,OAAQ,cAAe,KAAM,eAAgB,cAAe,gBAAiB,gBAAiB,aAAc,cAAe,eAAe,EACjNC,EAA2BlU,EAAQ,SAAW,CAACiK,EAASjK,EAAQ,OAAO,EAC7E,IAAIrB,EAAOuV,EAA2BlU,EAAQ,QAAUA,EAUxD,GATIkU,GAA4B,OAAOlU,EAAQ,MAAU,MACvDrB,EAAK,MAAQqB,EAAQ,OAEnB,KAAK,QAAQ,cAAc,mBAC7BrB,EAAO,CACL,GAAG,KAAK,QAAQ,cAAc,iBAC9B,GAAGA,CACX,GAEQ,CAACuV,EAA0B,CAC7BvV,EAAO,CACL,GAAGA,CACX,EACM,UAAWW,KAAO2U,EAChB,OAAOtV,EAAKW,CAAG,CAEnB,CACA,OAAOX,CACT,CACA,OAAO,gBAAgBqB,EAAS,CAC9B,MAAM0O,EAAS,eACf,UAAWyF,KAAUnU,EACnB,GAAI,OAAO,UAAU,eAAe,KAAKA,EAASmU,CAAM,GAAKzF,IAAWyF,EAAO,UAAU,EAAGzF,EAAO,MAAM,GAAmB1O,EAAQmU,CAAM,IAA5B,OAC5G,MAAO,GAGX,MAAO,EACT,CACF,CAEA,MAAMC,GAAaC,GAAUA,EAAO,OAAO,CAAC,EAAE,cAAgBA,EAAO,MAAM,CAAC,EAC5E,MAAMC,EAAa,CACjB,YAAYtU,EAAS,CACnB,KAAK,QAAUA,EACf,KAAK,cAAgB,KAAK,QAAQ,eAAiB,GACnD,KAAK,OAAS6O,EAAW,OAAO,eAAe,CACjD,CACA,sBAAsBjB,EAAM,CAE1B,GADAA,EAAOD,GAAeC,CAAI,EACtB,CAACA,GAAQA,EAAK,QAAQ,GAAG,EAAI,EAAG,OAAO,KAC3C,MAAMrC,EAAIqC,EAAK,MAAM,GAAG,EAGxB,OAFIrC,EAAE,SAAW,IACjBA,EAAE,IAAG,EACDA,EAAEA,EAAE,OAAS,CAAC,EAAE,YAAW,IAAO,KAAY,KAC3C,KAAK,mBAAmBA,EAAE,KAAK,GAAG,CAAC,CAC5C,CACA,wBAAwBqC,EAAM,CAE5B,GADAA,EAAOD,GAAeC,CAAI,EACtB,CAACA,GAAQA,EAAK,QAAQ,GAAG,EAAI,EAAG,OAAOA,EAC3C,MAAMrC,EAAIqC,EAAK,MAAM,GAAG,EACxB,OAAO,KAAK,mBAAmBrC,EAAE,CAAC,CAAC,CACrC,CACA,mBAAmBqC,EAAM,CACvB,GAAI3D,EAAS2D,CAAI,GAAKA,EAAK,QAAQ,GAAG,EAAI,GAAI,CAC5C,GAAI,OAAO,KAAS,KAAe,OAAO,KAAK,oBAAwB,IACrE,GAAI,CACF,IAAI2G,EAAgB,KAAK,oBAAoB3G,CAAI,EAAE,CAAC,EAIpD,GAHI2G,GAAiB,KAAK,QAAQ,eAChCA,EAAgBA,EAAc,YAAW,GAEvCA,EAAe,OAAOA,CAC5B,MAAY,CAAC,CAEf,MAAMC,EAAe,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAM,EAC5E,IAAIjJ,EAAIqC,EAAK,MAAM,GAAG,EACtB,OAAI,KAAK,QAAQ,aACfrC,EAAIA,EAAE,IAAIkJ,GAAQA,EAAK,YAAW,CAAE,EAC3BlJ,EAAE,SAAW,GACtBA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAW,EACvBA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAW,EACnBiJ,EAAa,QAAQjJ,EAAE,CAAC,EAAE,YAAW,CAAE,EAAI,KAAIA,EAAE,CAAC,EAAI6I,GAAW7I,EAAE,CAAC,EAAE,aAAa,IAC9EA,EAAE,SAAW,IACtBA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAW,EACnBA,EAAE,CAAC,EAAE,SAAW,IAAGA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAW,GAC1CA,EAAE,CAAC,IAAM,OAASA,EAAE,CAAC,EAAE,SAAW,IAAGA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAE,YAAW,GAC5DiJ,EAAa,QAAQjJ,EAAE,CAAC,EAAE,YAAW,CAAE,EAAI,KAAIA,EAAE,CAAC,EAAI6I,GAAW7I,EAAE,CAAC,EAAE,aAAa,GACnFiJ,EAAa,QAAQjJ,EAAE,CAAC,EAAE,YAAW,CAAE,EAAI,KAAIA,EAAE,CAAC,EAAI6I,GAAW7I,EAAE,CAAC,EAAE,aAAa,IAElFA,EAAE,KAAK,GAAG,CACnB,CACA,OAAO,KAAK,QAAQ,WAAa,KAAK,QAAQ,aAAeqC,EAAK,YAAW,EAAKA,CACpF,CACA,gBAAgBA,EAAM,CACpB,OAAI,KAAK,QAAQ,OAAS,gBAAkB,KAAK,QAAQ,4BACvDA,EAAO,KAAK,wBAAwBA,CAAI,GAEnC,CAAC,KAAK,eAAiB,CAAC,KAAK,cAAc,QAAU,KAAK,cAAc,QAAQA,CAAI,EAAI,EACjG,CACA,sBAAsB8F,EAAO,CAC3B,GAAI,CAACA,EAAO,OAAO,KACnB,IAAIN,EACJ,OAAAM,EAAM,QAAQ9F,GAAQ,CACpB,GAAIwF,EAAO,OACX,MAAMsB,EAAa,KAAK,mBAAmB9G,CAAI,GAC3C,CAAC,KAAK,QAAQ,eAAiB,KAAK,gBAAgB8G,CAAU,KAAGtB,EAAQsB,EAC/E,CAAC,EACG,CAACtB,GAAS,KAAK,QAAQ,eACzBM,EAAM,QAAQ9F,GAAQ,CACpB,GAAIwF,EAAO,OACX,MAAMuB,EAAU,KAAK,wBAAwB/G,CAAI,EACjD,GAAI,KAAK,gBAAgB+G,CAAO,EAAG,OAAOvB,EAAQuB,EAClDvB,EAAQ,KAAK,QAAQ,cAAc,KAAKwB,GAAgB,CACtD,GAAIA,IAAiBD,EAAS,OAAOC,EACrC,GAAI,EAAAA,EAAa,QAAQ,GAAG,EAAI,GAAKD,EAAQ,QAAQ,GAAG,EAAI,KACxDC,EAAa,QAAQ,GAAG,EAAI,GAAKD,EAAQ,QAAQ,GAAG,EAAI,GAAKC,EAAa,UAAU,EAAGA,EAAa,QAAQ,GAAG,CAAC,IAAMD,GACtHC,EAAa,QAAQD,CAAO,IAAM,GAAKA,EAAQ,OAAS,GAAG,OAAOC,CACxE,CAAC,CACH,CAAC,EAEExB,IAAOA,EAAQ,KAAK,iBAAiB,KAAK,QAAQ,WAAW,EAAE,CAAC,GAC9DA,CACT,CACA,iBAAiByB,EAAWjH,EAAM,CAChC,GAAI,CAACiH,EAAW,MAAO,CAAA,EAGvB,GAFI,OAAOA,GAAc,aAAYA,EAAYA,EAAUjH,CAAI,GAC3D3D,EAAS4K,CAAS,IAAGA,EAAY,CAACA,CAAS,GAC3C,MAAM,QAAQA,CAAS,EAAG,OAAOA,EACrC,GAAI,CAACjH,EAAM,OAAOiH,EAAU,SAAW,CAAA,EACvC,IAAIzB,EAAQyB,EAAUjH,CAAI,EAC1B,OAAKwF,IAAOA,EAAQyB,EAAU,KAAK,sBAAsBjH,CAAI,CAAC,GACzDwF,IAAOA,EAAQyB,EAAU,KAAK,mBAAmBjH,CAAI,CAAC,GACtDwF,IAAOA,EAAQyB,EAAU,KAAK,wBAAwBjH,CAAI,CAAC,GAC3DwF,IAAOA,EAAQyB,EAAU,SACvBzB,GAAS,CAAA,CAClB,CACA,mBAAmBxF,EAAMkH,EAAc,CACrC,MAAMC,EAAgB,KAAK,iBAAiBD,GAAgB,KAAK,QAAQ,aAAe,CAAA,EAAIlH,CAAI,EAC1F8F,EAAQ,CAAA,EACRsB,EAAU9H,GAAK,CACdA,IACD,KAAK,gBAAgBA,CAAC,EACxBwG,EAAM,KAAKxG,CAAC,EAEZ,KAAK,OAAO,KAAK,uDAAuDA,CAAC,EAAE,EAE/E,EACA,OAAIjD,EAAS2D,CAAI,IAAMA,EAAK,QAAQ,GAAG,EAAI,IAAMA,EAAK,QAAQ,GAAG,EAAI,KAC/D,KAAK,QAAQ,OAAS,gBAAgBoH,EAAQ,KAAK,mBAAmBpH,CAAI,CAAC,EAC3E,KAAK,QAAQ,OAAS,gBAAkB,KAAK,QAAQ,OAAS,eAAeoH,EAAQ,KAAK,sBAAsBpH,CAAI,CAAC,EACrH,KAAK,QAAQ,OAAS,eAAeoH,EAAQ,KAAK,wBAAwBpH,CAAI,CAAC,GAC1E3D,EAAS2D,CAAI,GACtBoH,EAAQ,KAAK,mBAAmBpH,CAAI,CAAC,EAEvCmH,EAAc,QAAQE,GAAM,CACtBvB,EAAM,QAAQuB,CAAE,EAAI,GAAGD,EAAQ,KAAK,mBAAmBC,CAAE,CAAC,CAChE,CAAC,EACMvB,CACT,CACF,CAEA,IAAIwB,GAAO,CAAC,CACV,KAAM,CAAC,MAAO,KAAM,KAAM,MAAO,KAAM,MAAO,MAAO,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,QAAS,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EACrI,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,CACN,EAAG,CACD,KAAM,CAAC,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,MAAO,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,MAAO,MAAO,KAAM,QAAS,KAAM,MAAO,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAC7Y,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,CACN,EAAG,CACD,KAAM,CAAC,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAC5I,GAAI,CAAC,CAAC,EACN,GAAI,CACN,EAAG,CACD,KAAM,CAAC,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,IAAI,EACtD,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,GAAG,EACxB,GAAI,CACN,EAAG,CACD,KAAM,CAAC,KAAM,IAAI,EACjB,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,CACN,EAAG,CACD,KAAM,CAAC,MAAO,IAAI,EAClB,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,CAAC,EACf,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAE,EACnB,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,EAAE,EAChB,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,CAAC,EACf,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAE,EACb,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,EACN,EAAG,CACD,KAAM,CAAC,KAAK,EACZ,GAAI,CAAC,EAAG,EAAG,CAAC,EACZ,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,GAAI,EAAE,EACjB,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,CAAC,EACT,GAAI,CACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAE,EACb,GAAI,EACN,EAAG,CACD,KAAM,CAAC,IAAI,EACX,GAAI,CAAC,EAAG,EAAG,EAAG,CAAC,EACf,GAAI,EACN,EAAG,CACD,KAAM,CAAC,KAAM,IAAI,EACjB,GAAI,CAAC,EAAG,EAAG,GAAI,EAAE,EACjB,GAAI,EACN,CAAC,EACGC,GAAqB,CACvB,EAAGC,GAAK,EAAOA,EAAI,GACnB,EAAGA,GAAK,EAAOA,GAAK,GACpB,EAAGA,GAAK,EACR,EAAGA,GAAYA,EAAI,IAAM,GAAKA,EAAI,KAAO,GAAK,EAAIA,EAAI,IAAM,GAAKA,EAAI,IAAM,IAAMA,EAAI,IAAM,IAAMA,EAAI,KAAO,IAAM,EAAI,EACtH,EAAGA,GAAYA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,EAAI,KAAO,GAAKA,EAAI,KAAO,GAAK,EAAIA,EAAI,KAAO,GAAK,EAAI,EAC9G,EAAGA,GAAYA,GAAK,EAAI,EAAIA,GAAK,GAAKA,GAAK,EAAI,EAAI,EACnD,EAAGA,GAAYA,GAAK,EAAI,EAAIA,EAAI,IAAM,GAAKA,EAAI,IAAM,IAAMA,EAAI,IAAM,IAAMA,EAAI,KAAO,IAAM,EAAI,EAChG,EAAGA,GAAYA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,GAAK,GAAKA,GAAK,GAAK,EAAI,EACjE,EAAGA,GAAK,EAAOA,GAAK,GACpB,GAAIA,GAAYA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,EAAI,EAAI,EAAIA,EAAI,GAAK,EAAI,EACnE,GAAIA,GAAYA,GAAK,GAAKA,GAAK,GAAK,EAAIA,GAAK,GAAKA,GAAK,GAAK,EAAIA,EAAI,GAAKA,EAAI,GAAK,EAAI,EACtF,GAAIA,GAAK,EAAOA,EAAI,IAAM,GAAKA,EAAI,KAAO,IAC1C,GAAIA,GAAK,EAAOA,IAAM,GACtB,GAAIA,GAAYA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAI,EACvD,GAAIA,GAAYA,EAAI,IAAM,GAAKA,EAAI,KAAO,GAAK,EAAIA,EAAI,IAAM,IAAMA,EAAI,IAAM,IAAMA,EAAI,KAAO,IAAM,EAAI,EACxG,GAAIA,GAAYA,EAAI,IAAM,GAAKA,EAAI,KAAO,GAAK,EAAIA,IAAM,EAAI,EAAI,EACjE,GAAIA,GAAYA,GAAK,GAAKA,EAAI,IAAM,GAAKA,EAAI,KAAO,GAAK,EAAI,EAC7D,GAAIA,GAAYA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAI,EAC1C,GAAIA,GAAYA,GAAK,EAAI,EAAIA,GAAK,GAAKA,EAAI,IAAM,GAAKA,EAAI,IAAM,GAAK,EAAIA,EAAI,IAAM,IAAMA,EAAI,IAAM,GAAK,EAAI,EAC5G,GAAIA,GAAYA,GAAK,EAAI,EAAIA,GAAK,GAAKA,EAAI,IAAM,GAAKA,EAAI,IAAM,GAAK,EAAI,EACzE,GAAIA,GAAYA,EAAI,KAAO,EAAI,EAAIA,EAAI,KAAO,EAAI,EAAIA,EAAI,KAAO,GAAKA,EAAI,KAAO,EAAI,EAAI,EACzF,GAAIA,GAAYA,GAAK,EAAI,EAAIA,GAAK,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAAOA,EAAI,IAAM,EAAI,EAAI,CACnF,EACA,MAAMC,GAAkB,CAAC,KAAM,KAAM,IAAI,EACnCC,GAAe,CAAC,IAAI,EACpBC,GAAgB,CACpB,KAAM,EACN,IAAK,EACL,IAAK,EACL,IAAK,EACL,KAAM,EACN,MAAO,CACT,EACMC,GAAc,IAAM,CACxB,MAAMC,EAAQ,CAAA,EACd,OAAAP,GAAK,QAAQxV,GAAO,CAClBA,EAAI,KAAK,QAAQ4S,GAAK,CACpBmD,EAAMnD,CAAC,EAAI,CACT,QAAS5S,EAAI,GACb,QAASyV,GAAmBzV,EAAI,EAAE,CAC1C,CACI,CAAC,CACH,CAAC,EACM+V,CACT,EACA,MAAMC,EAAe,CACnB,YAAYC,EAAe,CACzB,IAAI3V,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,KAAK,cAAgB2V,EACrB,KAAK,QAAU3V,EACf,KAAK,OAAS6O,EAAW,OAAO,gBAAgB,GAC3C,CAAC,KAAK,QAAQ,mBAAqByG,GAAa,SAAS,KAAK,QAAQ,iBAAiB,KAAO,OAAO,KAAS,KAAe,CAAC,KAAK,eACtI,KAAK,QAAQ,kBAAoB,KACjC,KAAK,OAAO,MAAM,oJAAoJ,GAExK,KAAK,MAAQE,GAAW,EACxB,KAAK,iBAAmB,CAAA,CAC1B,CACA,QAAQlG,EAAKpF,EAAK,CAChB,KAAK,MAAMoF,CAAG,EAAIpF,CACpB,CACA,YAAa,CACX,KAAK,iBAAmB,CAAA,CAC1B,CACA,QAAQ0D,EAAM,CACZ,IAAI5N,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,GAAI,KAAK,mBAAoB,CAC3B,MAAM4V,EAAcjI,GAAeC,IAAS,MAAQ,KAAOA,CAAI,EACzDE,EAAO9N,EAAQ,QAAU,UAAY,WACrCxB,EAAW,KAAK,UAAU,CAC9B,YAAAoX,EACA,KAAA9H,CACR,CAAO,EACD,GAAItP,KAAY,KAAK,iBACnB,OAAO,KAAK,iBAAiBA,CAAQ,EAEvC,IAAIqX,EACJ,GAAI,CACFA,EAAO,IAAI,KAAK,YAAYD,EAAa,CACvC,KAAA9H,CACV,CAAS,CACH,MAAc,CACZ,GAAI,CAACF,EAAK,MAAM,KAAK,EAAG,OACxB,MAAMkI,EAAU,KAAK,cAAc,wBAAwBlI,CAAI,EAC/DiI,EAAO,KAAK,QAAQC,EAAS9V,CAAO,CACtC,CACA,YAAK,iBAAiBxB,CAAQ,EAAIqX,EAC3BA,CACT,CACA,OAAO,KAAK,MAAMjI,CAAI,GAAK,KAAK,MAAM,KAAK,cAAc,wBAAwBA,CAAI,CAAC,CACxF,CACA,YAAYA,EAAM,CAChB,IAAI5N,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,MAAM6V,EAAO,KAAK,QAAQjI,EAAM5N,CAAO,EACvC,OAAI,KAAK,mBACA6V,GAAQA,EAAK,gBAAe,EAAG,iBAAiB,OAAS,EAE3DA,GAAQA,EAAK,QAAQ,OAAS,CACvC,CACA,oBAAoBjI,EAAMtO,EAAK,CAC7B,IAAIU,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,OAAO,KAAK,YAAY4N,EAAM5N,CAAO,EAAE,IAAI2S,GAAU,GAAGrT,CAAG,GAAGqT,CAAM,EAAE,CACxE,CACA,YAAY/E,EAAM,CAChB,IAAI5N,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,MAAM6V,EAAO,KAAK,QAAQjI,EAAM5N,CAAO,EACvC,OAAK6V,EAGD,KAAK,mBACAA,EAAK,gBAAe,EAAG,iBAAiB,KAAK,CAACE,EAAiBC,IAAoBT,GAAcQ,CAAe,EAAIR,GAAcS,CAAe,CAAC,EAAE,IAAIC,GAAkB,GAAG,KAAK,QAAQ,OAAO,GAAGjW,EAAQ,QAAU,UAAU,KAAK,QAAQ,OAAO,GAAK,EAAE,GAAGiW,CAAc,EAAE,EAEhRJ,EAAK,QAAQ,IAAIK,GAAU,KAAK,UAAUtI,EAAMsI,EAAQlW,CAAO,CAAC,EAL9D,CAAA,CAMX,CACA,UAAU4N,EAAMuI,EAAO,CACrB,IAAInW,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,MAAM6V,EAAO,KAAK,QAAQjI,EAAM5N,CAAO,EACvC,OAAI6V,EACE,KAAK,mBACA,GAAG,KAAK,QAAQ,OAAO,GAAG7V,EAAQ,QAAU,UAAU,KAAK,QAAQ,OAAO,GAAK,EAAE,GAAG6V,EAAK,OAAOM,CAAK,CAAC,GAExG,KAAK,yBAAyBN,EAAMM,CAAK,GAElD,KAAK,OAAO,KAAK,6BAA6BvI,CAAI,EAAE,EAC7C,GACT,CACA,yBAAyBiI,EAAMM,EAAO,CACpC,MAAMC,EAAMP,EAAK,MAAQA,EAAK,QAAQM,CAAK,EAAIN,EAAK,QAAQ,KAAK,IAAIM,CAAK,CAAC,EAC3E,IAAIxD,EAASkD,EAAK,QAAQO,CAAG,EACzB,KAAK,QAAQ,sBAAwBP,EAAK,QAAQ,SAAW,GAAKA,EAAK,QAAQ,CAAC,IAAM,IACpFlD,IAAW,EACbA,EAAS,SACAA,IAAW,IACpBA,EAAS,KAGb,MAAM0D,EAAe,IAAM,KAAK,QAAQ,SAAW1D,EAAO,SAAQ,EAAK,KAAK,QAAQ,QAAUA,EAAO,SAAQ,EAAKA,EAAO,SAAQ,EACjI,OAAI,KAAK,QAAQ,oBAAsB,KACjCA,IAAW,EAAU,GACrB,OAAOA,GAAW,SAAiB,WAAWA,EAAO,SAAQ,CAAE,GAC5D0D,EAAY,EACV,KAAK,QAAQ,oBAAsB,MAEnC,KAAK,QAAQ,sBAAwBR,EAAK,QAAQ,SAAW,GAAKA,EAAK,QAAQ,CAAC,IAAM,EADxFQ,EAAY,EAId,KAAK,QAAQ,SAAWD,EAAI,SAAQ,EAAK,KAAK,QAAQ,QAAUA,EAAI,SAAQ,EAAKA,EAAI,SAAQ,CACtG,CACA,kBAAmB,CACjB,MAAO,CAACf,GAAgB,SAAS,KAAK,QAAQ,iBAAiB,CACjE,CACF,CAEA,MAAMiB,GAAuB,SAAU3X,EAAMkN,EAAavM,EAAK,CAC7D,IAAI0N,EAAe,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,IACnFuC,EAAsB,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,GAC1FtE,EAAOW,GAAoBjN,EAAMkN,EAAavM,CAAG,EACrD,MAAI,CAAC2L,GAAQsE,GAAuBtF,EAAS3K,CAAG,IAC9C2L,EAAOqC,GAAS3O,EAAMW,EAAK0N,CAAY,EACnC/B,IAAS,SAAWA,EAAOqC,GAASzB,EAAavM,EAAK0N,CAAY,IAEjE/B,CACT,EACMsL,GAAYC,GAAOA,EAAI,QAAQ,MAAO,MAAM,EAClD,MAAMC,EAAa,CACjB,aAAc,CACZ,IAAIzW,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,KAAK,OAAS6O,EAAW,OAAO,cAAc,EAC9C,KAAK,QAAU7O,EACf,KAAK,OAASA,EAAQ,eAAiBA,EAAQ,cAAc,SAAW8L,GAASA,GACjF,KAAK,KAAK9L,CAAO,CACnB,CACA,MAAO,CACL,IAAIA,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC7EA,EAAQ,gBAAeA,EAAQ,cAAgB,CAClD,YAAa,EACnB,GACI,KAAM,CACJ,OAAQ0W,EACR,YAAAC,EACA,oBAAAC,EACA,OAAAlI,EACA,cAAAmI,EACA,OAAAlE,EACA,cAAAmE,EACA,gBAAAC,EACA,eAAAC,EACA,eAAAC,EACA,cAAAC,EACA,qBAAAC,EACA,cAAAC,EACA,qBAAAC,EACA,wBAAAC,EACA,YAAAC,EACA,aAAAC,CACN,EAAQxX,EAAQ,cACZ,KAAK,OAAS0W,IAAa,OAAYA,EAAWpK,GAClD,KAAK,YAAcqK,IAAgB,OAAYA,EAAc,GAC7D,KAAK,oBAAsBC,IAAwB,OAAYA,EAAsB,GACrF,KAAK,OAASlI,EAAStC,EAAYsC,CAAM,EAAImI,GAAiB,KAC9D,KAAK,OAASlE,EAASvG,EAAYuG,CAAM,EAAImE,GAAiB,KAC9D,KAAK,gBAAkBC,GAAmB,IAC1C,KAAK,eAAiBC,EAAiB,GAAKC,GAAkB,IAC9D,KAAK,eAAiB,KAAK,eAAiB,GAAKD,GAAkB,GACnE,KAAK,cAAgBE,EAAgB9K,EAAY8K,CAAa,EAAIC,GAAwB/K,EAAY,KAAK,EAC3G,KAAK,cAAgBgL,EAAgBhL,EAAYgL,CAAa,EAAIC,GAAwBjL,EAAY,GAAG,EACzG,KAAK,wBAA0BkL,GAA2B,IAC1D,KAAK,YAAcC,GAAe,IAClC,KAAK,aAAeC,IAAiB,OAAYA,EAAe,GAChE,KAAK,YAAW,CAClB,CACA,OAAQ,CACF,KAAK,SAAS,KAAK,KAAK,KAAK,OAAO,CAC1C,CACA,aAAc,CACZ,MAAMC,EAAmB,CAACC,EAAgBjL,IACpCiL,GAAkBA,EAAe,SAAWjL,GAC9CiL,EAAe,UAAY,EACpBA,GAEF,IAAI,OAAOjL,EAAS,GAAG,EAEhC,KAAK,OAASgL,EAAiB,KAAK,OAAQ,GAAG,KAAK,MAAM,QAAQ,KAAK,MAAM,EAAE,EAC/E,KAAK,eAAiBA,EAAiB,KAAK,eAAgB,GAAG,KAAK,MAAM,GAAG,KAAK,cAAc,QAAQ,KAAK,cAAc,GAAG,KAAK,MAAM,EAAE,EAC3I,KAAK,cAAgBA,EAAiB,KAAK,cAAe,GAAG,KAAK,aAAa,QAAQ,KAAK,aAAa,EAAE,CAC7G,CACA,YAAY1W,EAAKpC,EAAM2Q,EAAKtP,EAAS,CACnC,IAAI2X,EACA7L,EACA8L,EACJ,MAAM/L,EAAc,KAAK,SAAW,KAAK,QAAQ,eAAiB,KAAK,QAAQ,cAAc,kBAAoB,CAAA,EAC3GgM,EAAevY,GAAO,CAC1B,GAAIA,EAAI,QAAQ,KAAK,eAAe,EAAI,EAAG,CACzC,MAAM2L,EAAOqL,GAAqB3X,EAAMkN,EAAavM,EAAK,KAAK,QAAQ,aAAc,KAAK,QAAQ,mBAAmB,EACrH,OAAO,KAAK,aAAe,KAAK,OAAO2L,EAAM,OAAWqE,EAAK,CAC3D,GAAGtP,EACH,GAAGrB,EACH,iBAAkBW,CAC5B,CAAS,EAAI2L,CACP,CACA,MAAMM,EAAIjM,EAAI,MAAM,KAAK,eAAe,EAClCgM,EAAIC,EAAE,MAAK,EAAG,KAAI,EAClBuM,EAAIvM,EAAE,KAAK,KAAK,eAAe,EAAE,KAAI,EAC3C,OAAO,KAAK,OAAO+K,GAAqB3X,EAAMkN,EAAaP,EAAG,KAAK,QAAQ,aAAc,KAAK,QAAQ,mBAAmB,EAAGwM,EAAGxI,EAAK,CAClI,GAAGtP,EACH,GAAGrB,EACH,iBAAkB2M,CAC1B,CAAO,CACH,EACA,KAAK,YAAW,EAChB,MAAMyM,EAA8B/X,GAAWA,EAAQ,6BAA+B,KAAK,QAAQ,4BAC7F6S,EAAkB7S,GAAWA,EAAQ,eAAiBA,EAAQ,cAAc,kBAAoB,OAAYA,EAAQ,cAAc,gBAAkB,KAAK,QAAQ,cAAc,gBAQrL,MAPc,CAAC,CACb,MAAO,KAAK,eACZ,UAAWwW,GAAOD,GAAUC,CAAG,CACrC,EAAO,CACD,MAAO,KAAK,OACZ,UAAWA,GAAO,KAAK,YAAcD,GAAU,KAAK,OAAOC,CAAG,CAAC,EAAID,GAAUC,CAAG,CACtF,CAAK,EACK,QAAQwB,GAAQ,CAEpB,IADAJ,EAAW,EACJD,EAAQK,EAAK,MAAM,KAAKjX,CAAG,GAAG,CACnC,MAAMkX,EAAaN,EAAM,CAAC,EAAE,KAAI,EAEhC,GADA7L,EAAQ+L,EAAaI,CAAU,EAC3BnM,IAAU,OACZ,GAAI,OAAOiM,GAAgC,WAAY,CACrD,MAAMG,EAAOH,EAA4BhX,EAAK4W,EAAO3X,CAAO,EAC5D8L,EAAQ7B,EAASiO,CAAI,EAAIA,EAAO,EAClC,SAAWlY,GAAW,OAAO,UAAU,eAAe,KAAKA,EAASiY,CAAU,EAC5EnM,EAAQ,WACC+G,EAAiB,CAC1B/G,EAAQ6L,EAAM,CAAC,EACf,QACF,MACE,KAAK,OAAO,KAAK,8BAA8BM,CAAU,sBAAsBlX,CAAG,EAAE,EACpF+K,EAAQ,OAED,CAAC7B,EAAS6B,CAAK,GAAK,CAAC,KAAK,sBACnCA,EAAQvB,GAAWuB,CAAK,GAE1B,MAAMqM,EAAYH,EAAK,UAAUlM,CAAK,EAStC,GARA/K,EAAMA,EAAI,QAAQ4W,EAAM,CAAC,EAAGQ,CAAS,EACjCtF,GACFmF,EAAK,MAAM,WAAalM,EAAM,OAC9BkM,EAAK,MAAM,WAAaL,EAAM,CAAC,EAAE,QAEjCK,EAAK,MAAM,UAAY,EAEzBJ,IACIA,GAAY,KAAK,YACnB,KAEJ,CACF,CAAC,EACM7W,CACT,CACA,KAAKA,EAAKkU,EAAI,CACZ,IAAIjV,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9E2X,EACA7L,EACAsM,EACJ,MAAMC,EAAmB,CAAC/Y,EAAKgZ,IAAqB,CAClD,MAAMC,EAAM,KAAK,wBACjB,GAAIjZ,EAAI,QAAQiZ,CAAG,EAAI,EAAG,OAAOjZ,EACjC,MAAM4N,EAAI5N,EAAI,MAAM,IAAI,OAAO,GAAGiZ,CAAG,OAAO,CAAC,EAC7C,IAAIC,EAAgB,IAAItL,EAAE,CAAC,CAAC,GAC5B5N,EAAM4N,EAAE,CAAC,EACTsL,EAAgB,KAAK,YAAYA,EAAeJ,CAAa,EAC7D,MAAMK,EAAsBD,EAAc,MAAM,IAAI,EAC9CE,EAAsBF,EAAc,MAAM,IAAI,GAChDC,GAAuBA,EAAoB,OAAS,IAAM,GAAK,CAACC,GAAuBA,EAAoB,OAAS,IAAM,KAC5HF,EAAgBA,EAAc,QAAQ,KAAM,GAAG,GAEjD,GAAI,CACFJ,EAAgB,KAAK,MAAMI,CAAa,EACpCF,IAAkBF,EAAgB,CACpC,GAAGE,EACH,GAAGF,CACb,EACM,OAAS9W,EAAG,CACV,YAAK,OAAO,KAAK,oDAAoDhC,CAAG,GAAIgC,CAAC,EACtE,GAAGhC,CAAG,GAAGiZ,CAAG,GAAGC,CAAa,EACrC,CACA,OAAIJ,EAAc,cAAgBA,EAAc,aAAa,QAAQ,KAAK,MAAM,EAAI,IAAI,OAAOA,EAAc,aACtG9Y,CACT,EACA,KAAOqY,EAAQ,KAAK,cAAc,KAAK5W,CAAG,GAAG,CAC3C,IAAI4X,EAAa,CAAA,EACjBP,EAAgB,CACd,GAAGpY,CACX,EACMoY,EAAgBA,EAAc,SAAW,CAACnO,EAASmO,EAAc,OAAO,EAAIA,EAAc,QAAUA,EACpGA,EAAc,mBAAqB,GACnC,OAAOA,EAAc,aACrB,IAAIQ,EAAW,GACf,GAAIjB,EAAM,CAAC,EAAE,QAAQ,KAAK,eAAe,IAAM,IAAM,CAAC,OAAO,KAAKA,EAAM,CAAC,CAAC,EAAG,CAC3E,MAAMxK,EAAIwK,EAAM,CAAC,EAAE,MAAM,KAAK,eAAe,EAAE,IAAIkB,GAAQA,EAAK,KAAI,CAAE,EACtElB,EAAM,CAAC,EAAIxK,EAAE,MAAK,EAClBwL,EAAaxL,EACbyL,EAAW,EACb,CAEA,GADA9M,EAAQmJ,EAAGoD,EAAiB,KAAK,KAAMV,EAAM,CAAC,EAAE,KAAI,EAAIS,CAAa,EAAGA,CAAa,EACjFtM,GAAS6L,EAAM,CAAC,IAAM5W,GAAO,CAACkJ,EAAS6B,CAAK,EAAG,OAAOA,EACrD7B,EAAS6B,CAAK,IAAGA,EAAQvB,GAAWuB,CAAK,GACzCA,IACH,KAAK,OAAO,KAAK,qBAAqB6L,EAAM,CAAC,CAAC,gBAAgB5W,CAAG,EAAE,EACnE+K,EAAQ,IAEN8M,IACF9M,EAAQ6M,EAAW,OAAO,CAAChJ,EAAG,IAAM,KAAK,OAAOA,EAAG,EAAG3P,EAAQ,IAAK,CACjE,GAAGA,EACH,iBAAkB2X,EAAM,CAAC,EAAE,KAAI,CACzC,CAAS,EAAG7L,EAAM,MAAM,GAElB/K,EAAMA,EAAI,QAAQ4W,EAAM,CAAC,EAAG7L,CAAK,EACjC,KAAK,OAAO,UAAY,CAC1B,CACA,OAAO/K,CACT,CACF,CAEA,MAAM+X,GAAiBC,GAAa,CAClC,IAAIC,EAAaD,EAAU,YAAW,EAAG,KAAI,EAC7C,MAAME,EAAgB,CAAA,EACtB,GAAIF,EAAU,QAAQ,GAAG,EAAI,GAAI,CAC/B,MAAMxN,EAAIwN,EAAU,MAAM,GAAG,EAC7BC,EAAazN,EAAE,CAAC,EAAE,YAAW,EAAG,KAAI,EACpC,MAAM2N,EAAS3N,EAAE,CAAC,EAAE,UAAU,EAAGA,EAAE,CAAC,EAAE,OAAS,CAAC,EAC5CyN,IAAe,YAAcE,EAAO,QAAQ,GAAG,EAAI,EAChDD,EAAc,WAAUA,EAAc,SAAWC,EAAO,KAAI,GACxDF,IAAe,gBAAkBE,EAAO,QAAQ,GAAG,EAAI,EAC3DD,EAAc,QAAOA,EAAc,MAAQC,EAAO,KAAI,GAE9CA,EAAO,MAAM,GAAG,EACxB,QAAQC,GAAO,CAClB,GAAIA,EAAK,CACP,KAAM,CAAC7Z,EAAK,GAAG8Z,CAAI,EAAID,EAAI,MAAM,GAAG,EAC9B3C,EAAM4C,EAAK,KAAK,GAAG,EAAE,OAAO,QAAQ,WAAY,EAAE,EAClDC,EAAa/Z,EAAI,KAAI,EACtB2Z,EAAcI,CAAU,IAAGJ,EAAcI,CAAU,EAAI7C,GACxDA,IAAQ,UAASyC,EAAcI,CAAU,EAAI,IAC7C7C,IAAQ,SAAQyC,EAAcI,CAAU,EAAI,IAC3C,MAAM7C,CAAG,IAAGyC,EAAcI,CAAU,EAAI,SAAS7C,EAAK,EAAE,EAC/D,CACF,CAAC,CAEL,CACA,MAAO,CACL,WAAAwC,EACA,cAAAC,CACJ,CACA,EACMK,EAAwB7Z,GAAM,CAClC,MAAM8Z,EAAQ,CAAA,EACd,MAAO,CAAC/C,EAAKlH,EAAKtP,IAAY,CAC5B,IAAIwZ,EAAcxZ,EACdA,GAAWA,EAAQ,kBAAoBA,EAAQ,cAAgBA,EAAQ,aAAaA,EAAQ,gBAAgB,GAAKA,EAAQA,EAAQ,gBAAgB,IACnJwZ,EAAc,CACZ,GAAGA,EACH,CAACxZ,EAAQ,gBAAgB,EAAG,MACpC,GAEI,MAAMV,EAAMgQ,EAAM,KAAK,UAAUkK,CAAW,EAC5C,IAAIC,EAAYF,EAAMja,CAAG,EACzB,OAAKma,IACHA,EAAYha,EAAGkO,GAAe2B,CAAG,EAAGtP,CAAO,EAC3CuZ,EAAMja,CAAG,EAAIma,GAERA,EAAUjD,CAAG,CACtB,CACF,EACA,MAAMkD,EAAU,CACd,aAAc,CACZ,IAAI1Z,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,KAAK,OAAS6O,EAAW,OAAO,WAAW,EAC3C,KAAK,QAAU7O,EACf,KAAK,QAAU,CACb,OAAQsZ,EAAsB,CAAChK,EAAK6J,IAAQ,CAC1C,MAAMM,EAAY,IAAI,KAAK,aAAanK,EAAK,CAC3C,GAAG6J,CACb,CAAS,EACD,OAAO3C,GAAOiD,EAAU,OAAOjD,CAAG,CACpC,CAAC,EACD,SAAU8C,EAAsB,CAAChK,EAAK6J,IAAQ,CAC5C,MAAMM,EAAY,IAAI,KAAK,aAAanK,EAAK,CAC3C,GAAG6J,EACH,MAAO,UACjB,CAAS,EACD,OAAO3C,GAAOiD,EAAU,OAAOjD,CAAG,CACpC,CAAC,EACD,SAAU8C,EAAsB,CAAChK,EAAK6J,IAAQ,CAC5C,MAAMM,EAAY,IAAI,KAAK,eAAenK,EAAK,CAC7C,GAAG6J,CACb,CAAS,EACD,OAAO3C,GAAOiD,EAAU,OAAOjD,CAAG,CACpC,CAAC,EACD,aAAc8C,EAAsB,CAAChK,EAAK6J,IAAQ,CAChD,MAAMM,EAAY,IAAI,KAAK,mBAAmBnK,EAAK,CACjD,GAAG6J,CACb,CAAS,EACD,OAAO3C,GAAOiD,EAAU,OAAOjD,EAAK2C,EAAI,OAAS,KAAK,CACxD,CAAC,EACD,KAAMG,EAAsB,CAAChK,EAAK6J,IAAQ,CACxC,MAAMM,EAAY,IAAI,KAAK,WAAWnK,EAAK,CACzC,GAAG6J,CACb,CAAS,EACD,OAAO3C,GAAOiD,EAAU,OAAOjD,CAAG,CACpC,CAAC,CACP,EACI,KAAK,KAAKxW,CAAO,CACnB,CACA,KAAKmQ,EAAU,CACb,IAAInQ,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAChF,cAAe,CAAA,CACrB,EACI,KAAK,gBAAkBA,EAAQ,cAAc,iBAAmB,GAClE,CACA,IAAIW,EAAMsU,EAAI,CACZ,KAAK,QAAQtU,EAAK,YAAW,EAAG,KAAI,CAAE,EAAIsU,CAC5C,CACA,UAAUtU,EAAMsU,EAAI,CAClB,KAAK,QAAQtU,EAAK,YAAW,EAAG,MAAM,EAAI2Y,EAAsBrE,CAAE,CACpE,CACA,OAAOnJ,EAAO6N,EAAQrK,EAAK,CACzB,IAAItP,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,MAAM4Z,EAAUD,EAAO,MAAM,KAAK,eAAe,EACjD,GAAIC,EAAQ,OAAS,GAAKA,EAAQ,CAAC,EAAE,QAAQ,GAAG,EAAI,GAAKA,EAAQ,CAAC,EAAE,QAAQ,GAAG,EAAI,GAAKA,EAAQ,KAAK9B,GAAKA,EAAE,QAAQ,GAAG,EAAI,EAAE,EAAG,CAC9H,MAAM+B,EAAYD,EAAQ,UAAU9B,GAAKA,EAAE,QAAQ,GAAG,EAAI,EAAE,EAC5D8B,EAAQ,CAAC,EAAI,CAACA,EAAQ,CAAC,EAAG,GAAGA,EAAQ,OAAO,EAAGC,CAAS,CAAC,EAAE,KAAK,KAAK,eAAe,CACtF,CAyBA,OAxBeD,EAAQ,OAAO,CAACE,EAAKhC,IAAM,CACxC,KAAM,CACJ,WAAAkB,EACA,cAAAC,CACR,EAAUH,GAAehB,CAAC,EACpB,GAAI,KAAK,QAAQkB,CAAU,EAAG,CAC5B,IAAIe,EAAYD,EAChB,GAAI,CACF,MAAME,EAAaha,GAAWA,EAAQ,cAAgBA,EAAQ,aAAaA,EAAQ,gBAAgB,GAAK,CAAA,EAClGsS,EAAI0H,EAAW,QAAUA,EAAW,KAAOha,EAAQ,QAAUA,EAAQ,KAAOsP,EAClFyK,EAAY,KAAK,QAAQf,CAAU,EAAEc,EAAKxH,EAAG,CAC3C,GAAG2G,EACH,GAAGjZ,EACH,GAAGga,CACf,CAAW,CACH,OAASpb,EAAO,CACd,KAAK,OAAO,KAAKA,CAAK,CACxB,CACA,OAAOmb,CACT,MACE,KAAK,OAAO,KAAK,oCAAoCf,CAAU,EAAE,EAEnE,OAAOc,CACT,EAAGhO,CAAK,CAEV,CACF,CAEA,MAAMmO,GAAgB,CAACC,EAAGvZ,IAAS,CAC7BuZ,EAAE,QAAQvZ,CAAI,IAAM,SACtB,OAAOuZ,EAAE,QAAQvZ,CAAI,EACrBuZ,EAAE,eAEN,EACA,MAAMC,WAAkBrL,EAAa,CACnC,YAAYsL,EAASC,EAAOlK,EAAU,CACpC,IAAInQ,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,MAAK,EACL,KAAK,QAAUoa,EACf,KAAK,MAAQC,EACb,KAAK,SAAWlK,EAChB,KAAK,cAAgBA,EAAS,cAC9B,KAAK,QAAUnQ,EACf,KAAK,OAAS6O,EAAW,OAAO,kBAAkB,EAClD,KAAK,aAAe,CAAA,EACpB,KAAK,iBAAmB7O,EAAQ,kBAAoB,GACpD,KAAK,aAAe,EACpB,KAAK,WAAaA,EAAQ,YAAc,EAAIA,EAAQ,WAAa,EACjE,KAAK,aAAeA,EAAQ,cAAgB,EAAIA,EAAQ,aAAe,IACvE,KAAK,MAAQ,CAAA,EACb,KAAK,MAAQ,CAAA,EACT,KAAK,SAAW,KAAK,QAAQ,MAC/B,KAAK,QAAQ,KAAKmQ,EAAUnQ,EAAQ,QAASA,CAAO,CAExD,CACA,UAAUsa,EAAWjK,EAAYrQ,EAASua,EAAU,CAClD,MAAMC,EAAS,CAAA,EACTC,EAAU,CAAA,EACVC,EAAkB,CAAA,EAClBC,EAAmB,CAAA,EACzB,OAAAL,EAAU,QAAQhL,GAAO,CACvB,IAAIsL,EAAmB,GACvBvK,EAAW,QAAQhB,GAAM,CACvB,MAAM1O,EAAO,GAAG2O,CAAG,IAAID,CAAE,GACrB,CAACrP,EAAQ,QAAU,KAAK,MAAM,kBAAkBsP,EAAKD,CAAE,EACzD,KAAK,MAAM1O,CAAI,EAAI,EACV,KAAK,MAAMA,CAAI,EAAI,IAAc,KAAK,MAAMA,CAAI,IAAM,EAC3D8Z,EAAQ9Z,CAAI,IAAM,SAAW8Z,EAAQ9Z,CAAI,EAAI,KAEjD,KAAK,MAAMA,CAAI,EAAI,EACnBia,EAAmB,GACfH,EAAQ9Z,CAAI,IAAM,SAAW8Z,EAAQ9Z,CAAI,EAAI,IAC7C6Z,EAAO7Z,CAAI,IAAM,SAAW6Z,EAAO7Z,CAAI,EAAI,IAC3Cga,EAAiBtL,CAAE,IAAM,SAAWsL,EAAiBtL,CAAE,EAAI,KAEnE,CAAC,EACIuL,IAAkBF,EAAgBpL,CAAG,EAAI,GAChD,CAAC,GACG,OAAO,KAAKkL,CAAM,EAAE,QAAU,OAAO,KAAKC,CAAO,EAAE,SACrD,KAAK,MAAM,KAAK,CACd,QAAAA,EACA,aAAc,OAAO,KAAKA,CAAO,EAAE,OACnC,OAAQ,CAAA,EACR,OAAQ,CAAA,EACR,SAAAF,CACR,CAAO,EAEI,CACL,OAAQ,OAAO,KAAKC,CAAM,EAC1B,QAAS,OAAO,KAAKC,CAAO,EAC5B,gBAAiB,OAAO,KAAKC,CAAe,EAC5C,iBAAkB,OAAO,KAAKC,CAAgB,CACpD,CACE,CACA,OAAOha,EAAMka,EAAKlc,EAAM,CACtB,MAAM,EAAIgC,EAAK,MAAM,GAAG,EAClB2O,EAAM,EAAE,CAAC,EACTD,EAAK,EAAE,CAAC,EACVwL,GAAK,KAAK,KAAK,gBAAiBvL,EAAKD,EAAIwL,CAAG,EAC5C,CAACA,GAAOlc,GACV,KAAK,MAAM,kBAAkB2Q,EAAKD,EAAI1Q,EAAM,OAAW,OAAW,CAChE,SAAU,EAClB,CAAO,EAEH,KAAK,MAAMgC,CAAI,EAAIka,EAAM,GAAK,EAC1BA,GAAOlc,IAAM,KAAK,MAAMgC,CAAI,EAAI,GACpC,MAAMma,EAAS,CAAA,EACf,KAAK,MAAM,QAAQZ,GAAK,CACtBzO,GAASyO,EAAE,OAAQ,CAAC5K,CAAG,EAAGD,CAAE,EAC5B4K,GAAcC,EAAGvZ,CAAI,EACjBka,GAAKX,EAAE,OAAO,KAAKW,CAAG,EACtBX,EAAE,eAAiB,GAAK,CAACA,EAAE,OAC7B,OAAO,KAAKA,EAAE,MAAM,EAAE,QAAQ5H,GAAK,CAC5BwI,EAAOxI,CAAC,IAAGwI,EAAOxI,CAAC,EAAI,CAAA,GAC5B,MAAMyI,EAAab,EAAE,OAAO5H,CAAC,EACzByI,EAAW,QACbA,EAAW,QAAQ3F,GAAK,CAClB0F,EAAOxI,CAAC,EAAE8C,CAAC,IAAM,SAAW0F,EAAOxI,CAAC,EAAE8C,CAAC,EAAI,GACjD,CAAC,CAEL,CAAC,EACD8E,EAAE,KAAO,GACLA,EAAE,OAAO,OACXA,EAAE,SAASA,EAAE,MAAM,EAEnBA,EAAE,SAAQ,EAGhB,CAAC,EACD,KAAK,KAAK,SAAUY,CAAM,EAC1B,KAAK,MAAQ,KAAK,MAAM,OAAOZ,GAAK,CAACA,EAAE,IAAI,CAC7C,CACA,KAAK5K,EAAKD,EAAI2L,EAAQ,CACpB,IAAIC,EAAQ,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,EAC5EC,EAAO,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,KAAK,aAChFX,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OACrD,GAAI,CAACjL,EAAI,OAAQ,OAAOiL,EAAS,KAAM,CAAA,CAAE,EACzC,GAAI,KAAK,cAAgB,KAAK,iBAAkB,CAC9C,KAAK,aAAa,KAAK,CACrB,IAAAjL,EACA,GAAAD,EACA,OAAA2L,EACA,MAAAC,EACA,KAAAC,EACA,SAAAX,CACR,CAAO,EACD,MACF,CACA,KAAK,eACL,MAAMY,EAAW,CAACN,EAAKlc,IAAS,CAE9B,GADA,KAAK,eACD,KAAK,aAAa,OAAS,EAAG,CAChC,MAAM8O,EAAO,KAAK,aAAa,MAAK,EACpC,KAAK,KAAKA,EAAK,IAAKA,EAAK,GAAIA,EAAK,OAAQA,EAAK,MAAOA,EAAK,KAAMA,EAAK,QAAQ,CAChF,CACA,GAAIoN,GAAOlc,GAAQsc,EAAQ,KAAK,WAAY,CAC1C,WAAW,IAAM,CACf,KAAK,KAAK,KAAK,KAAM3L,EAAKD,EAAI2L,EAAQC,EAAQ,EAAGC,EAAO,EAAGX,CAAQ,CACrE,EAAGW,CAAI,EACP,MACF,CACAX,EAASM,EAAKlc,CAAI,CACpB,EACMsW,EAAK,KAAK,QAAQ+F,CAAM,EAAE,KAAK,KAAK,OAAO,EACjD,GAAI/F,EAAG,SAAW,EAAG,CACnB,GAAI,CACF,MAAM9H,EAAI8H,EAAG3F,EAAKD,CAAE,EAChBlC,GAAK,OAAOA,EAAE,MAAS,WACzBA,EAAE,KAAKxO,GAAQwc,EAAS,KAAMxc,CAAI,CAAC,EAAE,MAAMwc,CAAQ,EAEnDA,EAAS,KAAMhO,CAAC,CAEpB,OAAS0N,EAAK,CACZM,EAASN,CAAG,CACd,CACA,MACF,CACA,OAAO5F,EAAG3F,EAAKD,EAAI8L,CAAQ,CAC7B,CACA,eAAeb,EAAWjK,EAAY,CACpC,IAAIrQ,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9Eua,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OACrD,GAAI,CAAC,KAAK,QACR,YAAK,OAAO,KAAK,gEAAgE,EAC1EA,GAAYA,EAAQ,EAEzBtQ,EAASqQ,CAAS,IAAGA,EAAY,KAAK,cAAc,mBAAmBA,CAAS,GAChFrQ,EAASoG,CAAU,IAAGA,EAAa,CAACA,CAAU,GAClD,MAAMmK,EAAS,KAAK,UAAUF,EAAWjK,EAAYrQ,EAASua,CAAQ,EACtE,GAAI,CAACC,EAAO,OAAO,OACjB,OAAKA,EAAO,QAAQ,QAAQD,EAAQ,EAC7B,KAETC,EAAO,OAAO,QAAQ7Z,GAAQ,CAC5B,KAAK,QAAQA,CAAI,CACnB,CAAC,CACH,CACA,KAAK2Z,EAAWjK,EAAYkK,EAAU,CACpC,KAAK,eAAeD,EAAWjK,EAAY,CAAA,EAAIkK,CAAQ,CACzD,CACA,OAAOD,EAAWjK,EAAYkK,EAAU,CACtC,KAAK,eAAeD,EAAWjK,EAAY,CACzC,OAAQ,EACd,EAAOkK,CAAQ,CACb,CACA,QAAQ5Z,EAAM,CACZ,IAAI+N,EAAS,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,GACjF,MAAM/D,EAAIhK,EAAK,MAAM,GAAG,EAClB2O,EAAM3E,EAAE,CAAC,EACT0E,EAAK1E,EAAE,CAAC,EACd,KAAK,KAAK2E,EAAKD,EAAI,OAAQ,OAAW,OAAW,CAACwL,EAAKlc,IAAS,CAC1Dkc,GAAK,KAAK,OAAO,KAAK,GAAGnM,CAAM,qBAAqBW,CAAE,iBAAiBC,CAAG,UAAWuL,CAAG,EACxF,CAACA,GAAOlc,GAAM,KAAK,OAAO,IAAI,GAAG+P,CAAM,oBAAoBW,CAAE,iBAAiBC,CAAG,GAAI3Q,CAAI,EAC7F,KAAK,OAAOgC,EAAMka,EAAKlc,CAAI,CAC7B,CAAC,CACH,CACA,YAAY2b,EAAW1J,EAAWtR,EAAK8b,EAAeC,EAAU,CAC9D,IAAIrb,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9Esb,EAAM,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,IAAM,CAAC,EACrF,GAAI,KAAK,SAAS,OAAS,KAAK,SAAS,MAAM,oBAAsB,CAAC,KAAK,SAAS,MAAM,mBAAmB1K,CAAS,EAAG,CACvH,KAAK,OAAO,KAAK,qBAAqBtR,CAAG,uBAAuBsR,CAAS,uBAAwB,0NAA0N,EAC3T,MACF,CACA,GAAI,EAAqBtR,GAAQ,MAAQA,IAAQ,IACjD,IAAI,KAAK,SAAW,KAAK,QAAQ,OAAQ,CACvC,MAAMic,EAAO,CACX,GAAGvb,EACH,SAAAqb,CACR,EACYpG,EAAK,KAAK,QAAQ,OAAO,KAAK,KAAK,OAAO,EAChD,GAAIA,EAAG,OAAS,EACd,GAAI,CACF,IAAI9H,EACA8H,EAAG,SAAW,EAChB9H,EAAI8H,EAAGqF,EAAW1J,EAAWtR,EAAK8b,EAAeG,CAAI,EAErDpO,EAAI8H,EAAGqF,EAAW1J,EAAWtR,EAAK8b,CAAa,EAE7CjO,GAAK,OAAOA,EAAE,MAAS,WACzBA,EAAE,KAAKxO,GAAQ2c,EAAI,KAAM3c,CAAI,CAAC,EAAE,MAAM2c,CAAG,EAEzCA,EAAI,KAAMnO,CAAC,CAEf,OAAS0N,EAAK,CACZS,EAAIT,CAAG,CACT,MAEA5F,EAAGqF,EAAW1J,EAAWtR,EAAK8b,EAAeE,EAAKC,CAAI,CAE1D,CACI,CAACjB,GAAa,CAACA,EAAU,CAAC,GAC9B,KAAK,MAAM,YAAYA,EAAU,CAAC,EAAG1J,EAAWtR,EAAK8b,CAAa,EACpE,CACF,CAEA,MAAMzb,GAAM,KAAO,CACjB,MAAO,GACP,cAAe,GACf,GAAI,CAAC,aAAa,EAClB,UAAW,CAAC,aAAa,EACzB,YAAa,CAAC,KAAK,EACnB,WAAY,GACZ,cAAe,GACf,yBAA0B,GAC1B,KAAM,MACN,QAAS,GACT,qBAAsB,GACtB,aAAc,IACd,YAAa,IACb,gBAAiB,IACjB,iBAAkB,IAClB,wBAAyB,GACzB,YAAa,GACb,cAAe,GACf,cAAe,WACf,mBAAoB,GACpB,kBAAmB,GACnB,4BAA6B,GAC7B,YAAa,GACb,wBAAyB,GACzB,WAAY,GACZ,kBAAmB,GACnB,cAAe,GACf,WAAY,GACZ,sBAAuB,GACvB,uBAAwB,GACxB,4BAA6B,GAC7B,wBAAyB,GACzB,iCAAkCsC,GAAQ,CACxC,IAAIuZ,EAAM,CAAA,EAIV,GAHI,OAAOvZ,EAAK,CAAC,GAAM,WAAUuZ,EAAMvZ,EAAK,CAAC,GACzCgI,EAAShI,EAAK,CAAC,CAAC,IAAGuZ,EAAI,aAAevZ,EAAK,CAAC,GAC5CgI,EAAShI,EAAK,CAAC,CAAC,IAAGuZ,EAAI,aAAevZ,EAAK,CAAC,GAC5C,OAAOA,EAAK,CAAC,GAAM,UAAY,OAAOA,EAAK,CAAC,GAAM,SAAU,CAC9D,MAAMjC,EAAUiC,EAAK,CAAC,GAAKA,EAAK,CAAC,EACjC,OAAO,KAAKjC,CAAO,EAAE,QAAQV,GAAO,CAClCkc,EAAIlc,CAAG,EAAIU,EAAQV,CAAG,CACxB,CAAC,CACH,CACA,OAAOkc,CACT,EACA,cAAe,CACb,YAAa,GACb,OAAQ1P,GAASA,EACjB,OAAQ,KACR,OAAQ,KACR,gBAAiB,IACjB,eAAgB,IAChB,cAAe,MACf,cAAe,IACf,wBAAyB,IACzB,YAAa,IACb,gBAAiB,EACrB,CACA,GACM2P,GAAmBzb,IACnBiK,EAASjK,EAAQ,EAAE,IAAGA,EAAQ,GAAK,CAACA,EAAQ,EAAE,GAC9CiK,EAASjK,EAAQ,WAAW,IAAGA,EAAQ,YAAc,CAACA,EAAQ,WAAW,GACzEiK,EAASjK,EAAQ,UAAU,IAAGA,EAAQ,WAAa,CAACA,EAAQ,UAAU,GACtEA,EAAQ,eAAiBA,EAAQ,cAAc,QAAQ,QAAQ,EAAI,IACrEA,EAAQ,cAAgBA,EAAQ,cAAc,OAAO,CAAC,QAAQ,CAAC,GAE1DA,GAGH0b,GAAO,IAAM,CAAC,EACdC,GAAsBC,GAAQ,CACrB,OAAO,oBAAoB,OAAO,eAAeA,CAAI,CAAC,EAC9D,QAAQ9B,GAAO,CACd,OAAO8B,EAAK9B,CAAG,GAAM,aACvB8B,EAAK9B,CAAG,EAAI8B,EAAK9B,CAAG,EAAE,KAAK8B,CAAI,EAEnC,CAAC,CACH,EACA,MAAMC,WAAa/M,EAAa,CAC9B,aAAc,CACZ,IAAI9O,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9Eua,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OASrD,GARA,MAAK,EACL,KAAK,QAAUkB,GAAiBzb,CAAO,EACvC,KAAK,SAAW,CAAA,EAChB,KAAK,OAAS6O,EACd,KAAK,QAAU,CACb,SAAU,CAAA,CAChB,EACI8M,GAAoB,IAAI,EACpBpB,GAAY,CAAC,KAAK,eAAiB,CAACva,EAAQ,QAAS,CACvD,GAAI,CAAC,KAAK,QAAQ,cAChB,YAAK,KAAKA,EAASua,CAAQ,EACpB,KAET,WAAW,IAAM,CACf,KAAK,KAAKva,EAASua,CAAQ,CAC7B,EAAG,CAAC,CACN,CACF,CACA,MAAO,CACL,IAAI3H,EAAQ,KACZ,IAAI5S,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9Eua,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OACrD,KAAK,eAAiB,GAClB,OAAOva,GAAY,aACrBua,EAAWva,EACXA,EAAU,CAAA,GAER,CAACA,EAAQ,WAAaA,EAAQ,YAAc,IAASA,EAAQ,KAC3DiK,EAASjK,EAAQ,EAAE,EACrBA,EAAQ,UAAYA,EAAQ,GACnBA,EAAQ,GAAG,QAAQ,aAAa,EAAI,IAC7CA,EAAQ,UAAYA,EAAQ,GAAG,CAAC,IAGpC,MAAM8b,EAAUnc,GAAG,EACnB,KAAK,QAAU,CACb,GAAGmc,EACH,GAAG,KAAK,QACR,GAAGL,GAAiBzb,CAAO,CACjC,EACQ,KAAK,QAAQ,mBAAqB,OACpC,KAAK,QAAQ,cAAgB,CAC3B,GAAG8b,EAAQ,cACX,GAAG,KAAK,QAAQ,aACxB,GAEQ9b,EAAQ,eAAiB,SAC3B,KAAK,QAAQ,wBAA0BA,EAAQ,cAE7CA,EAAQ,cAAgB,SAC1B,KAAK,QAAQ,uBAAyBA,EAAQ,aAEhD,MAAM+b,EAAsBC,GACrBA,EACD,OAAOA,GAAkB,WAAmB,IAAIA,EAC7CA,EAFoB,KAI7B,GAAI,CAAC,KAAK,QAAQ,QAAS,CACrB,KAAK,QAAQ,OACfnN,EAAW,KAAKkN,EAAoB,KAAK,QAAQ,MAAM,EAAG,KAAK,OAAO,EAEtElN,EAAW,KAAK,KAAM,KAAK,OAAO,EAEpC,IAAI4K,EACA,KAAK,QAAQ,UACfA,EAAY,KAAK,QAAQ,UAChB,OAAO,KAAS,MACzBA,EAAYC,IAEd,MAAMuC,EAAK,IAAI3H,GAAa,KAAK,OAAO,EACxC,KAAK,MAAQ,IAAIlF,GAAc,KAAK,QAAQ,UAAW,KAAK,OAAO,EACnE,MAAMzE,EAAI,KAAK,SACfA,EAAE,OAASkE,EACXlE,EAAE,cAAgB,KAAK,MACvBA,EAAE,cAAgBsR,EAClBtR,EAAE,eAAiB,IAAI+K,GAAeuG,EAAI,CACxC,QAAS,KAAK,QAAQ,gBACtB,kBAAmB,KAAK,QAAQ,kBAChC,qBAAsB,KAAK,QAAQ,oBAC3C,CAAO,EACGxC,IAAc,CAAC,KAAK,QAAQ,cAAc,QAAU,KAAK,QAAQ,cAAc,SAAWqC,EAAQ,cAAc,UAClHnR,EAAE,UAAYoR,EAAoBtC,CAAS,EAC3C9O,EAAE,UAAU,KAAKA,EAAG,KAAK,OAAO,EAChC,KAAK,QAAQ,cAAc,OAASA,EAAE,UAAU,OAAO,KAAKA,EAAE,SAAS,GAEzEA,EAAE,aAAe,IAAI8L,GAAa,KAAK,OAAO,EAC9C9L,EAAE,MAAQ,CACR,mBAAoB,KAAK,mBAAmB,KAAK,IAAI,CAC7D,EACMA,EAAE,iBAAmB,IAAIwP,GAAU4B,EAAoB,KAAK,QAAQ,OAAO,EAAGpR,EAAE,cAAeA,EAAG,KAAK,OAAO,EAC9GA,EAAE,iBAAiB,GAAG,IAAK,SAAUxC,EAAO,CAC1C,QAAS8F,EAAO,UAAU,OAAQhM,EAAO,IAAI,MAAMgM,EAAO,EAAIA,EAAO,EAAI,CAAC,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAClGjM,EAAKiM,EAAO,CAAC,EAAI,UAAUA,CAAI,EAEjC0E,EAAM,KAAKzK,EAAO,GAAGlG,CAAI,CAC3B,CAAC,EACG,KAAK,QAAQ,mBACf0I,EAAE,iBAAmBoR,EAAoB,KAAK,QAAQ,gBAAgB,EAClEpR,EAAE,iBAAiB,MAAMA,EAAE,iBAAiB,KAAKA,EAAG,KAAK,QAAQ,UAAW,KAAK,OAAO,GAE1F,KAAK,QAAQ,aACfA,EAAE,WAAaoR,EAAoB,KAAK,QAAQ,UAAU,EACtDpR,EAAE,WAAW,MAAMA,EAAE,WAAW,KAAK,IAAI,GAE/C,KAAK,WAAa,IAAIuF,GAAW,KAAK,SAAU,KAAK,OAAO,EAC5D,KAAK,WAAW,GAAG,IAAK,SAAU/H,EAAO,CACvC,QAASgG,EAAQ,UAAU,OAAQlM,EAAO,IAAI,MAAMkM,EAAQ,EAAIA,EAAQ,EAAI,CAAC,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACxGnM,EAAKmM,EAAQ,CAAC,EAAI,UAAUA,CAAK,EAEnCwE,EAAM,KAAKzK,EAAO,GAAGlG,CAAI,CAC3B,CAAC,EACD,KAAK,QAAQ,SAAS,QAAQ2I,GAAK,CAC7BA,EAAE,MAAMA,EAAE,KAAK,IAAI,CACzB,CAAC,CACH,CAGA,GAFA,KAAK,OAAS,KAAK,QAAQ,cAAc,OACpC2P,IAAUA,EAAWmB,IACtB,KAAK,QAAQ,aAAe,CAAC,KAAK,SAAS,kBAAoB,CAAC,KAAK,QAAQ,IAAK,CACpF,MAAMhI,EAAQ,KAAK,SAAS,cAAc,iBAAiB,KAAK,QAAQ,WAAW,EAC/EA,EAAM,OAAS,GAAKA,EAAM,CAAC,IAAM,QAAO,KAAK,QAAQ,IAAMA,EAAM,CAAC,EACxE,CACI,CAAC,KAAK,SAAS,kBAAoB,CAAC,KAAK,QAAQ,KACnD,KAAK,OAAO,KAAK,yDAAyD,EAE3D,CAAC,cAAe,oBAAqB,oBAAqB,mBAAmB,EACrF,QAAQsH,GAAU,CACzB,KAAKA,CAAM,EAAI,UAAY,CACzB,OAAOpI,EAAM,MAAMoI,CAAM,EAAE,GAAG,SAAS,CACzC,CACF,CAAC,EACuB,CAAC,cAAe,eAAgB,oBAAqB,sBAAsB,EACnF,QAAQA,GAAU,CAChC,KAAKA,CAAM,EAAI,UAAY,CACzB,OAAApI,EAAM,MAAMoI,CAAM,EAAE,GAAG,SAAS,EACzBpI,CACT,CACF,CAAC,EACD,MAAMsJ,EAAW/R,GAAK,EAChBgS,EAAO,IAAM,CACjB,MAAMC,EAAS,CAACvB,EAAKwB,IAAM,CACzB,KAAK,eAAiB,GAClB,KAAK,eAAiB,CAAC,KAAK,sBAAsB,KAAK,OAAO,KAAK,uEAAuE,EAC9I,KAAK,cAAgB,GAChB,KAAK,QAAQ,SAAS,KAAK,OAAO,IAAI,cAAe,KAAK,OAAO,EACtE,KAAK,KAAK,cAAe,KAAK,OAAO,EACrCH,EAAS,QAAQG,CAAC,EAClB9B,EAASM,EAAKwB,CAAC,CACjB,EACA,GAAI,KAAK,WAAa,KAAK,QAAQ,mBAAqB,MAAQ,CAAC,KAAK,cAAe,OAAOD,EAAO,KAAM,KAAK,EAAE,KAAK,IAAI,CAAC,EAC1H,KAAK,eAAe,KAAK,QAAQ,IAAKA,CAAM,CAC9C,EACA,OAAI,KAAK,QAAQ,WAAa,CAAC,KAAK,QAAQ,cAC1CD,EAAI,EAEJ,WAAWA,EAAM,CAAC,EAEbD,CACT,CACA,cAAczJ,EAAU,CAEtB,IAAI6J,EADW,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAIZ,GAEnF,MAAMpI,EAAUrJ,EAASwI,CAAQ,EAAIA,EAAW,KAAK,SAErD,GADI,OAAOA,GAAa,aAAY6J,EAAe7J,GAC/C,CAAC,KAAK,QAAQ,WAAa,KAAK,QAAQ,wBAAyB,CACnE,GAAIa,GAAWA,EAAQ,YAAW,IAAO,WAAa,CAAC,KAAK,QAAQ,SAAW,KAAK,QAAQ,QAAQ,SAAW,GAAI,OAAOgJ,EAAY,EACtI,MAAM9B,EAAS,CAAA,EACT+B,EAASjN,GAAO,CAEpB,GADI,CAACA,GACDA,IAAQ,SAAU,OACT,KAAK,SAAS,cAAc,mBAAmBA,CAAG,EAC1D,QAAQgD,GAAK,CACZA,IAAM,UACNkI,EAAO,QAAQlI,CAAC,EAAI,GAAGkI,EAAO,KAAKlI,CAAC,CAC1C,CAAC,CACH,EACKgB,EAIHiJ,EAAOjJ,CAAO,EAHI,KAAK,SAAS,cAAc,iBAAiB,KAAK,QAAQ,WAAW,EAC7E,QAAQ,GAAKiJ,EAAO,CAAC,CAAC,EAI9B,KAAK,QAAQ,SACf,KAAK,QAAQ,QAAQ,QAAQjK,GAAKiK,EAAOjK,CAAC,CAAC,EAE7C,KAAK,SAAS,iBAAiB,KAAKkI,EAAQ,KAAK,QAAQ,GAAIlZ,GAAK,CAC5D,CAACA,GAAK,CAAC,KAAK,kBAAoB,KAAK,UAAU,KAAK,oBAAoB,KAAK,QAAQ,EACzFgb,EAAahb,CAAC,CAChB,CAAC,CACH,MACEgb,EAAa,IAAI,CAErB,CACA,gBAAgBnK,EAAM9C,EAAIkL,EAAU,CAClC,MAAM2B,EAAW/R,GAAK,EACtB,OAAI,OAAOgI,GAAS,aAClBoI,EAAWpI,EACXA,EAAO,QAEL,OAAO9C,GAAO,aAChBkL,EAAWlL,EACXA,EAAK,QAEF8C,IAAMA,EAAO,KAAK,WAClB9C,IAAIA,EAAK,KAAK,QAAQ,IACtBkL,IAAUA,EAAWmB,IAC1B,KAAK,SAAS,iBAAiB,OAAOvJ,EAAM9C,EAAIwL,GAAO,CACrDqB,EAAS,QAAO,EAChB3B,EAASM,CAAG,CACd,CAAC,EACMqB,CACT,CACA,IAAIrM,EAAQ,CACV,GAAI,CAACA,EAAQ,MAAM,IAAI,MAAM,+FAA+F,EAC5H,GAAI,CAACA,EAAO,KAAM,MAAM,IAAI,MAAM,0FAA0F,EAC5H,OAAIA,EAAO,OAAS,YAClB,KAAK,QAAQ,QAAUA,IAErBA,EAAO,OAAS,UAAYA,EAAO,KAAOA,EAAO,MAAQA,EAAO,SAClE,KAAK,QAAQ,OAASA,GAEpBA,EAAO,OAAS,qBAClB,KAAK,QAAQ,iBAAmBA,GAE9BA,EAAO,OAAS,eAClB,KAAK,QAAQ,WAAaA,GAExBA,EAAO,OAAS,iBAClBD,GAAc,iBAAiBC,CAAM,EAEnCA,EAAO,OAAS,cAClB,KAAK,QAAQ,UAAYA,GAEvBA,EAAO,OAAS,YAClB,KAAK,QAAQ,SAAS,KAAKA,CAAM,EAE5B,IACT,CACA,oBAAoByC,EAAG,CACrB,GAAI,GAACA,GAAK,CAAC,KAAK,YACZ,GAAC,SAAU,KAAK,EAAE,QAAQA,CAAC,EAAI,IACnC,QAASkK,EAAK,EAAGA,EAAK,KAAK,UAAU,OAAQA,IAAM,CACjD,MAAMC,EAAY,KAAK,UAAUD,CAAE,EACnC,GAAI,GAAC,SAAU,KAAK,EAAE,QAAQC,CAAS,EAAI,KACvC,KAAK,MAAM,4BAA4BA,CAAS,EAAG,CACrD,KAAK,iBAAmBA,EACxB,KACF,CACF,CACF,CACA,eAAenN,EAAKiL,EAAU,CAC5B,IAAImC,EAAS,KACb,KAAK,qBAAuBpN,EAC5B,MAAM4M,EAAW/R,GAAK,EACtB,KAAK,KAAK,mBAAoBmF,CAAG,EACjC,MAAMqN,EAAc,GAAK,CACvB,KAAK,SAAW,EAChB,KAAK,UAAY,KAAK,SAAS,cAAc,mBAAmB,CAAC,EACjE,KAAK,iBAAmB,OACxB,KAAK,oBAAoB,CAAC,CAC5B,EACMC,EAAO,CAAC/B,EAAKvI,IAAM,CACnBA,GACFqK,EAAYrK,CAAC,EACb,KAAK,WAAW,eAAeA,CAAC,EAChC,KAAK,qBAAuB,OAC5B,KAAK,KAAK,kBAAmBA,CAAC,EAC9B,KAAK,OAAO,IAAI,kBAAmBA,CAAC,GAEpC,KAAK,qBAAuB,OAE9B4J,EAAS,QAAQ,UAAY,CAC3B,OAAOQ,EAAO,EAAE,GAAG,SAAS,CAC9B,CAAC,EACGnC,GAAUA,EAASM,EAAK,UAAY,CACtC,OAAO6B,EAAO,EAAE,GAAG,SAAS,CAC9B,CAAC,CACH,EACMG,EAAS1K,GAAQ,CACjB,CAAC7C,GAAO,CAAC6C,GAAQ,KAAK,SAAS,mBAAkBA,EAAO,CAAA,GAC5D,MAAMG,EAAIrI,EAASkI,CAAI,EAAIA,EAAO,KAAK,SAAS,cAAc,sBAAsBA,CAAI,EACpFG,IACG,KAAK,UACRqK,EAAYrK,CAAC,EAEV,KAAK,WAAW,UAAU,KAAK,WAAW,eAAeA,CAAC,EAC3D,KAAK,SAAS,kBAAoB,KAAK,SAAS,iBAAiB,mBAAmB,KAAK,SAAS,iBAAiB,kBAAkBA,CAAC,GAE5I,KAAK,cAAcA,EAAGuI,GAAO,CAC3B+B,EAAK/B,EAAKvI,CAAC,CACb,CAAC,CACH,EACA,MAAI,CAAChD,GAAO,KAAK,SAAS,kBAAoB,CAAC,KAAK,SAAS,iBAAiB,MAC5EuN,EAAO,KAAK,SAAS,iBAAiB,OAAM,CAAE,EACrC,CAACvN,GAAO,KAAK,SAAS,kBAAoB,KAAK,SAAS,iBAAiB,MAC9E,KAAK,SAAS,iBAAiB,OAAO,SAAW,EACnD,KAAK,SAAS,iBAAiB,OAAM,EAAG,KAAKuN,CAAM,EAEnD,KAAK,SAAS,iBAAiB,OAAOA,CAAM,EAG9CA,EAAOvN,CAAG,EAEL4M,CACT,CACA,UAAU5M,EAAKD,EAAIyN,EAAW,CAC5B,IAAIC,EAAS,KACb,MAAMC,EAAS,SAAU1d,EAAKic,EAAM,CAClC,IAAIvb,EACJ,GAAI,OAAOub,GAAS,SAAU,CAC5B,QAASlN,EAAQ,UAAU,OAAQ+K,EAAO,IAAI,MAAM/K,EAAQ,EAAIA,EAAQ,EAAI,CAAC,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACxG8K,EAAK9K,EAAQ,CAAC,EAAI,UAAUA,CAAK,EAEnCtO,EAAU+c,EAAO,QAAQ,iCAAiC,CAACzd,EAAKic,CAAI,EAAE,OAAOnC,CAAI,CAAC,CACpF,MACEpZ,EAAU,CACR,GAAGub,CACb,EAEMvb,EAAQ,IAAMA,EAAQ,KAAOgd,EAAO,IACpChd,EAAQ,KAAOA,EAAQ,MAAQgd,EAAO,KACtChd,EAAQ,GAAKA,EAAQ,IAAMgd,EAAO,GAC9Bhd,EAAQ,YAAc,KAAIA,EAAQ,UAAYA,EAAQ,WAAa8c,GAAaE,EAAO,WAC3F,MAAMhQ,EAAe+P,EAAO,QAAQ,cAAgB,IACpD,IAAIE,EACJ,OAAIjd,EAAQ,WAAa,MAAM,QAAQV,CAAG,EACxC2d,EAAY3d,EAAI,IAAIgM,GAAK,GAAGtL,EAAQ,SAAS,GAAGgN,CAAY,GAAG1B,CAAC,EAAE,EAElE2R,EAAYjd,EAAQ,UAAY,GAAGA,EAAQ,SAAS,GAAGgN,CAAY,GAAG1N,CAAG,GAAKA,EAEzEyd,EAAO,EAAEE,EAAWjd,CAAO,CACpC,EACA,OAAIiK,EAASqF,CAAG,EACd0N,EAAO,IAAM1N,EAEb0N,EAAO,KAAO1N,EAEhB0N,EAAO,GAAK3N,EACZ2N,EAAO,UAAYF,EACZE,CACT,CACA,GAAI,CACF,OAAO,KAAK,YAAc,KAAK,WAAW,UAAU,GAAG,SAAS,CAClE,CACA,QAAS,CACP,OAAO,KAAK,YAAc,KAAK,WAAW,OAAO,GAAG,SAAS,CAC/D,CACA,oBAAoB3N,EAAI,CACtB,KAAK,QAAQ,UAAYA,CAC3B,CACA,mBAAmBA,EAAI,CACrB,IAAIrP,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClF,GAAI,CAAC,KAAK,cACR,YAAK,OAAO,KAAK,kDAAmD,KAAK,SAAS,EAC3E,GAET,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,UAAU,OACrC,YAAK,OAAO,KAAK,6DAA8D,KAAK,SAAS,EACtF,GAET,MAAMsP,EAAMtP,EAAQ,KAAO,KAAK,kBAAoB,KAAK,UAAU,CAAC,EAC9Dkd,EAAc,KAAK,QAAU,KAAK,QAAQ,YAAc,GACxDC,EAAU,KAAK,UAAU,KAAK,UAAU,OAAS,CAAC,EACxD,GAAI7N,EAAI,gBAAkB,SAAU,MAAO,GAC3C,MAAM8N,EAAiB,CAAC9K,EAAG8C,IAAM,CAC/B,MAAMiI,EAAY,KAAK,SAAS,iBAAiB,MAAM,GAAG/K,CAAC,IAAI8C,CAAC,EAAE,EAClE,OAAOiI,IAAc,IAAMA,IAAc,GAAKA,IAAc,CAC9D,EACA,GAAIrd,EAAQ,SAAU,CACpB,MAAMsd,EAAYtd,EAAQ,SAAS,KAAMod,CAAc,EACvD,GAAIE,IAAc,OAAW,OAAOA,CACtC,CAGA,MAFI,QAAK,kBAAkBhO,EAAKD,CAAE,GAC9B,CAAC,KAAK,SAAS,iBAAiB,SAAW,KAAK,QAAQ,WAAa,CAAC,KAAK,QAAQ,yBACnF+N,EAAe9N,EAAKD,CAAE,IAAM,CAAC6N,GAAeE,EAAeD,EAAS9N,CAAE,GAE5E,CACA,eAAeA,EAAIkL,EAAU,CAC3B,MAAM2B,EAAW/R,GAAK,EACtB,OAAK,KAAK,QAAQ,IAIdF,EAASoF,CAAE,IAAGA,EAAK,CAACA,CAAE,GAC1BA,EAAG,QAAQ+F,GAAK,CACV,KAAK,QAAQ,GAAG,QAAQA,CAAC,EAAI,GAAG,KAAK,QAAQ,GAAG,KAAKA,CAAC,CAC5D,CAAC,EACD,KAAK,cAAcyF,GAAO,CACxBqB,EAAS,QAAO,EACZ3B,GAAUA,EAASM,CAAG,CAC5B,CAAC,EACMqB,IAXD3B,GAAUA,EAAQ,EACf,QAAQ,QAAO,EAW1B,CACA,cAAcpI,EAAMoI,EAAU,CAC5B,MAAM2B,EAAW/R,GAAK,EAClBF,EAASkI,CAAI,IAAGA,EAAO,CAACA,CAAI,GAChC,MAAMoL,EAAY,KAAK,QAAQ,SAAW,CAAA,EACpCC,EAAUrL,EAAK,OAAO7C,GAAOiO,EAAU,QAAQjO,CAAG,EAAI,GAAK,KAAK,SAAS,cAAc,gBAAgBA,CAAG,CAAC,EACjH,OAAKkO,EAAQ,QAIb,KAAK,QAAQ,QAAUD,EAAU,OAAOC,CAAO,EAC/C,KAAK,cAAc3C,GAAO,CACxBqB,EAAS,QAAO,EACZ3B,GAAUA,EAASM,CAAG,CAC5B,CAAC,EACMqB,IARD3B,GAAUA,EAAQ,EACf,QAAQ,QAAO,EAQ1B,CACA,IAAIjL,EAAK,CAEP,GADKA,IAAKA,EAAM,KAAK,mBAAqB,KAAK,WAAa,KAAK,UAAU,OAAS,EAAI,KAAK,UAAU,CAAC,EAAI,KAAK,WAC7G,CAACA,EAAK,MAAO,MACjB,MAAMmO,EAAU,CAAC,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,KAAM,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,KAAM,MAAO,MAAO,MAAO,KAAM,KAAM,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,KAAK,EACjb9H,EAAgB,KAAK,UAAY,KAAK,SAAS,eAAiB,IAAIrB,GAAa3U,IAAK,EAC5F,OAAO8d,EAAQ,QAAQ9H,EAAc,wBAAwBrG,CAAG,CAAC,EAAI,IAAMA,EAAI,YAAW,EAAG,QAAQ,OAAO,EAAI,EAAI,MAAQ,KAC9H,CACA,OAAO,gBAAiB,CACtB,IAAItP,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9Eua,EAAW,UAAU,OAAS,EAAI,UAAU,CAAC,EAAI,OACrD,OAAO,IAAIsB,GAAK7b,EAASua,CAAQ,CACnC,CACA,eAAgB,CACd,IAAIva,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9Eua,EAAW,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAImB,GACnF,MAAMgC,EAAoB1d,EAAQ,kBAC9B0d,GAAmB,OAAO1d,EAAQ,kBACtC,MAAM2d,EAAgB,CACpB,GAAG,KAAK,QACR,GAAG3d,EAED,QAAS,EAEjB,EACU4d,EAAQ,IAAI/B,GAAK8B,CAAa,EACpC,OAAI3d,EAAQ,QAAU,QAAaA,EAAQ,SAAW,UACpD4d,EAAM,OAASA,EAAM,OAAO,MAAM5d,CAAO,GAErB,CAAC,QAAS,WAAY,UAAU,EACxC,QAAQ4K,GAAK,CACzBgT,EAAMhT,CAAC,EAAI,KAAKA,CAAC,CACnB,CAAC,EACDgT,EAAM,SAAW,CACf,GAAG,KAAK,QACd,EACIA,EAAM,SAAS,MAAQ,CACrB,mBAAoBA,EAAM,mBAAmB,KAAKA,CAAK,CAC7D,EACQF,IACFE,EAAM,MAAQ,IAAIxO,GAAc,KAAK,MAAM,KAAMuO,CAAa,EAC9DC,EAAM,SAAS,cAAgBA,EAAM,OAEvCA,EAAM,WAAa,IAAI1N,GAAW0N,EAAM,SAAUD,CAAa,EAC/DC,EAAM,WAAW,GAAG,IAAK,SAAUzV,EAAO,CACxC,QAASoG,EAAQ,UAAU,OAAQtM,EAAO,IAAI,MAAMsM,EAAQ,EAAIA,EAAQ,EAAI,CAAC,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACxGvM,EAAKuM,EAAQ,CAAC,EAAI,UAAUA,CAAK,EAEnCoP,EAAM,KAAKzV,EAAO,GAAGlG,CAAI,CAC3B,CAAC,EACD2b,EAAM,KAAKD,EAAepD,CAAQ,EAClCqD,EAAM,WAAW,QAAUD,EAC3BC,EAAM,WAAW,iBAAiB,SAAS,MAAQ,CACjD,mBAAoBA,EAAM,mBAAmB,KAAKA,CAAK,CAC7D,EACWA,CACT,CACA,QAAS,CACP,MAAO,CACL,QAAS,KAAK,QACd,MAAO,KAAK,MACZ,SAAU,KAAK,SACf,UAAW,KAAK,UAChB,iBAAkB,KAAK,gBAC7B,CACE,CACF,CACA,MAAMC,EAAWhC,GAAK,eAAc,EACpCgC,EAAS,eAAiBhC,GAAK,eAERgC,EAAS,eACpBA,EAAS,IACRA,EAAS,KACAA,EAAS,cACPA,EAAS,gBACrBA,EAAS,IACEA,EAAS,eACdA,EAAS,UACjBA,EAAS,EACJA,EAAS,OACIA,EAAS,oBACVA,EAAS,mBACbA,EAAS,eACVA,EAAS,cC30E/B,SAASC,GAAQC,EAAG,CAAE,0BAA2B,OAAOD,GAAwB,OAAO,QAArB,YAA2C,OAAO,OAAO,UAA1B,SAAqC,SAAUC,EAAG,CAAE,OAAO,OAAOA,CAAG,EAAI,SAAUA,EAAG,CAAE,OAAOA,GAAmB,OAAO,QAArB,YAA+BA,EAAE,cAAgB,QAAUA,IAAM,OAAO,UAAY,SAAW,OAAOA,CAAG,EAAGD,GAAQC,CAAC,CAAG,CActT,SAASC,IAAoB,CAClC,OAAO,OAAO,gBAAmB,aAAe,OAAO,eAAmB,IAAc,YAAcF,GAAQ,cAAc,KAAO,QACrI,CACA,SAASG,GAAUC,EAAc,CAC/B,MAAO,CAAC,CAACA,GAAgB,OAAOA,EAAa,MAAS,UACxD,CACO,SAASC,GAAYD,EAAc,CACxC,OAAID,GAAUC,CAAY,EACjBA,EAEF,QAAQ,QAAQA,CAAY,CACrC,sTCxBA,IAAIE,EACH,OAAO,WAAe,KAAe,YACrC,OAAO,KAAS,KAAe,MAC/B,OAAOC,GAAW,KAAeA,GAE9BC,GAAkB,UAAY,CAClC,SAASC,GAAI,CACb,KAAK,MAAQ,GACb,KAAK,aAAeH,EAAW,YAC/B,CACA,OAAAG,EAAE,UAAYH,EACP,IAAIG,CACX,GAAC,GAGA,SAASC,EAAY,EAEJ,SAAUC,EAAS,CAEnC,IAAIJ,EACD,OAAOG,EAAe,KAAeA,GACrC,OAAO,KAAS,KAAe,MAC/B,OAAOH,EAAW,KAAeA,EAEhCK,EAAU,CACZ,aAAc,oBAAqBL,EACnC,SAAU,WAAYA,GAAU,aAAc,OAC9C,KACE,eAAgBA,GAChB,SAAUA,IACT,UAAW,CACV,GAAI,CACF,WAAI,KACG,EACjB,MAAoB,CACV,MAAO,EACjB,CACA,GAAO,EACH,SAAU,aAAcA,EACxB,YAAa,gBAAiBA,GAGhC,SAASM,EAAWzU,EAAK,CACvB,OAAOA,GAAO,SAAS,UAAU,cAAcA,CAAG,CACtD,CAEE,GAAIwU,EAAQ,YACV,IAAIE,EAAc,CAChB,qBACA,sBACA,6BACA,sBACA,uBACA,sBACA,uBACA,wBACA,yBAGEC,EACF,YAAY,QACZ,SAAS3U,EAAK,CACZ,OAAOA,GAAO0U,EAAY,QAAQ,OAAO,UAAU,SAAS,KAAK1U,CAAG,CAAC,EAAI,EACjF,EAGE,SAAS4U,EAAcne,EAAM,CAI3B,GAHI,OAAOA,GAAS,WAClBA,EAAO,OAAOA,CAAI,GAEhB,6BAA6B,KAAKA,CAAI,GAAKA,IAAS,GACtD,MAAM,IAAI,UAAU,4CAA8CA,EAAO,GAAG,EAE9E,OAAOA,EAAK,YAAW,CAC3B,CAEE,SAASoe,EAAejT,EAAO,CAC7B,OAAI,OAAOA,GAAU,WACnBA,EAAQ,OAAOA,CAAK,GAEfA,CACX,CAGE,SAASkT,EAAYC,EAAO,CAC1B,IAAIC,EAAW,CACb,KAAM,UAAW,CACf,IAAIpT,EAAQmT,EAAM,MAAK,EACvB,MAAO,CAAC,KAAMnT,IAAU,OAAW,MAAOA,CAAK,CACvD,GAGI,OAAI4S,EAAQ,WACVQ,EAAS,OAAO,QAAQ,EAAI,UAAW,CACrC,OAAOA,CACf,GAGWA,CACX,CAEE,SAASC,EAAQC,EAAS,CACxB,KAAK,IAAM,CAAA,EAEPA,aAAmBD,EACrBC,EAAQ,QAAQ,SAAStT,EAAOnL,EAAM,CACpC,KAAK,OAAOA,EAAMmL,CAAK,CAC/B,EAAS,IAAI,EACE,MAAM,QAAQsT,CAAO,EAC9BA,EAAQ,QAAQ,SAASC,EAAQ,CAC/B,KAAK,OAAOA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,CACxC,EAAS,IAAI,EACED,GACT,OAAO,oBAAoBA,CAAO,EAAE,QAAQ,SAASze,EAAM,CACzD,KAAK,OAAOA,EAAMye,EAAQze,CAAI,CAAC,CACvC,EAAS,IAAI,CAEb,CAEEwe,EAAQ,UAAU,OAAS,SAASxe,EAAMmL,EAAO,CAC/CnL,EAAOme,EAAcne,CAAI,EACzBmL,EAAQiT,EAAejT,CAAK,EAC5B,IAAIwT,EAAW,KAAK,IAAI3e,CAAI,EAC5B,KAAK,IAAIA,CAAI,EAAI2e,EAAWA,EAAW,KAAOxT,EAAQA,CAC1D,EAEEqT,EAAQ,UAAU,OAAY,SAASxe,EAAM,CAC3C,OAAO,KAAK,IAAIme,EAAcne,CAAI,CAAC,CACvC,EAEEwe,EAAQ,UAAU,IAAM,SAASxe,EAAM,CACrC,OAAAA,EAAOme,EAAcne,CAAI,EAClB,KAAK,IAAIA,CAAI,EAAI,KAAK,IAAIA,CAAI,EAAI,IAC7C,EAEEwe,EAAQ,UAAU,IAAM,SAASxe,EAAM,CACrC,OAAO,KAAK,IAAI,eAAeme,EAAcne,CAAI,CAAC,CACtD,EAEEwe,EAAQ,UAAU,IAAM,SAASxe,EAAMmL,EAAO,CAC5C,KAAK,IAAIgT,EAAcne,CAAI,CAAC,EAAIoe,EAAejT,CAAK,CACxD,EAEEqT,EAAQ,UAAU,QAAU,SAAS5E,EAAUgF,EAAS,CACtD,QAAS5e,KAAQ,KAAK,IAChB,KAAK,IAAI,eAAeA,CAAI,GAC9B4Z,EAAS,KAAKgF,EAAS,KAAK,IAAI5e,CAAI,EAAGA,EAAM,IAAI,CAGzD,EAEEwe,EAAQ,UAAU,KAAO,UAAW,CAClC,IAAIF,EAAQ,CAAA,EACZ,YAAK,QAAQ,SAASnT,EAAOnL,EAAM,CACjCse,EAAM,KAAKte,CAAI,CACrB,CAAK,EACMqe,EAAYC,CAAK,CAC5B,EAEEE,EAAQ,UAAU,OAAS,UAAW,CACpC,IAAIF,EAAQ,CAAA,EACZ,YAAK,QAAQ,SAASnT,EAAO,CAC3BmT,EAAM,KAAKnT,CAAK,CACtB,CAAK,EACMkT,EAAYC,CAAK,CAC5B,EAEEE,EAAQ,UAAU,QAAU,UAAW,CACrC,IAAIF,EAAQ,CAAA,EACZ,YAAK,QAAQ,SAASnT,EAAOnL,EAAM,CACjCse,EAAM,KAAK,CAACte,EAAMmL,CAAK,CAAC,CAC9B,CAAK,EACMkT,EAAYC,CAAK,CAC5B,EAEMP,EAAQ,WACVS,EAAQ,UAAU,OAAO,QAAQ,EAAIA,EAAQ,UAAU,SAGzD,SAASK,EAASC,EAAM,CACtB,GAAIA,EAAK,SACP,OAAO,QAAQ,OAAO,IAAI,UAAU,cAAc,CAAC,EAErDA,EAAK,SAAW,EACpB,CAEE,SAASC,EAAgBC,EAAQ,CAC/B,OAAO,IAAI,QAAQ,SAASra,EAAS4B,EAAQ,CAC3CyY,EAAO,OAAS,UAAW,CACzBra,EAAQqa,EAAO,MAAM,CAC7B,EACMA,EAAO,QAAU,UAAW,CAC1BzY,EAAOyY,EAAO,KAAK,CAC3B,CACA,CAAK,CACL,CAEE,SAASC,EAAsBC,EAAM,CACnC,IAAIF,EAAS,IAAI,WACbrV,EAAUoV,EAAgBC,CAAM,EACpC,OAAAA,EAAO,kBAAkBE,CAAI,EACtBvV,CACX,CAEE,SAASwV,EAAeD,EAAM,CAC5B,IAAIF,EAAS,IAAI,WACbrV,EAAUoV,EAAgBC,CAAM,EACpC,OAAAA,EAAO,WAAWE,CAAI,EACfvV,CACX,CAEE,SAASyV,EAAsB/X,EAAK,CAIlC,QAHIgY,EAAO,IAAI,WAAWhY,CAAG,EACzB4E,EAAQ,IAAI,MAAMoT,EAAK,MAAM,EAExBzlB,EAAI,EAAGA,EAAIylB,EAAK,OAAQzlB,IAC/BqS,EAAMrS,CAAC,EAAI,OAAO,aAAaylB,EAAKzlB,CAAC,CAAC,EAExC,OAAOqS,EAAM,KAAK,EAAE,CACxB,CAEE,SAASqT,EAAYjY,EAAK,CACxB,GAAIA,EAAI,MACN,OAAOA,EAAI,MAAM,CAAC,EAElB,IAAIgY,EAAO,IAAI,WAAWhY,EAAI,UAAU,EACxC,OAAAgY,EAAK,IAAI,IAAI,WAAWhY,CAAG,CAAC,EACrBgY,EAAK,MAElB,CAEE,SAASE,GAAO,CACd,YAAK,SAAW,GAEhB,KAAK,UAAY,SAAST,EAAM,CAW9B,KAAK,SAAW,KAAK,SACrB,KAAK,UAAYA,EACZA,EAEM,OAAOA,GAAS,SACzB,KAAK,UAAYA,EACRf,EAAQ,MAAQ,KAAK,UAAU,cAAce,CAAI,EAC1D,KAAK,UAAYA,EACRf,EAAQ,UAAY,SAAS,UAAU,cAAce,CAAI,EAClE,KAAK,cAAgBA,EACZf,EAAQ,cAAgB,gBAAgB,UAAU,cAAce,CAAI,EAC7E,KAAK,UAAYA,EAAK,SAAQ,EACrBf,EAAQ,aAAeA,EAAQ,MAAQC,EAAWc,CAAI,GAC/D,KAAK,iBAAmBQ,EAAYR,EAAK,MAAM,EAE/C,KAAK,UAAY,IAAI,KAAK,CAAC,KAAK,gBAAgB,CAAC,GACxCf,EAAQ,cAAgB,YAAY,UAAU,cAAce,CAAI,GAAKZ,EAAkBY,CAAI,GACpG,KAAK,iBAAmBQ,EAAYR,CAAI,EAExC,KAAK,UAAYA,EAAO,OAAO,UAAU,SAAS,KAAKA,CAAI,EAhB3D,KAAK,UAAY,GAmBd,KAAK,QAAQ,IAAI,cAAc,IAC9B,OAAOA,GAAS,SAClB,KAAK,QAAQ,IAAI,eAAgB,0BAA0B,EAClD,KAAK,WAAa,KAAK,UAAU,KAC1C,KAAK,QAAQ,IAAI,eAAgB,KAAK,UAAU,IAAI,EAC3Cf,EAAQ,cAAgB,gBAAgB,UAAU,cAAce,CAAI,GAC7E,KAAK,QAAQ,IAAI,eAAgB,iDAAiD,EAG5F,EAEQf,EAAQ,OACV,KAAK,KAAO,UAAW,CACrB,IAAIyB,EAAWX,EAAS,IAAI,EAC5B,GAAIW,EACF,OAAOA,EAGT,GAAI,KAAK,UACP,OAAO,QAAQ,QAAQ,KAAK,SAAS,EAChC,GAAI,KAAK,iBACd,OAAO,QAAQ,QAAQ,IAAI,KAAK,CAAC,KAAK,gBAAgB,CAAC,CAAC,EACnD,GAAI,KAAK,cACd,MAAM,IAAI,MAAM,sCAAsC,EAEtD,OAAO,QAAQ,QAAQ,IAAI,KAAK,CAAC,KAAK,SAAS,CAAC,CAAC,CAE3D,EAEM,KAAK,YAAc,UAAW,CAC5B,GAAI,KAAK,iBAAkB,CACzB,IAAIC,EAAaZ,EAAS,IAAI,EAC9B,OAAIY,IAGA,YAAY,OAAO,KAAK,gBAAgB,EACnC,QAAQ,QACb,KAAK,iBAAiB,OAAO,MAC3B,KAAK,iBAAiB,WACtB,KAAK,iBAAiB,WAAa,KAAK,iBAAiB,UACzE,CACA,EAEmB,QAAQ,QAAQ,KAAK,gBAAgB,EAExD,KACU,QAAO,KAAK,OAAO,KAAKR,CAAqB,CAEvD,GAGI,KAAK,KAAO,UAAW,CACrB,IAAIO,EAAWX,EAAS,IAAI,EAC5B,GAAIW,EACF,OAAOA,EAGT,GAAI,KAAK,UACP,OAAOL,EAAe,KAAK,SAAS,EAC/B,GAAI,KAAK,iBACd,OAAO,QAAQ,QAAQC,EAAsB,KAAK,gBAAgB,CAAC,EAC9D,GAAI,KAAK,cACd,MAAM,IAAI,MAAM,sCAAsC,EAEtD,OAAO,QAAQ,QAAQ,KAAK,SAAS,CAE7C,EAEQrB,EAAQ,WACV,KAAK,SAAW,UAAW,CACzB,OAAO,KAAK,OAAO,KAAK2B,EAAM,CACtC,GAGI,KAAK,KAAO,UAAW,CACrB,OAAO,KAAK,KAAI,EAAG,KAAK,KAAK,KAAK,CACxC,EAEW,IACX,CAGE,IAAIC,EAAU,CAAC,SAAU,MAAO,OAAQ,UAAW,OAAQ,KAAK,EAEhE,SAASC,EAAgBC,EAAQ,CAC/B,IAAIC,EAAUD,EAAO,YAAW,EAChC,OAAOF,EAAQ,QAAQG,CAAO,EAAI,GAAKA,EAAUD,CACrD,CAEE,SAASE,EAAQxf,EAAOlB,EAAS,CAC/B,GAAI,EAAE,gBAAgB0gB,GACpB,MAAM,IAAI,UAAU,4FAA4F,EAGlH1gB,EAAUA,GAAW,CAAA,EACrB,IAAIyf,EAAOzf,EAAQ,KAEnB,GAAIkB,aAAiBwf,EAAS,CAC5B,GAAIxf,EAAM,SACR,MAAM,IAAI,UAAU,cAAc,EAEpC,KAAK,IAAMA,EAAM,IACjB,KAAK,YAAcA,EAAM,YACpBlB,EAAQ,UACX,KAAK,QAAU,IAAImf,EAAQje,EAAM,OAAO,GAE1C,KAAK,OAASA,EAAM,OACpB,KAAK,KAAOA,EAAM,KAClB,KAAK,OAASA,EAAM,OAChB,CAACue,GAAQve,EAAM,WAAa,OAC9Bue,EAAOve,EAAM,UACbA,EAAM,SAAW,GAEzB,MACM,KAAK,IAAM,OAAOA,CAAK,EAYzB,GATA,KAAK,YAAclB,EAAQ,aAAe,KAAK,aAAe,eAC1DA,EAAQ,SAAW,CAAC,KAAK,WAC3B,KAAK,QAAU,IAAImf,EAAQnf,EAAQ,OAAO,GAE5C,KAAK,OAASugB,EAAgBvgB,EAAQ,QAAU,KAAK,QAAU,KAAK,EACpE,KAAK,KAAOA,EAAQ,MAAQ,KAAK,MAAQ,KACzC,KAAK,OAASA,EAAQ,QAAU,KAAK,OACrC,KAAK,SAAW,MAEX,KAAK,SAAW,OAAS,KAAK,SAAW,SAAWyf,EACvD,MAAM,IAAI,UAAU,2CAA2C,EAIjE,GAFA,KAAK,UAAUA,CAAI,GAEf,KAAK,SAAW,OAAS,KAAK,SAAW,UACvCzf,EAAQ,QAAU,YAAcA,EAAQ,QAAU,YAAY,CAEhE,IAAI2gB,EAAgB,gBACpB,GAAIA,EAAc,KAAK,KAAK,GAAG,EAE7B,KAAK,IAAM,KAAK,IAAI,QAAQA,EAAe,OAAS,IAAI,OAAO,SAAS,MACnE,CAEL,IAAIC,EAAgB,KACpB,KAAK,MAAQA,EAAc,KAAK,KAAK,GAAG,EAAI,IAAM,KAAO,KAAO,IAAI,KAAI,EAAG,QAAO,CAC5F,CACA,CAEA,CAEEF,EAAQ,UAAU,MAAQ,UAAW,CACnC,OAAO,IAAIA,EAAQ,KAAM,CAAC,KAAM,KAAK,SAAS,CAAC,CACnD,EAEE,SAASL,GAAOZ,EAAM,CACpB,IAAIoB,EAAO,IAAI,SACf,OAAApB,EACG,KAAI,EACJ,MAAM,GAAG,EACT,QAAQ,SAASqB,EAAO,CACvB,GAAIA,EAAO,CACT,IAAIC,EAAQD,EAAM,MAAM,GAAG,EACvBngB,EAAOogB,EAAM,MAAK,EAAG,QAAQ,MAAO,GAAG,EACvCjV,EAAQiV,EAAM,KAAK,GAAG,EAAE,QAAQ,MAAO,GAAG,EAC9CF,EAAK,OAAO,mBAAmBlgB,CAAI,EAAG,mBAAmBmL,CAAK,CAAC,CACzE,CACA,CAAO,EACI+U,CACX,CAEE,SAASG,EAAaC,EAAY,CAChC,IAAI7B,EAAU,IAAID,EAGd+B,EAAsBD,EAAW,QAAQ,eAAgB,GAAG,EAIhE,OAAAC,EACG,MAAM,IAAI,EACV,IAAI,SAAS7B,EAAQ,CACpB,OAAOA,EAAO,QAAQ;AAAA,CAAI,IAAM,EAAIA,EAAO,OAAO,EAAGA,EAAO,MAAM,EAAIA,CAC9E,CAAO,EACA,QAAQ,SAASnlB,EAAM,CACtB,IAAIsW,EAAQtW,EAAK,MAAM,GAAG,EACtBoF,EAAMkR,EAAM,MAAK,EAAG,KAAI,EAC5B,GAAIlR,EAAK,CACP,IAAIwM,EAAQ0E,EAAM,KAAK,GAAG,EAAE,KAAI,EAChC4O,EAAQ,OAAO9f,EAAKwM,CAAK,CACnC,CACA,CAAO,EACIsT,CACX,CAEEc,EAAK,KAAKQ,EAAQ,SAAS,EAE3B,SAASS,EAASC,EAAUphB,EAAS,CACnC,GAAI,EAAE,gBAAgBmhB,GACpB,MAAM,IAAI,UAAU,4FAA4F,EAE7GnhB,IACHA,EAAU,CAAA,GAGZ,KAAK,KAAO,UACZ,KAAK,OAASA,EAAQ,SAAW,OAAY,IAAMA,EAAQ,OAC3D,KAAK,GAAK,KAAK,QAAU,KAAO,KAAK,OAAS,IAC9C,KAAK,WAAaA,EAAQ,aAAe,OAAY,GAAK,GAAKA,EAAQ,WACvE,KAAK,QAAU,IAAImf,EAAQnf,EAAQ,OAAO,EAC1C,KAAK,IAAMA,EAAQ,KAAO,GAC1B,KAAK,UAAUohB,CAAQ,CAC3B,CAEElB,EAAK,KAAKiB,EAAS,SAAS,EAE5BA,EAAS,UAAU,MAAQ,UAAW,CACpC,OAAO,IAAIA,EAAS,KAAK,UAAW,CAClC,OAAQ,KAAK,OACb,WAAY,KAAK,WACjB,QAAS,IAAIhC,EAAQ,KAAK,OAAO,EACjC,IAAK,KAAK,IACX,CACL,EAEEgC,EAAS,MAAQ,UAAW,CAC1B,IAAIziB,EAAW,IAAIyiB,EAAS,KAAM,CAAC,OAAQ,EAAG,WAAY,EAAE,CAAC,EAC7D,OAAAziB,EAAS,KAAO,QACTA,CACX,EAEE,IAAI2iB,GAAmB,CAAC,IAAK,IAAK,IAAK,IAAK,GAAG,EAE/CF,EAAS,SAAW,SAAS5iB,EAAK+iB,EAAQ,CACxC,GAAID,GAAiB,QAAQC,CAAM,IAAM,GACvC,MAAM,IAAI,WAAW,qBAAqB,EAG5C,OAAO,IAAIH,EAAS,KAAM,CAAC,OAAQG,EAAQ,QAAS,CAAC,SAAU/iB,CAAG,CAAC,CAAC,CACxE,EAEEkgB,EAAQ,aAAeJ,EAAO,aAC9B,GAAI,CACF,IAAII,EAAQ,YAChB,MAAgB,CACZA,EAAQ,aAAe,SAAS8C,EAAS5gB,EAAM,CAC7C,KAAK,QAAU4gB,EACf,KAAK,KAAO5gB,EACZ,IAAI/B,EAAQ,MAAM2iB,CAAO,EACzB,KAAK,MAAQ3iB,EAAM,KACzB,EACI6f,EAAQ,aAAa,UAAY,OAAO,OAAO,MAAM,SAAS,EAC9DA,EAAQ,aAAa,UAAU,YAAcA,EAAQ,YACzD,CAEE,SAAS+C,EAAMtgB,EAAOugB,EAAM,CAC1B,OAAO,IAAI,QAAQ,SAASnc,EAAS4B,EAAQ,CAC3C,IAAIwa,EAAU,IAAIhB,EAAQxf,EAAOugB,CAAI,EAErC,GAAIC,EAAQ,QAAUA,EAAQ,OAAO,QACnC,OAAOxa,EAAO,IAAIuX,EAAQ,aAAa,UAAW,YAAY,CAAC,EAGjE,IAAIkD,EAAM,IAAI,eAEd,SAASC,GAAW,CAClBD,EAAI,MAAK,CACjB,CAEMA,EAAI,OAAS,UAAW,CACtB,IAAI3hB,EAAU,CACZ,OAAQ2hB,EAAI,OACZ,WAAYA,EAAI,WAChB,QAASX,EAAaW,EAAI,sBAAqB,GAAM,EAAE,GAEzD3hB,EAAQ,IAAM,gBAAiB2hB,EAAMA,EAAI,YAAc3hB,EAAQ,QAAQ,IAAI,eAAe,EAC1F,IAAIyf,GAAO,aAAckC,EAAMA,EAAI,SAAWA,EAAI,aAClD,WAAW,UAAW,CACpBrc,EAAQ,IAAI6b,EAAS1B,GAAMzf,CAAO,CAAC,CAC7C,EAAW,CAAC,CACZ,EAEM2hB,EAAI,QAAU,UAAW,CACvB,WAAW,UAAW,CACpBza,EAAO,IAAI,UAAU,wBAAwB,CAAC,CACxD,EAAW,CAAC,CACZ,EAEMya,EAAI,UAAY,UAAW,CACzB,WAAW,UAAW,CACpBza,EAAO,IAAI,UAAU,wBAAwB,CAAC,CACxD,EAAW,CAAC,CACZ,EAEMya,EAAI,QAAU,UAAW,CACvB,WAAW,UAAW,CACpBza,EAAO,IAAIuX,EAAQ,aAAa,UAAW,YAAY,CAAC,CAClE,EAAW,CAAC,CACZ,EAEM,SAASoD,GAAOtjB,EAAK,CACnB,GAAI,CACF,OAAOA,IAAQ,IAAM8f,EAAO,SAAS,KAAOA,EAAO,SAAS,KAAO9f,CAC7E,MAAoB,CACV,OAAOA,CACjB,CACA,CAEMojB,EAAI,KAAKD,EAAQ,OAAQG,GAAOH,EAAQ,GAAG,EAAG,EAAI,EAE9CA,EAAQ,cAAgB,UAC1BC,EAAI,gBAAkB,GACbD,EAAQ,cAAgB,SACjCC,EAAI,gBAAkB,IAGpB,iBAAkBA,IAChBjD,EAAQ,KACViD,EAAI,aAAe,OAEnBjD,EAAQ,aACRgD,EAAQ,QAAQ,IAAI,cAAc,GAClCA,EAAQ,QAAQ,IAAI,cAAc,EAAE,QAAQ,0BAA0B,IAAM,KAE5EC,EAAI,aAAe,gBAInBF,GAAQ,OAAOA,EAAK,SAAY,UAAY,EAAEA,EAAK,mBAAmBtC,GACxE,OAAO,oBAAoBsC,EAAK,OAAO,EAAE,QAAQ,SAAS9gB,EAAM,CAC9DghB,EAAI,iBAAiBhhB,EAAMoe,EAAe0C,EAAK,QAAQ9gB,CAAI,CAAC,CAAC,CACvE,CAAS,EAED+gB,EAAQ,QAAQ,QAAQ,SAAS5V,EAAOnL,GAAM,CAC5CghB,EAAI,iBAAiBhhB,GAAMmL,CAAK,CAC1C,CAAS,EAGC4V,EAAQ,SACVA,EAAQ,OAAO,iBAAiB,QAASE,CAAQ,EAEjDD,EAAI,mBAAqB,UAAW,CAE9BA,EAAI,aAAe,GACrBD,EAAQ,OAAO,oBAAoB,QAASE,CAAQ,CAEhE,GAGMD,EAAI,KAAK,OAAOD,EAAQ,UAAc,IAAc,KAAOA,EAAQ,SAAS,CAClF,CAAK,CACL,CAEE,OAAAF,EAAM,SAAW,GAEZnD,EAAO,QACVA,EAAO,MAAQmD,EACfnD,EAAO,QAAUc,EACjBd,EAAO,QAAUqC,EACjBrC,EAAO,SAAW8C,GAGpB1C,EAAQ,QAAUU,EAClBV,EAAQ,QAAUiC,EAClBjC,EAAQ,SAAW0C,EACnB1C,EAAQ,MAAQ+C,EAET/C,CAET,GAAG,CAAA,CAAE,CACL,GAAGH,CAAc,EAEjBA,EAAe,MAAM,SAAW,GAChC,OAAOA,EAAe,MAAM,SAE5B,IAAIllB,EAAMglB,EAAW,MAAQA,EAAaE,EAC1CG,EAAUrlB,EAAI,MACdqlB,EAAA,QAAkBrlB,EAAI,MACtBqlB,EAAA,MAAgBrlB,EAAI,MACpBqlB,EAAA,QAAkBrlB,EAAI,QACtBqlB,EAAA,QAAkBrlB,EAAI,QACtBqlB,EAAA,SAAmBrlB,EAAI,SACvByW,EAAA,QAAiB4O,oFCtoBjB,IAAIqD,EAAW,OAAO,OAAU,WAAa,MAAQ,OAOrD,GANI,OAAOzD,GAAW,KAAeA,GAAO,MAC1CyD,EAAWzD,GAAO,MACT,OAAO,OAAW,KAAe,OAAO,QACjDyD,EAAW,OAAO,OAGhB,OAAOC,GAAY,KAAe,OAAO,OAAW,IAAa,CACnE,IAAIjK,EAAIgK,GAAYE,GAAA,EAChBlK,EAAE,UAASA,EAAIA,EAAE,SACrB2G,EAAA,QAAkB3G,EAClBjI,EAAA,QAAiB4O,EAAQ,OAC3B,mGCZA,SAASwD,GAAQ3gB,EAAG6L,EAAG,CAAE,IAAI,EAAI,OAAO,KAAK7L,CAAC,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIyc,EAAI,OAAO,sBAAsBzc,CAAC,EAAG6L,IAAM4Q,EAAIA,EAAE,OAAO,SAAU5Q,EAAG,CAAE,OAAO,OAAO,yBAAyB7L,EAAG6L,CAAC,EAAE,UAAY,CAAC,GAAI,EAAE,KAAK,MAAM,EAAG4Q,CAAC,CAAG,CAAE,OAAO,CAAG,CAC9P,SAASmE,GAAc5gB,EAAG,CAAE,QAAS6L,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAI,EAAY,UAAUA,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAA,EAAIA,EAAI,EAAI8U,GAAQ,OAAO,CAAC,EAAG,EAAE,EAAE,QAAQ,SAAU9U,EAAG,CAAEgV,GAAgB7gB,EAAG6L,EAAG,EAAEA,CAAC,CAAC,CAAG,CAAC,EAAI,OAAO,0BAA4B,OAAO,iBAAiB7L,EAAG,OAAO,0BAA0B,CAAC,CAAC,EAAI2gB,GAAQ,OAAO,CAAC,CAAC,EAAE,QAAQ,SAAU9U,EAAG,CAAE,OAAO,eAAe7L,EAAG6L,EAAG,OAAO,yBAAyB,EAAGA,CAAC,CAAC,CAAG,CAAC,CAAG,CAAE,OAAO7L,CAAG,CACtb,SAAS6gB,GAAgB7gB,EAAG6L,EAAG,EAAG,CAAE,OAAQA,EAAIiV,GAAejV,CAAC,KAAM7L,EAAI,OAAO,eAAeA,EAAG6L,EAAG,CAAE,MAAO,EAAG,WAAY,GAAI,aAAc,GAAI,SAAU,EAAE,CAAE,EAAI7L,EAAE6L,CAAC,EAAI,EAAG7L,CAAG,CACnL,SAAS8gB,GAAe/F,EAAG,CAAE,IAAI9hB,EAAI8nB,GAAahG,EAAG,QAAQ,EAAG,OAAmByB,EAAQvjB,CAAC,GAArB,SAAyBA,EAAIA,EAAI,EAAI,CAC5G,SAAS8nB,GAAahG,EAAGlP,EAAG,CAAE,GAAgB2Q,EAAQzB,CAAC,GAArB,UAA0B,CAACA,EAAG,OAAOA,EAAG,IAAI/a,EAAI+a,EAAE,OAAO,WAAW,EAAG,GAAe/a,IAAX,OAAc,CAAE,IAAI/G,EAAI+G,EAAE,KAAK+a,EAAGlP,CAAc,EAAG,GAAgB2Q,EAAQvjB,CAAC,GAArB,SAAwB,OAAOA,EAAG,MAAM,IAAI,UAAU,8CAA8C,CAAG,CAAE,OAAqB4S,IAAb,SAAiB,OAAS,QAAQkP,CAAC,CAAG,CAC3T,SAASyB,EAAQC,EAAG,CAAE,0BAA2B,OAAOD,EAAwB,OAAO,QAArB,YAA2C,OAAO,OAAO,UAA1B,SAAqC,SAAUC,EAAG,CAAE,OAAO,OAAOA,CAAG,EAAI,SAAUA,EAAG,CAAE,OAAOA,GAAmB,OAAO,QAArB,YAA+BA,EAAE,cAAgB,QAAUA,IAAM,OAAO,UAAY,SAAW,OAAOA,CAAG,EAAGD,EAAQC,CAAC,CAAG,CAG7T,IAAI+D,EAAW,OAAO,OAAU,WAAa,MAAQ,OACjD,OAAO,OAAW,KAAe,OAAO,MAC1CA,EAAW,OAAO,MACT,OAAO,OAAW,KAAe,OAAO,QACjDA,EAAW,OAAO,OAEpB,IAAIQ,GACAtE,OACE,OAAO,OAAW,KAAe,OAAO,eAC1CsE,GAAoB,OAAO,eAClB,OAAO,OAAW,KAAe,OAAO,iBACjDA,GAAoB,OAAO,iBAG/B,IAAIC,GACA,OAAO,eAAkB,aACvB,OAAO,OAAW,KAAe,OAAO,cAC1CA,GAAmB,OAAO,cACjB,OAAO,OAAW,KAAe,OAAO,gBACjDA,GAAmB,OAAO,gBAG1B,CAACT,GAAYU,IAAa,CAACF,IAAqB,CAACC,KAAkBT,EAAWW,IAAqBD,IACnG,OAAOV,GAAa,aAAYA,EAAW,QAC/C,IAAIY,GAAiB,SAAwBnkB,EAAKokB,EAAQ,CACxD,GAAIA,GAAU7E,EAAQ6E,CAAM,IAAM,SAAU,CAC1C,IAAIC,EAAc,GAClB,QAASC,KAAaF,EACpBC,GAAe,IAAM,mBAAmBC,CAAS,EAAI,IAAM,mBAAmBF,EAAOE,CAAS,CAAC,EAEjG,GAAI,CAACD,EAAa,OAAOrkB,EACzBA,EAAMA,GAAOA,EAAI,QAAQ,GAAG,IAAM,GAAK,IAAM,KAAOqkB,EAAY,MAAM,CAAC,CACzE,CACA,OAAOrkB,CACT,EACIukB,GAAU,SAAiBvkB,EAAKwkB,EAAcxI,EAAUyI,EAAU,CACpE,IAAI7H,EAAW,SAAkBzc,EAAU,CACzC,GAAI,CAACA,EAAS,GAAI,OAAO6b,EAAS7b,EAAS,YAAc,QAAS,CAChE,OAAQA,EAAS,MACvB,CAAK,EACDA,EAAS,KAAI,EAAG,KAAK,SAAUC,EAAM,CACnC4b,EAAS,KAAM,CACb,OAAQ7b,EAAS,OACjB,KAAMC,CACd,CAAO,CACH,CAAC,EAAE,MAAM4b,CAAQ,CACnB,EACA,GAAIyI,EAAU,CACZ,IAAIC,EAAcD,EAASzkB,EAAKwkB,CAAY,EAC5C,GAAIE,aAAuB,QAAS,CAClCA,EAAY,KAAK9H,CAAQ,EAAE,MAAMZ,CAAQ,EACzC,MACF,CACF,CACI,OAAO,OAAU,WACnB,MAAMhc,EAAKwkB,CAAY,EAAE,KAAK5H,CAAQ,EAAE,MAAMZ,CAAQ,EAEtDuH,EAASvjB,EAAKwkB,CAAY,EAAE,KAAK5H,CAAQ,EAAE,MAAMZ,CAAQ,CAE7D,EACI2I,GAAmB,GACnBC,GAAmB,SAA0BnjB,EAASzB,EAAK6kB,EAAS7I,EAAU,CAC5Eva,EAAQ,oBACVzB,EAAMmkB,GAAenkB,EAAKyB,EAAQ,iBAAiB,GAErD,IAAIof,EAAU8C,GAAc,CAAA,EAAI,OAAOliB,EAAQ,eAAkB,WAAaA,EAAQ,gBAAkBA,EAAQ,aAAa,EACzH,OAAO,OAAW,KAAe,OAAO,OAAW,KAAe,OAAO,OAAO,QAAY,KAAe,OAAO,QAAQ,UAAY,OAAO,QAAQ,SAAS,OAChKof,EAAQ,YAAY,EAAI,8BAA8B,OAAO,OAAO,QAAQ,QAAS,IAAI,EAAE,OAAO,OAAO,QAAQ,SAAU,GAAG,EAAE,OAAO,OAAO,QAAQ,KAAM,GAAG,GAE7JgE,IAAShE,EAAQ,cAAc,EAAI,oBACvC,IAAIiE,EAAa,OAAOrjB,EAAQ,gBAAmB,WAAaA,EAAQ,eAAeojB,CAAO,EAAIpjB,EAAQ,eACtG+iB,EAAeb,GAAc,CAC/B,OAAQkB,EAAU,OAAS,MAC3B,KAAMA,EAAUpjB,EAAQ,UAAUojB,CAAO,EAAI,OAC7C,QAAShE,CACb,EAAK8D,GAAmB,CAAA,EAAKG,CAAU,EACjCL,EAAW,OAAOhjB,EAAQ,gBAAmB,YAAcA,EAAQ,eAAe,QAAU,EAAIA,EAAQ,eAAiB,OAC7H,GAAI,CACF8iB,GAAQvkB,EAAKwkB,EAAcxI,EAAUyI,CAAQ,CAC/C,OAAS1hB,EAAG,CACV,GAAI,CAAC+hB,GAAc,OAAO,KAAKA,CAAU,EAAE,SAAW,GAAK,CAAC/hB,EAAE,SAAWA,EAAE,QAAQ,QAAQ,iBAAiB,EAAI,EAC9G,OAAOiZ,EAASjZ,CAAC,EAEnB,GAAI,CACF,OAAO,KAAK+hB,CAAU,EAAE,QAAQ,SAAUlK,EAAK,CAC7C,OAAO4J,EAAa5J,CAAG,CACzB,CAAC,EACD2J,GAAQvkB,EAAKwkB,EAAcxI,EAAUyI,CAAQ,EAC7CE,GAAmB,EACrB,OAASrI,EAAK,CACZN,EAASM,CAAG,CACd,CACF,CACF,EACIyI,GAA4B,SAAmCtjB,EAASzB,EAAK6kB,EAAS7I,EAAU,CAC9F6I,GAAWtF,EAAQsF,CAAO,IAAM,WAClCA,EAAUV,GAAe,GAAIU,CAAO,EAAE,MAAM,CAAC,GAE3CpjB,EAAQ,oBACVzB,EAAMmkB,GAAenkB,EAAKyB,EAAQ,iBAAiB,GAErD,GAAI,CACF,IAAInG,EACAyoB,GACFzoB,EAAI,IAAIyoB,GAERzoB,EAAI,IAAI0oB,GAAiB,oBAAoB,EAE/C1oB,EAAE,KAAKupB,EAAU,OAAS,MAAO7kB,EAAK,CAAC,EAClCyB,EAAQ,aACXnG,EAAE,iBAAiB,mBAAoB,gBAAgB,EAEzDA,EAAE,gBAAkB,CAAC,CAACmG,EAAQ,gBAC1BojB,GACFvpB,EAAE,iBAAiB,eAAgB,mCAAmC,EAEpEA,EAAE,kBACJA,EAAE,iBAAiB,kBAAkB,EAEvC,IAAI0pB,EAAIvjB,EAAQ,cAEhB,GADAujB,EAAI,OAAOA,GAAM,WAAaA,EAAC,EAAKA,EAChCA,EACF,QAAShpB,KAAKgpB,EACZ1pB,EAAE,iBAAiBU,EAAGgpB,EAAEhpB,CAAC,CAAC,EAG9BV,EAAE,mBAAqB,UAAY,CACjCA,EAAE,WAAa,GAAK0gB,EAAS1gB,EAAE,QAAU,IAAMA,EAAE,WAAa,KAAM,CAClE,OAAQA,EAAE,OACV,KAAMA,EAAE,YAChB,CAAO,CACH,EACAA,EAAE,KAAKupB,CAAO,CAChB,OAAS9hB,EAAG,CACV,SAAW,QAAQ,IAAIA,CAAC,CAC1B,CACF,EACIogB,GAAU,SAAiB1hB,EAASzB,EAAK6kB,EAAS7I,EAAU,CAM9D,GALI,OAAO6I,GAAY,aACrB7I,EAAW6I,EACXA,EAAU,QAEZ7I,EAAWA,GAAY,UAAY,CAAC,EAChCuH,GAAYvjB,EAAI,QAAQ,OAAO,IAAM,EACvC,OAAO4kB,GAAiBnjB,EAASzB,EAAK6kB,EAAS7I,CAAQ,EAEzD,GAAIyD,GAAiB,GAAM,OAAO,eAAkB,WAClD,OAAOsF,GAA0BtjB,EAASzB,EAAK6kB,EAAS7I,CAAQ,EAElEA,EAAS,IAAI,MAAM,2CAA2C,CAAC,CACjE,EC9JA,SAASuD,EAAQC,EAAG,CAAE,0BAA2B,OAAOD,EAAwB,OAAO,QAArB,YAA2C,OAAO,OAAO,UAA1B,SAAqC,SAAUC,EAAG,CAAE,OAAO,OAAOA,CAAG,EAAI,SAAUA,EAAG,CAAE,OAAOA,GAAmB,OAAO,QAArB,YAA+BA,EAAE,cAAgB,QAAUA,IAAM,OAAO,UAAY,SAAW,OAAOA,CAAG,EAAGD,EAAQC,CAAC,CAAG,CAC7T,SAASkE,GAAQ3gB,EAAG6L,EAAG,CAAE,IAAI,EAAI,OAAO,KAAK7L,CAAC,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIyc,EAAI,OAAO,sBAAsBzc,CAAC,EAAG6L,IAAM4Q,EAAIA,EAAE,OAAO,SAAU5Q,EAAG,CAAE,OAAO,OAAO,yBAAyB7L,EAAG6L,CAAC,EAAE,UAAY,CAAC,GAAI,EAAE,KAAK,MAAM,EAAG4Q,CAAC,CAAG,CAAE,OAAO,CAAG,CAC9P,SAASmE,GAAc5gB,EAAG,CAAE,QAAS6L,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAI,EAAY,UAAUA,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,CAAA,EAAIA,EAAI,EAAI8U,GAAQ,OAAO,CAAC,EAAG,EAAE,EAAE,QAAQ,SAAU9U,EAAG,CAAEgV,GAAgB7gB,EAAG6L,EAAG,EAAEA,CAAC,CAAC,CAAG,CAAC,EAAI,OAAO,0BAA4B,OAAO,iBAAiB7L,EAAG,OAAO,0BAA0B,CAAC,CAAC,EAAI2gB,GAAQ,OAAO,CAAC,CAAC,EAAE,QAAQ,SAAU9U,EAAG,CAAE,OAAO,eAAe7L,EAAG6L,EAAG,OAAO,yBAAyB,EAAGA,CAAC,CAAC,CAAG,CAAC,CAAG,CAAE,OAAO7L,CAAG,CACtb,SAASkiB,GAAgB9Y,EAAG0K,EAAG,CAAE,GAAI,EAAE1K,aAAa0K,GAAI,MAAM,IAAI,UAAU,mCAAmC,CAAG,CAClH,SAASqO,GAAkBniB,EAAG6L,EAAG,CAAE,QAAS,EAAI,EAAG,EAAIA,EAAE,OAAQ,IAAK,CAAE,IAAI4Q,EAAI5Q,EAAE,CAAC,EAAG4Q,EAAE,WAAaA,EAAE,YAAc,GAAIA,EAAE,aAAe,GAAI,UAAWA,IAAMA,EAAE,SAAW,IAAK,OAAO,eAAezc,EAAG8gB,GAAerE,EAAE,GAAG,EAAGA,CAAC,CAAG,CAAE,CACvO,SAAS2F,GAAapiB,EAAG6L,EAAG,EAAG,CAAE,OAAOA,GAAKsW,GAAkBniB,EAAE,UAAW6L,CAAC,EAAiC,OAAO,eAAe7L,EAAG,YAAa,CAAE,SAAU,EAAE,CAAE,EAAGA,CAAG,CAC1K,SAAS6gB,GAAgB7gB,EAAG6L,EAAG,EAAG,CAAE,OAAQA,EAAIiV,GAAejV,CAAC,KAAM7L,EAAI,OAAO,eAAeA,EAAG6L,EAAG,CAAE,MAAO,EAAG,WAAY,GAAI,aAAc,GAAI,SAAU,EAAE,CAAE,EAAI7L,EAAE6L,CAAC,EAAI,EAAG7L,CAAG,CACnL,SAAS8gB,GAAe/F,EAAG,CAAE,IAAI9hB,EAAI8nB,GAAahG,EAAG,QAAQ,EAAG,OAAmByB,EAAQvjB,CAAC,GAArB,SAAyBA,EAAIA,EAAI,EAAI,CAC5G,SAAS8nB,GAAahG,EAAGlP,EAAG,CAAE,GAAgB2Q,EAAQzB,CAAC,GAArB,UAA0B,CAACA,EAAG,OAAOA,EAAG,IAAI/a,EAAI+a,EAAE,OAAO,WAAW,EAAG,GAAe/a,IAAX,OAAc,CAAE,IAAI/G,EAAI+G,EAAE,KAAK+a,EAAGlP,CAAc,EAAG,GAAgB2Q,EAAQvjB,CAAC,GAArB,SAAwB,OAAOA,EAAG,MAAM,IAAI,UAAU,8CAA8C,CAAG,CAAE,OAAyB,OAAiB8hB,CAAC,CAAG,CAG3T,IAAIsH,GAAc,UAAuB,CACvC,MAAO,CACL,SAAU,+BACV,QAAS,8BACT,MAAO,SAAehlB,EAAM,CAC1B,OAAO,KAAK,MAAMA,CAAI,CACxB,EACA,UAAW,KAAK,UAChB,aAAc,SAAsBiS,EAAWtR,EAAK8b,EAAe,CACjE,OAAO+G,GAAgB,CAAA,EAAI7iB,EAAK8b,GAAiB,EAAE,CACrD,EACA,iBAAkB,SAA0Bd,EAAWjK,EAAY,CAEnE,EACA,QAASqR,GACT,eAAgB,OAAO,OAAW,IAAc,GAAQ,KAAU,IAClE,cAAe,CAAA,EACf,kBAAmB,CAAA,EACnB,YAAa,GACb,gBAAiB,GACjB,iBAAkB,GAClB,eAAgB,CACd,KAAM,OACN,YAAa,cACb,MAAO,SACb,CACA,CACA,EACIkC,IAAU,UAAY,CACxB,SAASA,EAAQzT,EAAU,CACzB,IAAInQ,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9E6jB,EAAa,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EACrFL,GAAgB,KAAMI,CAAO,EAC7B,KAAK,SAAWzT,EAChB,KAAK,QAAUnQ,EACf,KAAK,WAAa6jB,EAClB,KAAK,KAAO,UACZ,KAAK,KAAK1T,EAAUnQ,EAAS6jB,CAAU,CACzC,CACA,OAAOH,GAAaE,EAAS,CAAC,CAC5B,IAAK,OACL,MAAO,SAAczT,EAAU,CAC7B,IAAIyC,EAAQ,KACR5S,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9E6jB,EAAa,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAIrF,GAHA,KAAK,SAAW1T,EAChB,KAAK,QAAU+R,GAAcA,GAAcA,GAAc,CAAA,EAAIyB,GAAW,CAAE,EAAG,KAAK,SAAW,CAAA,CAAE,EAAG3jB,CAAO,EACzG,KAAK,WAAa6jB,EACd,KAAK,UAAY,KAAK,QAAQ,eAAgB,CAChD,IAAIC,EAAQ,YAAY,UAAY,CAClC,OAAOlR,EAAM,OAAM,CACrB,EAAG,KAAK,QAAQ,cAAc,EAC1BkL,EAAQgG,CAAK,IAAM,UAAY,OAAOA,EAAM,OAAU,YAAYA,EAAM,MAAK,CACnF,CACF,CACJ,EAAK,CACD,IAAK,YACL,MAAO,SAAmBxJ,EAAWjK,EAAYkK,EAAU,CACzD,KAAK,SAASD,EAAWA,EAAWjK,EAAYA,EAAYkK,CAAQ,CACtE,CACJ,EAAK,CACD,IAAK,OACL,MAAO,SAAc9H,EAAU7B,EAAW2J,EAAU,CAClD,KAAK,SAAS,CAAC9H,CAAQ,EAAGA,EAAU,CAAC7B,CAAS,EAAGA,EAAW2J,CAAQ,CACtE,CACJ,EAAK,CACD,IAAK,WACL,MAAO,SAAkBD,EAAWyJ,EAAkB1T,EAAY2T,EAAmBzJ,EAAU,CAC7F,IAAImC,EAAS,KACTuH,EAAW,KAAK,QAAQ,SACxB,OAAO,KAAK,QAAQ,UAAa,aACnCA,EAAW,KAAK,QAAQ,SAAS3J,EAAWjK,CAAU,GAExD4T,EAAW9F,GAAY8F,CAAQ,EAC/BA,EAAS,KAAK,SAAUC,EAAkB,CACxC,GAAI,CAACA,EAAkB,OAAO3J,EAAS,KAAM,CAAA,CAAE,EAC/C,IAAIhc,EAAMme,EAAO,SAAS,aAAa,YAAYwH,EAAkB,CACnE,IAAK5J,EAAU,KAAK,GAAG,EACvB,GAAIjK,EAAW,KAAK,GAAG,CACjC,CAAS,EACDqM,EAAO,QAAQne,EAAKgc,EAAUwJ,EAAkBC,CAAiB,CACnE,CAAC,CACH,CACJ,EAAK,CACD,IAAK,UACL,MAAO,SAAiBzlB,EAAKgc,EAAUD,EAAWjK,EAAY,CAC5D,IAAI0M,EAAS,KACTzN,EAAM,OAAOgL,GAAc,SAAW,CAACA,CAAS,EAAIA,EACpDjL,EAAK,OAAOgB,GAAe,SAAW,CAACA,CAAU,EAAIA,EACrD+S,EAAU,KAAK,QAAQ,iBAAiB9T,EAAKD,CAAE,EACnD,KAAK,QAAQ,QAAQ,KAAK,QAAS9Q,EAAK6kB,EAAS,SAAUvI,EAAKzQ,EAAK,CACnE,GAAIA,IAAQA,EAAI,QAAU,KAAOA,EAAI,OAAS,KAAO,CAACA,EAAI,QAAS,OAAOmQ,EAAS,kBAAoBhc,EAAM,kBAAoB6L,EAAI,OAAQ,EAAI,EACjJ,GAAIA,GAAOA,EAAI,QAAU,KAAOA,EAAI,OAAS,IAAK,OAAOmQ,EAAS,kBAAoBhc,EAAM,kBAAoB6L,EAAI,OAAQ,EAAK,EACjI,GAAI,CAACA,GAAOyQ,GAAOA,EAAI,QAAS,CAC9B,IAAIsJ,EAAetJ,EAAI,QAAQ,YAAW,EACtCuJ,EAAiB,CAAC,SAAU,QAAS,UAAW,MAAM,EAAE,KAAK,SAAUC,EAAM,CAC/E,OAAOF,EAAa,QAAQE,CAAI,EAAI,EACtC,CAAC,EACD,GAAID,EACF,OAAO7J,EAAS,kBAAoBhc,EAAM,KAAOsc,EAAI,QAAS,EAAI,CAEtE,CACA,GAAIA,EAAK,OAAON,EAASM,EAAK,EAAK,EACnC,IAAIW,EAAK8I,EACT,GAAI,CACE,OAAOla,EAAI,MAAS,SACtBoR,EAAMuB,EAAO,QAAQ,MAAM3S,EAAI,KAAMkQ,EAAWjK,CAAU,EAE1DmL,EAAMpR,EAAI,IAEd,MAAY,CACVka,EAAW,kBAAoB/lB,EAAM,UACvC,CACA,GAAI+lB,EAAU,OAAO/J,EAAS+J,EAAU,EAAK,EAC7C/J,EAAS,KAAMiB,CAAG,CACpB,CAAC,CACH,CACJ,EAAK,CACD,IAAK,SACL,MAAO,SAAgBlB,EAAW1J,EAAWtR,EAAK8b,EAAeb,EAAU,CACzE,IAAIgK,EAAS,KACb,GAAK,KAAK,QAAQ,QAClB,CAAI,OAAOjK,GAAc,WAAUA,EAAY,CAACA,CAAS,GACzD,IAAI8I,EAAU,KAAK,QAAQ,aAAaxS,EAAWtR,EAAK8b,CAAa,EACjEoJ,EAAW,EACXC,EAAY,CAAA,EACZC,EAAW,CAAA,EACfpK,EAAU,QAAQ,SAAUhL,EAAK,CAC/B,IAAIqV,EAAUJ,EAAO,QAAQ,QACzB,OAAOA,EAAO,QAAQ,SAAY,aACpCI,EAAUJ,EAAO,QAAQ,QAAQjV,EAAKsB,CAAS,GAEjD,IAAIrS,EAAMgmB,EAAO,SAAS,aAAa,YAAYI,EAAS,CAC1D,IAAKrV,EACL,GAAIsB,CACd,CAAS,EACD2T,EAAO,QAAQ,QAAQA,EAAO,QAAShmB,EAAK6kB,EAAS,SAAUzkB,EAAMyL,EAAK,CACxEoa,GAAY,EACZC,EAAU,KAAK9lB,CAAI,EACnB+lB,EAAS,KAAKta,CAAG,EACboa,IAAalK,EAAU,QACrB,OAAOC,GAAa,YAAYA,EAASkK,EAAWC,CAAQ,CAEpE,CAAC,CACH,CAAC,EACH,CACJ,EAAK,CACD,IAAK,SACL,MAAO,UAAkB,CACvB,IAAIE,EAAS,KACTC,EAAiB,KAAK,SACxBC,EAAmBD,EAAe,iBAClClP,EAAgBkP,EAAe,cAC/BE,EAASF,EAAe,OACtBG,EAAkBF,EAAiB,SACvC,GAAI,EAAAE,GAAmBA,EAAgB,YAAW,IAAO,UACzD,KAAIxK,EAAS,CAAA,EACT+B,EAAS,SAAgBjN,EAAK,CAChC,IAAI6C,EAAOwD,EAAc,mBAAmBrG,CAAG,EAC/C6C,EAAK,QAAQ,SAAUG,EAAG,CACpBkI,EAAO,QAAQlI,CAAC,EAAI,GAAGkI,EAAO,KAAKlI,CAAC,CAC1C,CAAC,CACH,EACAiK,EAAOyI,CAAe,EAClB,KAAK,WAAW,SAAS,KAAK,WAAW,QAAQ,QAAQ,SAAU1S,EAAG,CACxE,OAAOiK,EAAOjK,CAAC,CACjB,CAAC,EACDkI,EAAO,QAAQ,SAAUlL,EAAK,CAC5BsV,EAAO,WAAW,GAAG,QAAQ,SAAUvV,EAAI,CACzCyV,EAAiB,KAAKxV,EAAKD,EAAI,OAAQ,KAAM,KAAM,SAAUwL,EAAKlc,EAAM,CAClEkc,GAAKkK,EAAO,KAAK,qBAAqB,OAAO1V,EAAI,gBAAgB,EAAE,OAAOC,EAAK,SAAS,EAAGuL,CAAG,EAC9F,CAACA,GAAOlc,GAAMomB,EAAO,IAAI,oBAAoB,OAAO1V,EAAI,gBAAgB,EAAE,OAAOC,CAAG,EAAG3Q,CAAI,EAC/FmmB,EAAiB,OAAO,GAAG,OAAOxV,EAAK,GAAG,EAAE,OAAOD,CAAE,EAAGwL,EAAKlc,CAAI,CACnE,CAAC,CACH,CAAC,CACH,CAAC,EACH,CACJ,CAAG,CAAC,CACJ,GAAC,EACDilB,GAAQ,KAAO,UC9Lf,SAASJ,GAAgB9Y,EAAG0K,EAAG,CAC7B,GAAI,EAAE1K,aAAa0K,GAAI,MAAM,IAAI,UAAU,mCAAmC,CAChF,CCFA,SAAS0I,GAAQC,EAAG,CAClB,0BAEA,OAAOD,GAAwB,OAAO,QAArB,YAA2C,OAAO,OAAO,UAA1B,SAAqC,SAAUC,EAAG,CAChG,OAAO,OAAOA,CAChB,EAAI,SAAUA,EAAG,CACf,OAAOA,GAAmB,OAAO,QAArB,YAA+BA,EAAE,cAAgB,QAAUA,IAAM,OAAO,UAAY,SAAW,OAAOA,CACpH,EAAGD,GAAQC,CAAC,CACd,CCPA,SAASkH,GAAY5I,EAAGlP,EAAG,CACzB,GAAgB2Q,GAAQzB,CAAC,GAArB,UAA0B,CAACA,EAAG,OAAOA,EACzC,IAAI/a,EAAI+a,EAAE,OAAO,WAAW,EAC5B,GAAe/a,IAAX,OAAc,CAChB,IAAI/G,EAAI+G,EAAE,KAAK+a,EAAGlP,CAAc,EAChC,GAAgB2Q,GAAQvjB,CAAC,GAArB,SAAwB,OAAOA,EACnC,MAAM,IAAI,UAAU,8CAA8C,CACpE,CACA,OAAyB,OAAiB8hB,CAAC,CAC7C,CCRA,SAAS6I,GAAc7I,EAAG,CACxB,IAAI9hB,EAAI0qB,GAAY5I,EAAG,QAAQ,EAC/B,OAAmByB,GAAQvjB,CAAC,GAArB,SAAyBA,EAAIA,EAAI,EAC1C,CCJA,SAASkpB,GAAkBniB,EAAG6L,EAAG,CAC/B,QAAS,EAAI,EAAG,EAAIA,EAAE,OAAQ,IAAK,CACjC,IAAI4Q,EAAI5Q,EAAE,CAAC,EACX4Q,EAAE,WAAaA,EAAE,YAAc,GAAIA,EAAE,aAAe,GAAI,UAAWA,IAAMA,EAAE,SAAW,IAAK,OAAO,eAAezc,EAAG4jB,GAAcnH,EAAE,GAAG,EAAGA,CAAC,CAC7I,CACF,CACA,SAAS2F,GAAapiB,EAAG6L,EAAG,EAAG,CAC7B,OAAOA,GAAKsW,GAAkBniB,EAAE,UAAW6L,CAAC,EAAiC,OAAO,eAAe7L,EAAG,YAAa,CACjH,SAAU,EACd,CAAG,EAAGA,CACN,CCRA,IAAIsG,GAAM,CAAA,EACNud,GAAOvd,GAAI,QACXwd,GAAQxd,GAAI,MAChB,SAASyd,GAASnb,EAAK,CACrB,OAAAib,GAAK,KAAKC,GAAM,KAAK,UAAW,CAAC,EAAG,SAAUnZ,EAAQ,CACpD,GAAIA,EACF,QAASE,KAAQF,EACX/B,EAAIiC,CAAI,IAAM,SAAWjC,EAAIiC,CAAI,EAAIF,EAAOE,CAAI,EAG1D,CAAC,EACMjC,CACT,CAGA,IAAIob,GAAqB,wCACrBC,GAAkB,SAAyB5kB,EAAM6V,EAAKxW,EAAS,CACjE,IAAImZ,EAAMnZ,GAAW,CAAA,EACrBmZ,EAAI,KAAOA,EAAI,MAAQ,IACvB,IAAIrN,EAAQ,mBAAmB0K,CAAG,EAC9BzV,EAAM,GAAG,OAAOJ,EAAM,GAAG,EAAE,OAAOmL,CAAK,EAC3C,GAAIqN,EAAI,OAAS,EAAG,CAClB,IAAIqM,EAASrM,EAAI,OAAS,EAC1B,GAAI,OAAO,MAAMqM,CAAM,EAAG,MAAM,IAAI,MAAM,2BAA2B,EACrEzkB,GAAO,aAAa,OAAO,KAAK,MAAMykB,CAAM,CAAC,CAC/C,CACA,GAAIrM,EAAI,OAAQ,CACd,GAAI,CAACmM,GAAmB,KAAKnM,EAAI,MAAM,EACrC,MAAM,IAAI,UAAU,0BAA0B,EAEhDpY,GAAO,YAAY,OAAOoY,EAAI,MAAM,CACtC,CACA,GAAIA,EAAI,KAAM,CACZ,GAAI,CAACmM,GAAmB,KAAKnM,EAAI,IAAI,EACnC,MAAM,IAAI,UAAU,wBAAwB,EAE9CpY,GAAO,UAAU,OAAOoY,EAAI,IAAI,CAClC,CACA,GAAIA,EAAI,QAAS,CACf,GAAI,OAAOA,EAAI,QAAQ,aAAgB,WACrC,MAAM,IAAI,UAAU,2BAA2B,EAEjDpY,GAAO,aAAa,OAAOoY,EAAI,QAAQ,YAAW,CAAE,CACtD,CAGA,GAFIA,EAAI,WAAUpY,GAAO,cACrBoY,EAAI,SAAQpY,GAAO,YACnBoY,EAAI,SAAU,CAChB,IAAIsM,EAAW,OAAOtM,EAAI,UAAa,SAAWA,EAAI,SAAS,cAAgBA,EAAI,SACnF,OAAQsM,EAAQ,CACd,IAAK,GACH1kB,GAAO,oBACP,MACF,IAAK,MACHA,GAAO,iBACP,MACF,IAAK,SACHA,GAAO,oBACP,MACF,IAAK,OACHA,GAAO,kBACP,MACF,QACE,MAAM,IAAI,UAAU,4BAA4B,CACxD,CACE,CACA,OAAOA,CACT,EACI2kB,GAAS,CACX,OAAQ,SAAgB/kB,EAAMmL,EAAO6Z,EAASC,EAAQ,CACpD,IAAIC,EAAgB,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CACtF,KAAM,IACN,SAAU,QAChB,EACQF,IACFE,EAAc,QAAU,IAAI,KAC5BA,EAAc,QAAQ,QAAQA,EAAc,QAAQ,UAAYF,EAAU,GAAK,GAAI,GAEjFC,IAAQC,EAAc,OAASD,GACnC,SAAS,OAASL,GAAgB5kB,EAAM,mBAAmBmL,CAAK,EAAG+Z,CAAa,CAClF,EACA,KAAM,SAAcllB,EAAM,CAGxB,QAFImlB,EAAS,GAAG,OAAOnlB,EAAM,GAAG,EAC5BolB,EAAK,SAAS,OAAO,MAAM,GAAG,EACzBxrB,EAAI,EAAGA,EAAIwrB,EAAG,OAAQxrB,IAAK,CAElC,QADI2S,EAAI6Y,EAAGxrB,CAAC,EACL2S,EAAE,OAAO,CAAC,IAAM,KAAKA,EAAIA,EAAE,UAAU,EAAGA,EAAE,MAAM,EACvD,GAAIA,EAAE,QAAQ4Y,CAAM,IAAM,EAAG,OAAO5Y,EAAE,UAAU4Y,EAAO,OAAQ5Y,EAAE,MAAM,CACzE,CACA,OAAO,IACT,EACA,OAAQ,SAAgBvM,EAAM,CAC5B,KAAK,OAAOA,EAAM,GAAI,EAAE,CAC1B,CACF,EACIqlB,GAAW,CACb,KAAM,SACN,OAAQ,SAAgBhmB,EAAS,CAC/B,IAAIoT,EACJ,GAAIpT,EAAQ,cAAgB,OAAO,SAAa,IAAa,CAC3D,IAAIkN,EAAIwY,GAAO,KAAK1lB,EAAQ,YAAY,EACpCkN,IAAGkG,EAAQlG,EACjB,CACA,OAAOkG,CACT,EACA,kBAAmB,SAA2B9D,EAAKtP,EAAS,CACtDA,EAAQ,cAAgB,OAAO,SAAa,KAC9C0lB,GAAO,OAAO1lB,EAAQ,aAAcsP,EAAKtP,EAAQ,cAAeA,EAAQ,aAAcA,EAAQ,aAAa,CAE/G,CACF,EAEIimB,GAAc,CAChB,KAAM,cACN,OAAQ,SAAgBjmB,EAAS,CAC/B,IAAIoT,EACJ,GAAI,OAAO,OAAW,IAAa,CACjC,IAAI8S,EAAS,OAAO,SAAS,OACzB,CAAC,OAAO,SAAS,QAAU,OAAO,SAAS,MAAQ,OAAO,SAAS,KAAK,QAAQ,GAAG,EAAI,KACzFA,EAAS,OAAO,SAAS,KAAK,UAAU,OAAO,SAAS,KAAK,QAAQ,GAAG,CAAC,GAI3E,QAFIC,EAAQD,EAAO,UAAU,CAAC,EAC1BvD,EAASwD,EAAM,MAAM,GAAG,EACnB5rB,EAAI,EAAGA,EAAIooB,EAAO,OAAQpoB,IAAK,CACtC,IAAI6rB,EAAMzD,EAAOpoB,CAAC,EAAE,QAAQ,GAAG,EAC/B,GAAI6rB,EAAM,EAAG,CACX,IAAI9mB,EAAMqjB,EAAOpoB,CAAC,EAAE,UAAU,EAAG6rB,CAAG,EAChC9mB,IAAQU,EAAQ,oBAClBoT,EAAQuP,EAAOpoB,CAAC,EAAE,UAAU6rB,EAAM,CAAC,EAEvC,CACF,CACF,CACA,OAAOhT,CACT,CACF,EAEIiT,GAAyB,KACzBC,GAAwB,UAAiC,CAC3D,GAAID,KAA2B,KAAM,OAAOA,GAC5C,GAAI,CACFA,GAAyB,SAAW,aAAe,OAAO,eAAiB,KAC3E,IAAIE,EAAU,wBACd,OAAO,aAAa,QAAQA,EAAS,KAAK,EAC1C,OAAO,aAAa,WAAWA,CAAO,CACxC,MAAY,CACVF,GAAyB,EAC3B,CACA,OAAOA,EACT,EACIG,GAAe,CACjB,KAAM,eACN,OAAQ,SAAgBxmB,EAAS,CAC/B,IAAIoT,EACJ,GAAIpT,EAAQ,oBAAsBsmB,KAAyB,CACzD,IAAIhX,EAAM,OAAO,aAAa,QAAQtP,EAAQ,kBAAkB,EAC5DsP,IAAK8D,EAAQ9D,EACnB,CACA,OAAO8D,CACT,EACA,kBAAmB,SAA2B9D,EAAKtP,EAAS,CACtDA,EAAQ,oBAAsBsmB,MAChC,OAAO,aAAa,QAAQtmB,EAAQ,mBAAoBsP,CAAG,CAE/D,CACF,EAEImX,GAA2B,KAC3BC,GAA0B,UAAmC,CAC/D,GAAID,KAA6B,KAAM,OAAOA,GAC9C,GAAI,CACFA,GAA2B,SAAW,aAAe,OAAO,iBAAmB,KAC/E,IAAIF,EAAU,wBACd,OAAO,eAAe,QAAQA,EAAS,KAAK,EAC5C,OAAO,eAAe,WAAWA,CAAO,CAC1C,MAAY,CACVE,GAA2B,EAC7B,CACA,OAAOA,EACT,EACIE,GAAiB,CACnB,KAAM,iBACN,OAAQ,SAAgB3mB,EAAS,CAC/B,IAAIoT,EACJ,GAAIpT,EAAQ,sBAAwB0mB,KAA2B,CAC7D,IAAIpX,EAAM,OAAO,eAAe,QAAQtP,EAAQ,oBAAoB,EAChEsP,IAAK8D,EAAQ9D,EACnB,CACA,OAAO8D,CACT,EACA,kBAAmB,SAA2B9D,EAAKtP,EAAS,CACtDA,EAAQ,sBAAwB0mB,MAClC,OAAO,eAAe,QAAQ1mB,EAAQ,qBAAsBsP,CAAG,CAEnE,CACF,EAEIsX,GAAc,CAChB,KAAM,YACN,OAAQ,SAAgB5mB,EAAS,CAC/B,IAAIoT,EAAQ,CAAA,EACZ,GAAI,OAAO,UAAc,IAAa,CACpC,GAAI,UAAU,UAEZ,QAAS7Y,EAAI,EAAGA,EAAI,UAAU,UAAU,OAAQA,IAC9C6Y,EAAM,KAAK,UAAU,UAAU7Y,CAAC,CAAC,EAGjC,UAAU,cACZ6Y,EAAM,KAAK,UAAU,YAAY,EAE/B,UAAU,UACZA,EAAM,KAAK,UAAU,QAAQ,CAEjC,CACA,OAAOA,EAAM,OAAS,EAAIA,EAAQ,MACpC,CACF,EAEIyT,GAAU,CACZ,KAAM,UACN,OAAQ,SAAgB7mB,EAAS,CAC/B,IAAIoT,EACAyT,EAAU7mB,EAAQ,UAAY,OAAO,SAAa,IAAc,SAAS,gBAAkB,MAC/F,OAAI6mB,GAAW,OAAOA,EAAQ,cAAiB,aAC7CzT,EAAQyT,EAAQ,aAAa,MAAM,GAE9BzT,CACT,CACF,EAEInI,GAAO,CACT,KAAM,OACN,OAAQ,SAAgBjL,EAAS,CAC/B,IAAIoT,EACJ,GAAI,OAAO,OAAW,IAAa,CACjC,IAAIX,EAAW,OAAO,SAAS,SAAS,MAAM,iBAAiB,EAC/D,GAAIA,aAAoB,MACtB,GAAI,OAAOzS,EAAQ,qBAAwB,SAAU,CACnD,GAAI,OAAOyS,EAASzS,EAAQ,mBAAmB,GAAM,SACnD,OAEFoT,EAAQX,EAASzS,EAAQ,mBAAmB,EAAE,QAAQ,IAAK,EAAE,CAC/D,MACEoT,EAAQX,EAAS,CAAC,EAAE,QAAQ,IAAK,EAAE,CAGzC,CACA,OAAOW,CACT,CACF,EAEI0T,GAAY,CACd,KAAM,YACN,OAAQ,SAAgB9mB,EAAS,CAE/B,IAAI+mB,EAA2B,OAAO/mB,EAAQ,0BAA6B,SAAWA,EAAQ,yBAA2B,EAAI,EAIzHyS,EAAW,OAAO,OAAW,KAAe,OAAO,UAAY,OAAO,SAAS,UAAY,OAAO,SAAS,SAAS,MAAM,wDAAwD,EAGtL,GAAKA,EAEL,OAAOA,EAASsU,CAAwB,CAC1C,CACF,EAGIC,GAAa,GACjB,GAAI,CAEF,SAAS,OACTA,GAAa,EAEf,MAAY,CAAC,CACb,IAAIC,GAAQ,CAAC,cAAe,SAAU,eAAgB,iBAAkB,YAAa,SAAS,EACzFD,IAAYC,GAAM,OAAO,EAAG,CAAC,EAClC,SAAStD,IAAc,CACrB,MAAO,CACL,MAAOsD,GACP,kBAAmB,MACnB,aAAc,UACd,mBAAoB,aACpB,qBAAsB,aAEtB,OAAQ,CAAC,cAAc,EACvB,gBAAiB,CAAC,QAAQ,EAI1B,wBAAyB,SAAiC3U,EAAG,CAC3D,OAAOA,CACT,CACJ,CACA,CACA,IAAI4U,IAAuB,UAAY,CACrC,SAASA,EAAQ/W,EAAU,CACzB,IAAInQ,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAClFwjB,GAAgB,KAAM0D,CAAO,EAC7B,KAAK,KAAO,mBACZ,KAAK,UAAY,CAAA,EACjB,KAAK,KAAK/W,EAAUnQ,CAAO,CAC7B,CACA,OAAO0jB,GAAawD,EAAS,CAAC,CAC5B,IAAK,OACL,MAAO,SAAc/W,EAAU,CAC7B,IAAInQ,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAC9EmnB,EAAc,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EACtF,KAAK,SAAWhX,GAAY,CAC1B,cAAe,CAAA,CACvB,EACM,KAAK,QAAUkV,GAASrlB,EAAS,KAAK,SAAW,CAAA,EAAI2jB,IAAa,EAC9D,OAAO,KAAK,QAAQ,yBAA4B,UAAY,KAAK,QAAQ,wBAAwB,QAAQ,OAAO,EAAI,KACtH,KAAK,QAAQ,wBAA0B,SAAUrR,EAAG,CAClD,OAAOA,EAAE,QAAQ,IAAK,GAAG,CAC3B,GAIE,KAAK,QAAQ,qBAAoB,KAAK,QAAQ,oBAAsB,KAAK,QAAQ,oBACrF,KAAK,YAAc6U,EACnB,KAAK,YAAYnB,EAAQ,EACzB,KAAK,YAAYC,EAAW,EAC5B,KAAK,YAAYO,EAAY,EAC7B,KAAK,YAAYG,EAAc,EAC/B,KAAK,YAAYC,EAAW,EAC5B,KAAK,YAAYC,EAAO,EACxB,KAAK,YAAY5b,EAAI,EACrB,KAAK,YAAY6b,EAAS,CAC5B,CACJ,EAAK,CACD,IAAK,cACL,MAAO,SAAqBM,EAAU,CACpC,YAAK,UAAUA,EAAS,IAAI,EAAIA,EACzB,IACT,CACJ,EAAK,CACD,IAAK,SACL,MAAO,SAAgBC,EAAgB,CACrC,IAAIzU,EAAQ,KACPyU,IAAgBA,EAAiB,KAAK,QAAQ,OACnD,IAAIC,EAAW,CAAA,EAWf,OAVAD,EAAe,QAAQ,SAAUE,EAAc,CAC7C,GAAI3U,EAAM,UAAU2U,CAAY,EAAG,CACjC,IAAIC,EAAS5U,EAAM,UAAU2U,CAAY,EAAE,OAAO3U,EAAM,OAAO,EAC3D4U,GAAU,OAAOA,GAAW,WAAUA,EAAS,CAACA,CAAM,GACtDA,IAAQF,EAAWA,EAAS,OAAOE,CAAM,EAC/C,CACF,CAAC,EACDF,EAAWA,EAAS,IAAI,SAAUG,EAAG,CACnC,OAAO7U,EAAM,QAAQ,wBAAwB6U,CAAC,CAChD,CAAC,EACG,KAAK,SAAS,cAAc,sBAA8BH,EACvDA,EAAS,OAAS,EAAIA,EAAS,CAAC,EAAI,IAC7C,CACJ,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BhY,EAAKoY,EAAQ,CAC7C,IAAIhL,EAAS,KACRgL,IAAQA,EAAS,KAAK,QAAQ,QAC9BA,IACD,KAAK,QAAQ,iBAAmB,KAAK,QAAQ,gBAAgB,QAAQpY,CAAG,EAAI,IAChFoY,EAAO,QAAQ,SAAUC,EAAW,CAC9BjL,EAAO,UAAUiL,CAAS,GAAGjL,EAAO,UAAUiL,CAAS,EAAE,kBAAkBrY,EAAKoN,EAAO,OAAO,CACpG,CAAC,EACH,CACJ,CAAG,CAAC,CACJ,GAAC,EACDwK,GAAQ,KAAO,mBC/WR,MAAMU,EAAsB,CACjC,GAAI,CACF,KAAM,KACN,KAAM,UACN,WAAY,UACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,UACN,WAAY,UACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,SACN,WAAY,WACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,SACN,WAAY,UACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,UACN,WAAY,WACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,aACN,WAAY,YACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,UACN,WAAY,UACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,WACN,WAAY,MACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,SACN,WAAY,MACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,UACN,WAAY,KACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,SACN,WAAY,UACZ,KAAM,OACN,IAAK,EAAA,EAEP,GAAI,CACF,KAAM,KACN,KAAM,SACN,WAAY,QACZ,KAAM,OACN,IAAK,EAAA,CAET,EAKaC,GAAuB,CAClC,GAAI,CACF,OAAQ,CACN,QAAS,aACT,MAAO,QACP,MAAO,QACP,MAAO,QACP,KAAM,OACN,OAAQ,SACR,IAAK,MACL,GAAI,KACJ,SAAU,WACV,KAAM,OACN,KAAM,OACN,SAAU,UAAA,EAEZ,KAAM,CACJ,MAAO,cACP,SAAU,0CACV,UAAW,aACX,UAAW,aACX,OAAQ,SACR,SAAU,YACV,MAAO,QACP,MAAO,QACP,MAAO,QACP,QAAS,WACT,UAAW,aACX,OAAQ,aACR,WAAY,cACZ,aAAc,kBACd,YAAa,6BACb,gBAAiB,sBACjB,WAAY,cAAA,EAEd,KAAM,CACJ,KAAM,OACN,SAAU,WACV,YAAa,cACb,aAAc,eACd,WAAY,aACZ,MAAO,QACP,QAAS,UACT,KAAM,MAAA,EAER,SAAU,CACR,MAAO,WACP,MAAO,QACP,SAAU,WACV,SAAU,WACV,SAAU,WACV,MAAO,QACP,WAAY,aACZ,OAAQ,SACR,aAAc,gBACd,MAAO,QACP,WAAY,aACZ,cAAe,eAAA,EAEjB,WAAY,CACV,iBAAkB,oBAClB,QAAS,UACT,QAAS,UACT,UAAW,YACX,OAAQ,SACR,cAAe,gBACf,IAAK,mBACL,UAAW,YACX,SAAU,WACV,QAAS,SAAA,EAEX,QAAS,CACP,cAAe,wBACf,kBACE,6EACF,UAAW,YACX,UAAW,YACX,UAAW,YACX,YAAa,cACb,UAAW,aACX,gBAAiB,iBACjB,UAAW,YACX,cAAe,gBAAA,CACjB,CAEJ,EAQA,MAAMC,EAAY,CACR,gBAAqC,KACrC,cAAgB,GAChB,oBACF,IAEN,aAAc,CACZ,KAAK,gBAAkB,KAAK,eAAA,CAC9B,CAEA,MAAa,WAAWpmB,EAAqB,GAAmB,CAC9D,KAAM,CACJ,iBAAAqmB,EAAmB,KACnB,MAAAC,EAAQ,GACR,SAAA/D,EAAW,8BAAA,EACTviB,EAEJ,GAAI,CACF,MAAMumB,EACH,IAAIrE,EAAO,EACX,IAAIsE,EAAgB,EACpB,KAAK,CACJ,IAAK,KAAK,gBACV,YAAaH,EACb,MAAAC,EACA,QAAS,CAAE,SAAA/D,CAAA,EACX,UAAW,CACT,MAAO,CAAC,eAAgB,YAAa,SAAS,EAC9C,OAAQ,CAAC,cAAc,CAAA,EAEzB,UAAW,CACT,GAAI,CAAE,YAAa4D,GAAqB,EAAA,CAAG,EAE7C,cAAe,CAAE,YAAa,EAAA,CAAM,CACrC,EAEH,KAAK,cAAgB,GACrB,KAAK,gBAAmBI,EAAK,UAAkC,KAC/D,KAAK,mBAAA,EAEL,QAAQ,IAAI,mCAAmC,KAAK,eAAe,EAAE,CACvE,OAASrpB,EAAO,CAEd,QAAQ,MAAM,6BAA8BA,CAAK,EACjD,KAAK,cAAgB,EACvB,CACF,CAEA,MAAa,eAAe6T,EAA4C,CACjE,KAAK,eACR,MAAM,KAAK,WAAA,EAGb,GAAI,CACF,MAAMwV,EAAK,eAAexV,CAAQ,EAClC,KAAK,gBAAkBA,EACvB,KAAK,mBAAA,EACL,aAAa,QAAQ,gBAAiBA,CAAQ,EAC9C,KAAK,gBAAgB,QAAQxS,GAAYA,EAASwS,CAAQ,CAAC,EAE3D,QAAQ,IAAI,wBAAwBA,CAAQ,EAAE,CAChD,OAAS7T,EAAO,CAEd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,CAEO,EAAEU,EAAaU,EAAuB,CAC3C,GAAI,CAAC,KAAK,cAAe,CACvB,MAAMyQ,EAAOnR,EAAI,MAAM,GAAG,EAC1B,IAAIwM,EAAa+b,GAAqB,GAEtC,UAAWvc,KAAKmF,EAEd,GADA3E,EAAQA,IAAQR,CAAC,EACb,CAACQ,EAAO,MAGd,OAAOA,GAASxM,CAClB,CAEA,OAAO2oB,EAAK,EAAE3oB,EAAKU,CAAO,CAC5B,CAEO,oBAAwC,CAC7C,OAAO,KAAK,eACd,CAEO,kBAAkByS,EAA6B,CACpD,OAAOmV,EAAoBnV,CAAQ,CACrC,CAEO,uBAAwB,CAC7B,OAAO,OAAO,OAAOmV,CAAmB,CAC1C,CAEO,OAAiB,CACtB,OAAOA,EAAoB,KAAK,eAAe,GAAG,KAAO,EAC3D,CAEO,aACL1R,EACAlW,EACQ,CACR,GAAI,CACF,OAAO,IAAI,KAAK,aAAa,KAAK,gBAAiBA,CAAO,EAAE,OAC1DkW,CAAA,CAEJ,MAAQ,CACN,OAAOA,EAAO,SAAA,CAChB,CACF,CAEO,WAAWiS,EAAYnoB,EAA8C,CAC1E,GAAI,CACF,OAAO,IAAI,KAAK,eAAe,KAAK,gBAAiBA,CAAO,EAAE,OAC5DmoB,CAAA,CAEJ,MAAQ,CACN,OAAOA,EAAK,mBAAA,CACd,CACF,CAEO,iBACL5N,EACY,CACZ,YAAK,gBAAgB,IAAIA,CAAQ,EAC1B,IAAM,KAAK,gBAAgB,OAAOA,CAAQ,CACnD,CAEQ,gBAAoC,CAC1C,MAAM6N,EAAQ,aAAa,QAAQ,eAAe,EAClD,GAAIA,GAASA,KAASR,EACpB,OAAOQ,EAGT,MAAMC,EAAc,UAAU,SAAS,MAAM,GAAG,EAAE,CAAC,EACnD,GAAIA,KAAeT,EACjB,OAAOS,EAGT,UAAWC,KAAQ,UAAU,UAAW,CACtC,MAAMC,EAAWD,EAAK,MAAM,GAAG,EAAE,CAAC,EAClC,GAAIC,KAAYX,EACd,OAAOW,CAEX,CAEA,MAAO,IACT,CAEQ,oBAA2B,CACjC,MAAMC,EAAQ,KAAK,MAAA,EACbC,EAAc,SAAS,gBAEzBD,GACFC,EAAY,aAAa,MAAO,KAAK,EACrCA,EAAY,aAAa,OAAQ,KAAK,eAAe,EACrD,SAAS,KAAK,UAAU,IAAI,KAAK,EACjC,SAAS,KAAK,UAAU,OAAO,KAAK,IAEpCA,EAAY,aAAa,MAAO,KAAK,EACrCA,EAAY,aAAa,OAAQ,KAAK,eAAe,EACrD,SAAS,KAAK,UAAU,IAAI,KAAK,EACjC,SAAS,KAAK,UAAU,OAAO,KAAK,EAExC,CACF,CAEO,MAAMC,EAAc,IAAIZ,GAElBzL,EAAI,CAAC/c,EAAaU,IACtB0oB,EAAY,EAAEppB,EAAKU,CAAO,EC7V5B,MAAM2oB,EAAe,CAClB,cAAoC,KACpC,iBAAuC,KACvC,mBAER,aAAc,CACZ,KAAK,mBAAqB,KAAK,uBAAA,EAC/B,KAAK,KAAA,CACP,CAKO,MAAa,CACd,KAAK,oBACP,KAAK,oBAAA,EAEL,KAAK,aAAA,EAIP,SAAS,iBAAiB,2BAA4B,IAAM,CAC1D,KAAK,qBAAA,CACP,CAAC,CACH,CAKQ,mBAA6B,CACnC,MAAMC,EAAa,aAAa,QAAQ,qBAAqB,EACvDC,EAAiB,aAAa,QAAQ,iBAAiB,EAG7D,MAAO,CAACD,GAAcC,IAFC,KAGzB,CAKQ,wBAA6C,CACnD,MAAMT,EAAQ,aAAa,QAAQ,qBAAqB,EACxD,OAAIA,EACK,KAAK,MAAMA,CAAK,EAGlB,CACL,UAAW,GACX,UAAW,GACX,UAAW,GACX,YAAa,EAAA,CAEjB,CAKQ,uBAAuBU,EAAuC,CACpE,aAAa,QAAQ,sBAAuB,KAAK,UAAUA,CAAW,CAAC,EACvE,aAAa,QAAQ,kBAAmB,KAAK,EAC7C,aAAa,QAAQ,oBAAqB,KAAK,IAAA,EAAM,UAAU,EAE/D,KAAK,mBAAqBA,EAC1B,KAAK,aAAA,CACP,CAKQ,cAAqB,CAE3B9e,EAAiB,cAAc,KAAK,mBAAmB,SAAS,EAG5D,KAAK,mBAAmB,WAC1BA,EAAiB,WAAW,CAC1B,YAAa,EAAA,CACd,EAIH,KAAK,sBAAsB,KAAK,mBAAmB,SAAS,EAC5D,KAAK,wBAAwB,KAAK,mBAAmB,WAAW,EAGhE,SAAS,cACP,IAAI,YAAY,kBAAmB,CACjC,OAAQ,KAAK,kBAAA,CACd,CAAA,CAEL,CAKQ,sBAAsB+e,EAAwB,CAIlD,QAAQ,IAFNA,EAEU,4BAGA,0BAH2B,CAK3C,CAKQ,wBAAwBA,EAAwB,CAIpD,QAAQ,IAFNA,EAEU,8BAGA,4BAH6B,CAK7C,CAKQ,qBAA4B,CAClC,KAAK,cAAgB,SAAS,cAAc,KAAK,EACjD,KAAK,cAAc,UAAY,iBAC/B,KAAK,cAAc,UAAY;AAAA;AAAA;AAAA,mBAGhB1M,EAAE,uBAAuB,CAAC;AAAA,eAC9BA,EAAE,2BAA2B,CAAC;AAAA;AAAA;AAAA,yDAGYA,EAAE,mBAAmB,CAAC;AAAA,+DAChBA,EAAE,yBAAyB,CAAC;AAAA,0DACjCA,EAAE,mBAAmB,CAAC;AAAA,2DACrBA,EAAE,uBAAuB,CAAC;AAAA;AAAA;AAAA,MAKjF,KAAK,iBAAA,EACL,KAAK,oBAAA,EAEL,SAAS,KAAK,YAAY,KAAK,aAAa,EAG5C,WAAW,IAAM,CACf,KAAK,eAAe,UAAU,IAAI,MAAM,CAC1C,EAAG,GAAG,CACR,CAKQ,qBAA4B,CAClC,GAAI,CAAC,KAAK,cAAe,OAEzB,MAAM2M,EAAe,KAAK,cAAc,cAAc,iBAAiB,EACjEC,EAAqB,KAAK,cAAc,cAC5C,uBAAA,EAEIC,EAAiB,KAAK,cAAc,cAAc,kBAAkB,EAE1EF,GAAc,iBAAiB,QAAS,IAAM,CAC5C,KAAK,uBAAuB,CAC1B,UAAW,GACX,UAAW,GACX,UAAW,GACX,YAAa,EAAA,CACd,EACD,KAAK,kBAAA,CACP,CAAC,EAEDC,GAAoB,iBAAiB,QAAS,IAAM,CAClD,KAAK,uBAAuB,CAC1B,UAAW,GACX,UAAW,GACX,UAAW,GACX,YAAa,EAAA,CACd,EACD,KAAK,kBAAA,CACP,CAAC,EAEDC,GAAgB,iBAAiB,QAAS,IAAM,CAC9C,KAAK,qBAAA,CACP,CAAC,CACH,CAKQ,mBAA0B,CAC5B,KAAK,gBACP,KAAK,cAAc,UAAU,OAAO,MAAM,EAC1C,WAAW,IAAM,CACf,KAAK,eAAe,OAAA,EACpB,KAAK,cAAgB,IACvB,EAAG,GAAG,EAEV,CAKQ,sBAA6B,CACnC,KAAK,uBAAA,CACP,CAKQ,wBAA+B,CACrC,KAAK,iBAAmB,SAAS,cAAc,KAAK,EACpD,KAAK,iBAAiB,UAAY,wBAClC,KAAK,iBAAiB,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEAuB0B,KAAK,mBAAmB,UAAY,UAAY,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEAWlD,KAAK,mBAAmB,UAAY,UAAY,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kEAWhD,KAAK,mBAAmB,YAAc,UAAY,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAelH,KAAK,wBAAA,EACL,SAAS,KAAK,YAAY,KAAK,gBAAgB,EAG/C,WAAW,IAAM,CACf,KAAK,kBAAkB,UAAU,IAAI,MAAM,CAC7C,EAAG,EAAE,CACP,CAKQ,yBAAgC,CACtC,GAAI,CAAC,KAAK,iBAAkB,OAE5B,MAAMC,EAAW,KAAK,iBAAiB,cAAc,YAAY,EAC3DC,EAAU,KAAK,iBAAiB,cAAc,WAAW,EACzDC,EAAY,KAAK,iBAAiB,cAAc,aAAa,EAC7DC,EAAU,KAAK,iBAEfC,EAAa,IAAM,KAAK,qBAAA,EAE9BJ,GAAU,iBAAiB,QAASI,CAAU,EAC9CF,GAAW,iBAAiB,QAASE,CAAU,EAE/CD,GAAS,iBAAiB,QAAShoB,GAAK,CAClCA,EAAE,SAAWgoB,GACfC,EAAA,CAEJ,CAAC,EAEDH,GAAS,iBAAiB,QAAS,IAAM,CACvC,MAAMI,EAAoB,KAAK,kBAAkB,cAC/C,oBAAA,EAEIC,EAAoB,KAAK,kBAAkB,cAC/C,oBAAA,EAEIC,EAAsB,KAAK,kBAAkB,cACjD,sBAAA,EAGIZ,EAAkC,CACtC,UAAW,GACX,UAAWU,GAAmB,SAAW,GACzC,UAAWC,GAAmB,SAAW,GACzC,YAAaC,GAAqB,SAAW,EAAA,EAG/C,KAAK,uBAAuBZ,CAAW,EACvC,KAAK,qBAAA,EACL,KAAK,kBAAA,CACP,CAAC,CACH,CAKQ,sBAA6B,CAC/B,KAAK,mBACP,KAAK,iBAAiB,UAAU,OAAO,MAAM,EAC7C,WAAW,IAAM,CACf,KAAK,kBAAkB,OAAA,EACvB,KAAK,iBAAmB,IAC1B,EAAG,GAAG,EAEV,CAKQ,kBAAyB,CAC/B,MAAMa,EAAU,iBAChB,GAAI,SAAS,eAAeA,CAAO,EAAG,OAEtC,MAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,GAAKD,EACXC,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAoQpB,SAAS,KAAK,YAAYA,CAAK,CACjC,CAKO,uBAA4C,CACjD,MAAO,CAAE,GAAG,KAAK,kBAAA,CACnB,CAKO,WAAW9b,EAAyC,CACzD,OAAO,KAAK,mBAAmBA,CAAI,CACrC,CAKO,wBAA+B,CACpC,KAAK,qBAAA,CACP,CAKO,cAAqB,CAC1B,aAAa,WAAW,qBAAqB,EAC7C,aAAa,WAAW,iBAAiB,EACzC,aAAa,WAAW,mBAAmB,EAE3C,KAAK,mBAAqB,CACxB,UAAW,GACX,UAAW,GACX,UAAW,GACX,YAAa,EAAA,EAGf,KAAK,oBAAA,CACP,CACF,CAG8B,IAAI6a,GCpoB3B,MAAMkB,EAAiB,CACpB,UAAgC,KAChC,SAA+B,KAC/B,OACA,OAAS,GACT,gBAER,YAAYnoB,EAAiC,GAAI,CAC/C,KAAK,OAAS,CACZ,SAAU,YACV,UAAW,GACX,UAAW,GACX,QAAS,GACT,GAAGA,CAAA,EAGL,KAAK,gBAAkBgnB,EAAY,mBAAA,EACnC,KAAK,OAAA,EACL,KAAK,oBAAA,CACP,CAKQ,QAAe,CAErB,KAAK,UAAY,SAAS,cAAc,KAAK,EAC7C,KAAK,UAAU,UAAY,qBAAqB,KAAK,OAAO,QAAQ,IAAI,KAAK,OAAO,QAAU,UAAY,EAAE,GAG5G,MAAMoB,EAAgB,SAAS,cAAc,QAAQ,EACrDA,EAAc,UAAY,uBAC1BA,EAAc,aAAa,gBAAiB,MAAM,EAClDA,EAAc,aAAa,gBAAiB,OAAO,EACnDA,EAAc,aACZ,aACAzN,EAAE,gCAAgC,CAAA,EAGpC,KAAK,4BAA4ByN,CAAa,EAG9C,KAAK,SAAW,SAAS,cAAc,KAAK,EAC5C,KAAK,SAAS,UAAY,oBAC1B,KAAK,SAAS,aAAa,OAAQ,MAAM,EACzC,KAAK,SAAS,aAAa,aAAczN,EAAE,mBAAmB,CAAC,EAE/D,KAAK,oBAAA,EAGL,KAAK,UAAU,YAAYyN,CAAa,EACxC,KAAK,UAAU,YAAY,KAAK,QAAQ,EAGxC,KAAK,UAAA,EAGL,SAAS,KAAK,YAAY,KAAK,SAAS,CAC1C,CAKQ,4BAA4BC,EAA2B,CAC7D,MAAMC,EAAapC,EAAoB,KAAK,eAAe,EACrDqC,EAAW,KAAK,OAAO,UACzB,sBAAsBD,EAAW,IAAI,UACrC,GACEE,EACJ,KAAK,OAAO,WAAa,CAAC,KAAK,OAAO,QAClC,sBAAsBF,EAAW,UAAU,UAC3C,GACAG,EAAU,iCAEhBJ,EAAO,UAAY,GAAGE,CAAQ,GAAGC,CAAQ,GAAGC,CAAO,GACnDJ,EAAO,aACL,QACA,GAAG1N,EAAE,mBAAmB,CAAC,KAAK2N,EAAW,UAAU,EAAA,CAEvD,CAKQ,qBAA4B,CAC7B,KAAK,WAEV,KAAK,SAAS,UAAY,GAE1B,OAAO,OAAOpC,CAAmB,EAAE,QAAQoC,GAAc,CACvD,MAAMI,EAAO,SAAS,cAAc,QAAQ,EAC5CA,EAAK,UAAY,iBAAiBJ,EAAW,OAAS,KAAK,gBAAkB,SAAW,EAAE,GAC1FI,EAAK,aAAa,OAAQ,UAAU,EACpCA,EAAK,aAAa,gBAAiBJ,EAAW,IAAI,EAClDI,EAAK,aACH,aACA,GAAG/N,EAAE,mBAAmB,CAAC,KAAK2N,EAAW,UAAU,EAAA,EAGrD,MAAMC,EAAW,KAAK,OAAO,UACzB,sBAAsBD,EAAW,IAAI,UACrC,GACEE,EAAW,KAAK,OAAO,UACzB,sBAAsBF,EAAW,UAAU,UAC3C,GACEK,EACJL,EAAW,OAAS,KAAK,gBACrB,mCACA,GAENI,EAAK,UAAY,GAAGH,CAAQ,GAAGC,CAAQ,GAAGG,CAAS,GAGnDD,EAAK,iBAAiB,QAAS,MAAM9oB,GAAK,CACxCA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACF,MAAM,KAAK,eAAe0oB,EAAW,IAAI,CAC3C,CAAC,EAED,KAAK,UAAU,YAAYI,CAAI,CACjC,CAAC,EACH,CAKQ,qBAA4B,CAClC,GAAI,CAAC,KAAK,UAAW,OAErB,MAAMN,EAAgB,KAAK,UAAU,cACnC,uBAAA,EAIFA,GAAe,iBAAiB,QAASxoB,GAAK,CAC5CA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACF,KAAK,eAAA,CACP,CAAC,EAGD,SAAS,iBAAiB,QAASA,GAAK,CACjC,KAAK,WAAW,SAASA,EAAE,MAAc,GAC5C,KAAK,cAAA,CAET,CAAC,EAGDwoB,GAAe,iBAAiB,UAAWxoB,GAAK,CAC9C,OAAQA,EAAE,IAAA,CACR,IAAK,QACL,IAAK,IACL,IAAK,YACHA,EAAE,eAAA,EACF,KAAK,aAAA,EACL,KAAK,eAAA,EACL,MACF,IAAK,SACH,KAAK,cAAA,EACL,KAAA,CAEN,CAAC,EAGD,KAAK,UAAU,iBAAiB,UAAWA,GAAK,CAC9C,KAAK,sBAAsBA,CAAC,CAC9B,CAAC,EAGDonB,EAAY,iBAAiBjW,GAAY,CACvC,KAAK,gBAAkBA,EACvB,KAAK,4BAA4BqX,CAAa,EAC9C,KAAK,oBAAA,CACP,CAAC,CACH,CAKQ,sBAAsB,EAAwB,CACpD,GAAI,CAAC,KAAK,SAAU,OAEpB,MAAM7K,EAAQ,MAAM,KAClB,KAAK,SAAS,iBAAiB,gBAAgB,CAAA,EAE3CqL,EAAerL,EAAM,UACzBmL,GAAQA,IAAS,SAAS,aAAA,EAG5B,OAAQ,EAAE,IAAA,CACR,IAAK,YAAa,CAChB,EAAE,eAAA,EACF,MAAMG,GAAaD,EAAe,GAAKrL,EAAM,OAC7CA,EAAMsL,CAAS,GAAG,MAAA,EAClB,KACF,CAEA,IAAK,UAAW,CACd,EAAE,eAAA,EACF,MAAMC,EACJF,GAAgB,EAAIrL,EAAM,OAAS,EAAIqL,EAAe,EACxDrL,EAAMuL,CAAS,GAAG,MAAA,EAClB,KACF,CAEA,IAAK,QACL,IAAK,IACH,EAAE,eAAA,EACD,SAAS,eAA+B,MAAA,EACzC,MAEF,IAAK,SACH,EAAE,eAAA,EACF,KAAK,cAAA,EAEH,KAAK,WAAW,cAAc,uBAAuB,GACpD,MAAA,EACH,MAEF,IAAK,OACH,EAAE,eAAA,EACFvL,EAAM,CAAC,GAAG,MAAA,EACV,MAEF,IAAK,MACH,EAAE,eAAA,EACFA,EAAMA,EAAM,OAAS,CAAC,GAAG,MAAA,EACzB,KAAA,CAEN,CAKA,MAAc,eAAexM,EAA4C,CACvE,GAAIA,IAAa,KAAK,gBAAiB,CACrC,KAAK,cAAA,EACL,MACF,CAEA,GAAI,CAEFzI,EAAiB,qBAAqB,CACpC,MAAO,kBACP,QAAS,oBACT,MAAOyI,CAAA,CACR,EAGD,MAAMiW,EAAY,eAAejW,CAAQ,EACzC,KAAK,gBAAkBA,EAGvB,MAAMqX,EAAgB,KAAK,WAAW,cACpC,uBAAA,EAEF,KAAK,4BAA4BA,CAAa,EAC9C,KAAK,oBAAA,EAGL,KAAK,cAAA,EAGL,KAAK,OAAO,mBAAmBrX,CAAQ,EAGvC,SAAS,cACP,IAAI,YAAY,mBAAoB,CAClC,OAAQ,CAAE,SAAAA,EAAU,OAAQmV,EAAoBnV,CAAQ,CAAA,CAAE,CAC3D,CAAA,CAEL,OAAS7T,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,CAKQ,gBAAuB,CACzB,KAAK,OACP,KAAK,cAAA,EAEL,KAAK,aAAA,CAET,CAKQ,cAAqB,CAC3B,GAAI,CAAC,KAAK,UAAY,CAAC,KAAK,UAAW,OAEvC,KAAK,OAAS,GACd,KAAK,SAAS,UAAU,IAAI,MAAM,EAClC,KAAK,UAAU,UAAU,IAAI,MAAM,EAEb,KAAK,UAAU,cAAc,uBAAuB,GAC3D,aAAa,gBAAiB,MAAM,CACrD,CAKQ,eAAsB,CAC5B,GAAI,CAAC,KAAK,UAAY,CAAC,KAAK,UAAW,OAEvC,KAAK,OAAS,GACd,KAAK,SAAS,UAAU,OAAO,MAAM,EACrC,KAAK,UAAU,UAAU,OAAO,MAAM,EAEhB,KAAK,UAAU,cAAc,uBAAuB,GAC3D,aAAa,gBAAiB,OAAO,CACtD,CAKQ,gBAAuB,CACX,KAAK,UAAU,cAC/B,gBAAA,GAES,MAAA,CACb,CAKQ,WAAkB,CACxB,MAAM+qB,EAAU,2BAChB,GAAI,SAAS,eAAeA,CAAO,EAAG,OAEtC,MAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,GAAKD,EACXC,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAuOpB,SAAS,KAAK,YAAYA,CAAK,CACjC,CAKO,aAAaloB,EAA+C,CAGjE,GAFA,KAAK,OAAS,CAAE,GAAG,KAAK,OAAQ,GAAGA,CAAA,EAE/B,KAAK,UAAW,CAElB,KAAK,UAAU,UAAY,KAAK,UAAU,UAAU,QAClD,wDACA,EAAA,EAIF,KAAK,UAAU,WAAa,IAAI,KAAK,OAAO,QAAQ,IAAI,KAAK,OAAO,QAAU,UAAY,EAAE,GAG5F,MAAMooB,EAAgB,KAAK,UAAU,cACnC,uBAAA,EAEF,KAAK,4BAA4BA,CAAa,EAC9C,KAAK,oBAAA,CACP,CACF,CAKO,MAAa,CACd,KAAK,YACP,KAAK,UAAU,MAAM,QAAU,QAEnC,CAKO,MAAa,CACd,KAAK,YACP,KAAK,UAAU,MAAM,QAAU,QAEjC,KAAK,cAAA,CACP,CAKO,SAAgB,CACjB,KAAK,YACP,KAAK,UAAU,OAAA,EACf,KAAK,UAAY,KACjB,KAAK,SAAW,KAEpB,CAKO,oBAAwC,CAC7C,OAAO,KAAK,eACd,CACF,CAGgC,IAAID,GC3mBpC,MAAMY,EAAW,CACE,OACA,IAET,OAA4B,KAC5B,eAAiC,CAAE,KAAM,GAAI,IAAK,EAAG,MAAO,OAAA,EAC5D,mBAAqB,GACrB,iBAAmB,GACnB,YAA6B,KAC7B,cAAgB,EAChB,mBAAyC,CAC/C,IAAK,EACL,UAAW,EACX,WAAY,EACZ,WAAY,CAAA,EAIN,UAAY7mB,GAAa,SAAA,EACzB,YAAcgB,GAAA,EAEtB,YAAY8lB,EAAkB,CAC5B,MAAM9uB,EAAS,SAAS,eAAe8uB,CAAQ,EAC/C,GAAI,CAAC9uB,EACH,MAAM,IAAI,MAAM,mBAAmB8uB,CAAQ,aAAa,EAG1D,KAAK,OAAS9uB,EACd,MAAMxC,EAAMwC,EAAO,WAAW,IAAI,EAClC,GAAI,CAACxC,EACH,MAAM,IAAI,MAAM,0BAA0B,EAE5C,KAAK,IAAMA,EAEX,KAAK,YAAA,EACL,KAAK,oBAAA,EAGL,KAAK,kBAAA,EAGLwK,GAAa,UAAUxD,GAAS,CAC9B,KAAK,UAAYA,CACnB,CAAC,CACH,CAKA,MAAa,MAAsB,CACjC,GAAI,CACF,KAAK,kBAAA,EAGL,KAAK,OAAS,MAAMiH,GAAA,EAGpB,MAAMvB,EAAa,WAAA,EAGnB,MAAM4iB,EAAY,WAAA,EAGlB,MAAM1e,EAAiB,WAAA,EAGvBA,EAAiB,iBAAiB,mBAAoB,CACpD,WAAY,UAAU,UACtB,kBAAmB,GAAG,OAAO,OAAO,KAAK,IAAI,OAAO,OAAO,MAAM,GACjE,cAAe,GAAG,OAAO,UAAU,IAAI,OAAO,WAAW,GACzD,SAAU0e,EAAY,mBAAA,CAAmB,CAC1C,EAGD,KAAK,YAAY,aAAa,MAAM,EACpC,KAAK,cAAA,EAEL,QAAQ,IAAI,sCAAsC,CACpD,OAAS9pB,EAAO,CACd,QAAQ,MAAM,oCAAqCA,CAAK,EACxD,KAAK,gBACH,2DAAA,EAIFoL,EAAiB,iBAAiB,6BAA8B,CAC9D,MAAOpL,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,CAAA,CAC7D,CACH,CACF,CAKQ,aAAoB,CAC1B,KAAK,aAAA,EACL,OAAO,iBAAiB,SAAU,IAAM,KAAK,cAAc,CAC7D,CAKQ,cAAqB,CAC3B,KAAK,OAAO,MAAQ,OAAO,WAC3B,KAAK,OAAO,OAAS,OAAO,YAGxB,KAAK,UAAU,YAAc,WAC/BnF,EAAU,MAAM,KAAK,OAAO,MAAM,CAEtC,CAKQ,qBAA4B,CAElC,SAAS,iBAAiB,UAAW0O,GAAS,KAAK,cAAcA,CAAK,CAAC,EAGvE,KAAK,OAAO,iBAAiB,WAAkB,KAAK,YAAYA,CAAK,CAAC,EACtE,KAAK,OAAO,iBAAiB,aAAcA,GACzC,KAAK,YAAYA,CAAK,CAAA,EAIxB,SAAS,iBAAiB,mBAAoB,IAC5C,KAAK,uBAAA,CAAuB,EAI9B,KAAK,OAAO,iBAAiB,cAAe,GAAK,EAAE,gBAAgB,CACrE,CAKQ,cAAcA,EAA4B,CAChD,KAAM,CAAE,KAAAyF,GAASzF,EAEjB,OAAQyF,EAAA,CACN,IAAK,QACL,IAAK,UACC,KAAK,UAAU,YAAc,WAC/B,KAAK,WAAA,EAEPzF,EAAM,eAAA,EACN,MAEF,IAAK,OACC,KAAK,UAAU,YAAc,UAC/B,KAAK,YAAY,aAAa,QAAQ,EAC7B,KAAK,UAAU,YAAc,UACtC,KAAK,YAAY,aAAa,SAAS,EAEzC,MAEF,IAAK,OACHrC,EAAa,WAAA,EACb,MAEF,IAAK,SACC,KAAK,UAAU,YAAc,WAC/B,KAAK,YAAY,aAAa,QAAQ,EAExC,KAAA,CAEN,CAKQ,YAAYqC,EAAyB,CAC3C,MAAMwiB,EAAO,KAAK,OAAO,sBAAA,EACnB9wB,EAAIsO,EAAM,QAAUwiB,EAAK,KACzB7wB,EAAIqO,EAAM,QAAUwiB,EAAK,IAE/B,OAAQ,KAAK,UAAU,UAAA,CACrB,IAAK,WACH,KAAK,oBAAoB9wB,EAAGC,CAAC,EAC7B,MAEF,IAAK,OACH,KAAK,gBAAgBD,EAAGC,CAAC,EACzB,MAEF,IAAK,UACH,KAAK,WAAA,EACL,KAAA,CAEN,CAKQ,YAAYqO,EAAyB,CAC3CA,EAAM,eAAA,EAEF,KAAK,UAAU,YAAc,WAC/B,KAAK,WAAA,CAET,CAKQ,wBAA+B,CACjC,SAAS,QAAU,KAAK,UAAU,YAAc,WAClD,KAAK,YAAY,aAAa,QAAQ,CAE1C,CAKQ,YAAmB,CACrB,KAAK,mBACN1O,EAAkB,QAAU,GAC7B,KAAK,iBAAmB,IAG1BA,EAAU,KAAA,EACVsM,GAAA,CACF,CAKQ,oBAAoBlM,EAAWC,EAAiB,CACtD,MAAM8wB,EAAU,KAAK,OAAO,MAAQ,EAAI,IAClCC,EAAU,KAAK,OAAO,OAAS,EAAI,GAKvChxB,GAAK+wB,GACL/wB,GAAK+wB,EALa,KAMlB9wB,GAAK+wB,GACL/wB,GAAK+wB,EANc,IAQnB,KAAK,YAAA,CAET,CAKQ,gBAAgBhxB,EAAWC,EAAiB,CAClD,MAAM8wB,EAAU,KAAK,OAAO,MAAQ,EAAI,IAClCC,EAAU,KAAK,OAAO,OAAS,EAAI,GAKvChxB,GAAK+wB,GACL/wB,GAAK+wB,EALa,KAMlB9wB,GAAK+wB,GACL/wB,GAAK+wB,EANc,KASnB7gB,EAAiB,qBAAqB,CACpC,MAAO,aACP,QAAS,mBAAA,CACV,EAED,KAAK,UAAA,EAET,CAKA,MAAc,WAA2B,CACvC,GAAI,CACF,KAAK,YAAY,aAAa,SAAS,EACvC,KAAK,YAAY,WAAA,EAGZ,KAAK,UAAU,oBAClB,KAAK,YAAY,oBAAoB,CAAC,EAIxCA,EAAiB,mBAAmB,CAClC,MAAO,aACP,SAAU,KAAK,UAAU,oBAAoB,YAAc,IAC3D,WAAY,QAAA,CACb,EAED9D,GAAA,EACA,MAAM,KAAK,iBAAA,CACb,OAAStH,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5C,KAAK,qBAAqB,uBAAwB,IAAK,KAAK,CAC9D,CACF,CAKQ,aAAoB,CAC1B,KAAK,YAAY,UAAA,EACjBnB,GAAA,EACAsJ,GAAA,EACA,KAAK,UAAA,CACP,CAKA,MAAc,kBAAkC,CAC9CtN,EAAU,MAAM,KAAK,OAAO,MAAM,EAElC,GAAI,CACF,MAAM8F,GAAc,cAAc,KAAK,UAAU,oBAAsB,CAAC,EACxEnC,GAAwB,KAAK,OAAQC,EAAa,EAElD,KAAK,mBAAqB,GAC1B,KAAK,iBAAmB,EAC1B,OAASuB,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,EACrD,KAAK,qBAAqB,0BAA2B,IAAK,KAAK,CACjE,CACF,CAKQ,UAAiB,CACvBuH,GAAA,EACAF,GAAA,EACAQ,GAAgBhN,EAAU,EAAGA,EAAU,CAAC,EAGxCuQ,EAAiB,mBAAmB,CAClC,MAAO,WACP,MAAO,KAAK,UAAU,MAAM,MAC5B,SAAU,KAAK,UAAU,oBAAoB,YAAc,IAC3D,WAAY,SACZ,SAAU,KAAK,IAAA,EAAQ,KAAK,IAAA,CAAI,CACjC,EAED,KAAK,YAAY,aAAa,UAAU,CAC1C,CAKQ,qBACNpQ,EACAkxB,EACAC,EAAQ,QACF,CACN,KAAK,eAAiB,CAAE,KAAAnxB,EAAM,IAAKkxB,EAAkB,MAAAC,CAAA,CACvD,CAKQ,eAAsB,CAC5B,MAAMC,EAAYlhB,GAA8B,CAC9C,MAAMmhB,EAAYnhB,EAAc,KAAK,cACrC,KAAK,cAAgBA,EAGrB,MAAMohB,EAAkB,YAAY,IAAA,EACpC,KAAK,OAAOD,CAAS,EACrB,MAAME,EAAgB,YAAY,IAAA,EAE5BC,EAAkB,YAAY,IAAA,EACpC,KAAK,OAAA,EACL,MAAMC,EAAgB,YAAY,IAAA,EAElC,KAAK,mBAAqB,CACxB,IAAK,IAAOJ,EACZ,UAAWA,EACX,WAAYE,EAAgBD,EAC5B,WAAYG,EAAgBD,CAAA,EAI1B,KAAK,OAAA,EAAW,KAElBphB,EAAiB,iBAAiB,CAChC,MAAO,qBACP,OAAQ,MACR,MAAO,KAAK,mBAAmB,IAC/B,QAAS,KAAK,UAAU,SAAA,CACzB,EAGH,KAAK,YAAc,sBAAsBghB,CAAQ,CACnD,EAEA,KAAK,YAAc,sBAAsBA,CAAQ,CACnD,CAKQ,OAAOC,EAAyB,CAGtC,GAAK,KAAK,OAEV,QAAQ,KAAK,UAAU,UAAA,CACrB,IAAK,UACH,KAAK,eAAA,EACL,MAEF,IAAK,SAEH,MAEF,QAEEpkB,GAAA,EACA,KAAA,CAIA,KAAK,eAAe,IAAM,GAC5B,KAAK,eAAe,MAExB,CAKQ,gBAAuB,CAM7B,GALApN,EAAU,OAAA,EACV8D,GAAgB,KAAK,UAAU,SAAS,EACxCsJ,GAAA,EAGI,CAAC,KAAK,mBAAoB,CAC5B,MAAMykB,EAAkBhuB,GAAgB7D,EAAW,KAAK,MAAM,EAE1D6xB,GACF,KAAK,gBAAgBA,CAAe,CAExC,CAMF,CAKQ,gBAAgBnqB,EAAsB,CAG5C,OAFA,KAAK,mBAAqB,GAElBA,EAAA,CACN,IAAK,UACH,KAAK,oBAAA,EACL,MAEF,IAAK,YACH,KAAK,sBAAA,EACL,MAEF,IAAK,OACL,IAAK,UACL,IAAK,QACH,KAAK,oBAAA,EACL,KAAA,CAEN,CAKQ,qBAA4B,CAClC6E,GAAA,EACA,KAAK,YAAY,eAAA,EACjB,KAAK,YAAY,cAAc,EAAE,EACjC,KAAK,qBAAqBqW,EAAE,cAAc,EAAG,GAAI,OAAO,EAGxDrS,EAAiB,mBAAmB,CAClC,MAAO,oBACP,QAAS,GACT,SAAU,KAAK,UAAU,oBAAoB,YAAc,IAC3D,aAAc,UAAA,CACf,EAGD,MAAMuhB,EAAW,KAAK,IAAI,KAAK,UAAU,UAAY,GAAK,EAAE,EAC5D,KAAK,YAAY,aAAaA,CAAQ,EAEtC,WAAW,IAAM,CACf,KAAK,iBAAA,EAAmB,MAAM,QAAQ,KAAK,CAC7C,EAAG,GAAG,CACR,CAKQ,uBAA8B,CACpC,KAAK,qBAAqBlP,EAAE,gBAAgB,EAAG,GAAI,KAAK,EACxD,KAAK,YAAY,eAAA,EAGjBrS,EAAiB,mBAAmB,CAClC,MAAO,oBACP,QAAS,GACT,SAAU,KAAK,UAAU,oBAAoB,YAAc,IAC3D,aAAc,UAAA,CACf,EAEG,KAAK,UAAU,MAAQ,GACzB,WAAW,IAAM,CACf,KAAK,iBAAA,EAAmB,MAAM,QAAQ,KAAK,CAC7C,EAAG,GAAG,CAEV,CAKQ,qBAA4B,CAC9B,KAAK,UAAU,WACjB,KAAK,YAAY,UAAU,EAAK,EAChC,KAAK,qBAAqBqS,EAAE,iBAAiB,EAAG,GAAI,MAAM,EAE1D,WAAW,IAAM,CACf,KAAK,mBAAqB,EAC5B,EAAG,GAAG,GAEN,KAAK,SAAA,CAET,CAKQ,QAAe,CACrB,GAAI,CAAC,KAAK,OAAQ,CAChB,KAAK,kBAAA,EACL,MACF,CAeA,OAZA,KAAK,IAAI,UAAU,EAAG,EAAG,KAAK,OAAO,MAAO,KAAK,OAAO,MAAM,EAG9D,KAAK,IAAI,UACP,KAAK,OAAO,WACZ,EACA,EACA,KAAK,OAAO,MACZ,KAAK,OAAO,MAAA,EAIN,KAAK,UAAU,UAAA,CACrB,IAAK,OACH,KAAK,WAAA,EACL,MAEF,IAAK,UACL,IAAK,SACH,KAAK,eAAA,EACD,KAAK,UAAU,YAAc,UAC/B,KAAK,mBAAA,EAEP,MAEF,IAAK,WACH,KAAK,eAAA,EACL,KAAK,qBAAA,EACL,KAAA,CAIJvV,GAAc,KAAK,GAAG,CAMxB,CAKQ,YAAmB,CACzB,KAAK,IAAI,UAAY,qBACrB,KAAK,IAAI,SAAS,EAAG,EAAG,KAAK,OAAO,MAAO,KAAK,OAAO,MAAM,EAE7D,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,UAAY,SACrB,KAAK,IAAI,SACPuV,EAAE,YAAY,EACd,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,EAI3B,KAAK,IAAI,UAAY,UACrB,KAAK,IAAI,SACP,KAAK,OAAO,MAAQ,EAAI,IACxB,KAAK,OAAO,OAAS,EAAI,GACzB,IACA,EAAA,EAEF,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,SACPA,EAAE,gBAAgB,EAClB,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,EAI3B,KAAK,YAAA,CACP,CAKQ,gBAAuB,CAE7B5iB,EAAU,KAAK,KAAK,IAAK,KAAK,OAAQ,SAAS,EAG/C+D,GAAc,KAAK,IAAK,KAAK,OAAQ,QAAQ,EAG7C,KAAK,SAAA,CACP,CAKQ,UAAiB,CAEvB,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,UAAY,OACrB,KAAK,IAAI,SACP,GAAG6e,EAAE,YAAY,CAAC,KAAK,KAAK,UAAU,MAAM,KAAK,GACjD,GACA,EAAA,EAIF,KAAK,IAAI,SAAS,GAAGA,EAAE,YAAY,CAAC,KAAK,KAAK,UAAU,KAAK,GAAI,GAAI,EAAE,EAGvE,KAAK,IAAI,SAAS,GAAGA,EAAE,YAAY,CAAC,KAAK,KAAK,UAAU,KAAK,GAAI,GAAI,EAAE,EAGnE,KAAK,UAAU,YACjB,KAAK,IAAI,UAAY,OACrB,KAAK,IAAI,SAAS,MAAO,GAAI,GAAG,GAI9Bhf,GAAc,SAChB,KAAK,eAAA,EAIH,KAAK,eAAe,IAAM,GAC5B,KAAK,cAAc,KAAK,cAAc,CAE1C,CAKQ,gBAAuB,CAC7B,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,UAAY,SAGrB,MAAMxD,EAAI,KAAK,OAAO,MAAQ,EAI9B,KAAK,IAAI,SAASwD,GAAc,KAAMxD,EAH5B,EAGgC,CAC5C,CAKQ,cAAc0nB,EAA+B,CACnD,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,UAAYA,EAAQ,MAC7B,KAAK,IAAI,UAAY,SAGrB,MAAMiK,EAAY,KAAK,IAAI,YAAYjK,EAAQ,IAAI,EAAE,MACrD,KAAK,IAAI,UAAY,qBACrB,KAAK,IAAI,SACP,KAAK,OAAO,MAAQ,EAAIiK,EAAY,EAAI,GACxC,KAAK,OAAO,OAAS,EAAI,GACzBA,EAAY,GACZ,EAAA,EAIF,KAAK,IAAI,UAAYjK,EAAQ,MAC7B,KAAK,IAAI,SACPA,EAAQ,KACR,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,CAE7B,CAKQ,sBAA6B,CACnC,KAAK,IAAI,UAAY,qBACrB,KAAK,IAAI,SAAS,EAAG,EAAG,KAAK,OAAO,MAAO,KAAK,OAAO,MAAM,EAE7D,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,UAAY,SACrB,KAAK,IAAI,SACPlF,EAAE,eAAe,EACjB,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,EAG3B,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,SACP,GAAGA,EAAE,YAAY,CAAC,KAAK,KAAK,UAAU,MAAM,KAAK,GACjD,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,EAI3B,KAAK,IAAI,UAAY,UACrB,KAAK,IAAI,SACP,KAAK,OAAO,MAAQ,EAAI,IACxB,KAAK,OAAO,OAAS,EAAI,GACzB,IACA,EAAA,EAEF,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,SACPA,EAAE,gBAAgB,EAClB,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,CAE7B,CAKQ,oBAA2B,CACjC,KAAK,IAAI,UAAY,qBACrB,KAAK,IAAI,SAAS,EAAG,EAAG,KAAK,OAAO,MAAO,KAAK,OAAO,MAAM,EAE7D,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,UAAY,SACrB,KAAK,IAAI,SACPA,EAAE,aAAa,EACf,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,CAAA,EAGvB,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,SACPA,EAAE,sBAAsB,EACxB,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,CAE7B,CAKQ,aAAoB,CAC1B,MAAMvY,EAAQ,KAAK,UAAU,WACvBhK,EAAI,KAAK,OAAO,OAAS,IAE/B,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,UAAY,SAErB,KAAK,IAAI,SACP,eAAegK,EAAM,SAAS,GAC9B,KAAK,OAAO,MAAQ,EACpBhK,CAAA,EAEF,KAAK,IAAI,SACP,iBAAiBgK,EAAM,gBAAgB,GACvC,KAAK,OAAO,MAAQ,EACpBhK,EAAI,EAAA,CAER,CAKQ,iBAAwB,CAC9B,MAAM2xB,EAAU,KAAK,mBAErB,KAAK,IAAI,KAAO,iBAChB,KAAK,IAAI,UAAY,SACrB,KAAK,IAAI,UAAY,OAErB,KAAK,IAAI,SACP,QAAQ,KAAK,MAAMA,EAAQ,GAAG,CAAC,GAC/B,GACA,KAAK,OAAO,OAAS,EAAA,EAEvB,KAAK,IAAI,SACP,UAAUA,EAAQ,UAAU,QAAQ,CAAC,CAAC,KACtC,GACA,KAAK,OAAO,OAAS,EAAA,EAEvB,KAAK,IAAI,SACP,WAAWA,EAAQ,WAAW,QAAQ,CAAC,CAAC,KACxC,GACA,KAAK,OAAO,OAAS,EAAA,EAEvB,KAAK,IAAI,SACP,WAAWA,EAAQ,WAAW,QAAQ,CAAC,CAAC,KACxC,GACA,KAAK,OAAO,OAAS,EAAA,CAEzB,CAKQ,mBAA0B,CAChC,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,SAAS,EAAG,EAAG,KAAK,OAAO,MAAO,KAAK,OAAO,MAAM,EAG7D,KAAK,IAAI,KAAO,+CAChB,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,UAAY,SAGrB,MAAMC,EACJ,OAAOrP,GAAM,WAAaA,EAAE,gBAAgB,EAAI,aAClD,KAAK,IAAI,SACPqP,EACA,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,CAAA,EAIvB,KAAK,IAAI,KAAO,+CAChB,KAAK,IAAI,UAAY,UACrB,KAAK,IAAI,SACP,cACA,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,CAE7B,CAKQ,gBAAgBnK,EAAuB,CAC7C,KAAK,IAAI,UAAY,UACrB,KAAK,IAAI,SAAS,EAAG,EAAG,KAAK,OAAO,MAAO,KAAK,OAAO,MAAM,EAE7D,KAAK,IAAI,KAAO,wBAChB,KAAK,IAAI,UAAY,QACrB,KAAK,IAAI,UAAY,SACrB,KAAK,IAAI,SACPlF,EAAE,cAAc,EAChB,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,EAE3B,KAAK,IAAI,SACPkF,EACA,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,EAAI,EAAA,CAE7B,CAKO,SAAgB,CACjB,KAAK,aACP,qBAAqB,KAAK,WAAW,EAGvCpb,GAAA,EACA1I,GAAA,EACAsJ,GAAA,EAGA,OAAO,oBAAoB,SAAU,KAAK,YAAY,EACtD,SAAS,oBAAoB,UAAW,KAAK,aAAa,EAC1D,SAAS,oBACP,mBACA,KAAK,sBAAA,CAET,CACF,CAGA,IAAI4kB,GAAgC,KAEpC,eAAeC,IAA0B,CACvC,GAAI,CACFD,GAAa,IAAIlB,GAAW,YAAY,EACxC,MAAMkB,GAAW,KAAA,CACnB,OAAS/sB,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,CAGI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoBgtB,EAAQ,EAEtDA,KAAW,MAAM,QAAQ,KAAK,EAIhC,OAAO,iBAAiB,eAAgB,IAAM,CACxCD,IACFA,GAAW,QAAA,CAEf,CAAC","x_google_ignoreList":[4,9,10,11,12,14,15,16,17,18,19,20,21,22,23,24,25]}